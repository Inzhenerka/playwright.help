---
id: class-browser
title: "Browser"
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import HTMLCard from '@site/src/components/HTMLCard';


Браузер создаётся с помощью [BrowserType.launch()](/api/class-browsertype.mdx#browser-type-launch). Пример использования [Browser] для создания [Page]:

```java
import com.microsoft.playwright.*;

public class Example {
 public static void main(String[] args) {
   try (Playwright playwright = Playwright.create()) {
     BrowserType firefox = playwright.firefox();
     Browser browser = firefox.launch();
     Page page = browser.newPage();
     page.navigate("https://example.com");
     browser.close();
   }
 }
}
```


---

## Методы

### browserType {#browser-browser-type}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.23</font><x-search>browser.browserType</x-search>

Возвращает тип браузера (chromium, firefox или webkit), к которому принадлежит данный экземпляр браузера.

**Использование**

```java
Browser.browserType();
```

**Возвращает**
- [BrowserType]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-browser-type-return"/><a href="#browser-browser-type-return" class="list-anchor">#</a>

---

### close {#browser-close}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено до v1.9</font><x-search>browser.close</x-search>

Если браузер был создан с помощью [BrowserType.launch()](/api/class-browsertype.mdx#browser-type-launch), данный метод завершает его работу и закрывает все его страницы (если они были открыты).

Если браузер был подключён извне, метод очищает все созданные контексты и отключается от серверной части браузера.

:::note

Это аналог принудительного завершения работы браузера. Чтобы корректно закрыть страницы и получить события закрытия, вызовите [BrowserContext.close()](/api/class-browsercontext.mdx#browser-context-close) для всех экземпляров [BrowserContext], которые вы явно создавали ранее с помощью [Browser.newContext()](/api/class-browser.mdx#browser-new-context), **до** вызова [Browser.close()](/api/class-browser.mdx#browser-close).
:::

После вызова метода объект [Browser] считается уничтоженным и больше не может быть использован.

**Использование**

```java
Browser.close();
Browser.close(options);
```

**Аргументы**
- `options` `Browser.CloseOptions` *(опционально)*
  - `setReason` [String] *(опционально)* <font size="2">Добавлено в: v1.40</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-close-option-reason"/><a href="#browser-close-option-reason" class="list-anchor">#</a>

Причина, которая будет указана для операций, прерванных в результате закрытия браузера.

**Возвращает**
- [void]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-close-return"/><a href="#browser-close-return" class="list-anchor">#</a>

---

### contexts {#browser-contexts}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено до v1.9</font><x-search>browser.contexts</x-search>

Возвращает массив всех открытых контекстов браузера. В новом экземпляре браузера этот массив будет пустым.

**Использование**

```java
Browser browser = pw.webkit().launch();
System.out.println(browser.contexts().size()); // prints "0"
BrowserContext context = browser.newContext();
System.out.println(browser.contexts().size()); // prints "1"
```

**Возвращает**
- [List]&lt;[BrowserContext]&gt;<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-contexts-return"/><a href="#browser-contexts-return" class="list-anchor">#</a>

---

### isConnected {#browser-is-connected}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено до v1.9</font><x-search>browser.isConnected</x-search>

Указывает, установлено ли соединение с браузером.

**Использование**

```java
Browser.isConnected();
```

**Возвращает**
- [boolean]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-is-connected-return"/><a href="#browser-is-connected-return" class="list-anchor">#</a>

---

### newBrowserCDPSession {#browser-new-browser-cdp-session}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.11</font><x-search>browser.newBrowserCDPSession</x-search>

:::note

CDP-сессии поддерживаются только в браузерах на базе Chromium.
:::

Возвращает новую CDP-сессию браузера.

**Использование**

```java
Browser.newBrowserCDPSession();
```

**Возвращает**
- [CDPSession]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-browser-cdp-session-return"/><a href="#browser-new-browser-cdp-session-return" class="list-anchor">#</a>

---

### newContext {#browser-new-context}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено до версии v1.9</font><x-search>browser.newContext</x-search>

Создаёт новый контекст браузера. Он не будет использовать общие куки и кэш с другими контекстами браузера.

:::note

Если вы напрямую используете этот метод для создания [BrowserContext], рекомендуется явно закрывать возвращённый контекст с помощью [BrowserContext.close()](/api/class-browsercontext.mdx#browser-context-close), когда он больше не нужен, и **до** вызова [Browser.close()](/api/class-browser.mdx#browser-close). Это обеспечит корректное завершение работы `context` и сохранение всех артефактов, таких как HAR-файлы и видео.

:::

**Использование**

```java
Browser browser = playwright.firefox().launch();  // Or 'chromium' or 'webkit'.
// Create a new incognito browser context.
BrowserContext context = browser.newContext();
// Create a new page in a pristine context.
Page page = context.newPage();
page.navigate("https://example.com");

// Graceful close up everything
context.close();
browser.close();
```

**Аргументы**
- `options` `Browser.NewContextOptions` *(опционально)*
  - `setAcceptDownloads` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-accept-downloads"/><a href="#browser-new-context-option-accept-downloads" class="list-anchor">#</a>

    Указывает, следует ли автоматически загружать все вложения. По умолчанию установлено значение `true`, при котором все загрузки принимаются.
  - `setBaseURL` [String] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-base-url"/><a href="#browser-new-context-option-base-url" class="list-anchor">#</a>

    При использовании методов [Page.navigate()](/api/class-page.mdx#page-goto), [Page.route()](/api/class-page.mdx#page-route), [Page.waitForURL()](/api/class-page.mdx#page-wait-for-url), [Page.waitForRequest()](/api/class-page.mdx#page-wait-for-request) или [Page.waitForResponse()](/api/class-page.mdx#page-wait-for-response) в расчёт принимается базовый URL, который используется для построения полного URL через конструктор [`URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL). По умолчанию не установлен. Примеры:
    * baseURL: `http://localhost:3000` и переход на `/bar.html` даст `http://localhost:3000/bar.html`
    * baseURL: `http://localhost:3000/foo/` и переход на `./bar.html` даст `http://localhost:3000/foo/bar.html`
    * baseURL: `http://localhost:3000/foo` (без завершающего слэша) и переход на `./bar.html` даст `http://localhost:3000/bar.html`
  - `setBypassCSP` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-bypass-csp"/><a href="#browser-new-context-option-bypass-csp" class="list-anchor">#</a>

    Включает или отключает обход политики Content-Security-Policy страницы. По умолчанию `false`.
  - `setClientCertificates` [List]&lt;ClientCertificates&gt; *(опционально)* <font size="2">Добавлено в версии: 1.46</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-client-certificates"/><a href="#browser-new-context-option-client-certificates" class="list-anchor">#</a>
    - `setOrigin` [String]

      Точное значение origin, для которого действителен сертификат. Origin включает протокол `https`, имя хоста и, при необходимости, порт.
    - `setCertPath` [Path] *(опционально)*

      Путь к файлу с сертификатом в формате PEM.
    - `setCert` [byte&#91;&#93;] *(опционально)*

      Прямое значение сертификата в формате PEM.
    - `setKeyPath` [Path] *(опционально)*

      Путь к файлу с приватным ключом в формате PEM.
    - `setKey` [byte&#91;&#93;] *(опционально)*

      Прямое значение приватного ключа в формате PEM.
    - `setPfxPath` [Path] *(опционально)*

      Путь к файлу PFX или закодированной цепочке ключа и сертификата в формате PKCS12.
    - `setPfx` [byte&#91;&#93;] *(опционально)*

      Прямое значение PFX или закодированной цепочки в формате PKCS12.
    - `setPassphrase` [String] *(опционально)*

      Пароль для приватного ключа (PEM или PFX).

    TLS-аутентификация клиента позволяет серверу запросить клиентский сертификат и проверить его.

    **Детали**

    Массив клиентских сертификатов, которые будут использоваться. Каждый объект сертификата должен содержать либо одновременно `certPath` и `keyPath`, либо только `pfxPath`, либо их соответствующие значения напрямую (`cert` и `key`, либо `pfx`). Необязательное свойство `passphrase` должно быть указано, если сертификат зашифрован. Свойство `origin` должно точно соответствовать origin запроса, для которого сертификат действителен.

    :::note

    При использовании WebKit на macOS доступ к `localhost` не будет использовать клиентские сертификаты. Это можно обойти, заменив `localhost` на `local.playwright`.
    :::

  - `setColorScheme` [null] | `enum ColorScheme { LIGHT, DARK, NO_PREFERENCE }` *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-color-scheme"/><a href="#browser-new-context-option-color-scheme" class="list-anchor">#</a>

    Эмулирует медиа-фичу [prefers-colors-scheme](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme), поддерживаемые значения — `'light'` и `'dark'`. Подробнее см. [Page.emulateMedia()](/api/class-page.mdx#page-emulate-media). Значение `null` сбрасывает эмуляцию до системных настроек. По умолчанию — `'light'`.

  - `setContrast` [null] | `enum Contrast { NO_PREFERENCE, MORE }` *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-contrast"/><a href="#browser-new-context-option-contrast" class="list-anchor">#</a>

    Эмулирует медиа-фичу `'prefers-contrast'`, поддерживаемые значения — `'no-preference'`, `'more'`. Подробнее см. [Page.emulateMedia()](/api/class-page.mdx#page-emulate-media). Значение `null` сбрасывает эмуляцию до системных настроек. По умолчанию — `'no-preference'`.

  - `setDeviceScaleFactor` [double] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-device-scale-factor"/><a href="#browser-new-context-option-device-scale-factor" class="list-anchor">#</a>

      Указывает коэффициент масштабирования устройства (аналог dpr). По умолчанию — `1`. Подробнее о [эмуляции устройств с коэффициентом масштабирования](../emulation.mdx#devices).

  - `setExtraHTTPHeaders` [Map]&lt;[String], [String]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-extra-http-headers"/><a href="#browser-new-context-option-extra-http-headers" class="list-anchor">#</a>

      Объект с дополнительными HTTP-заголовками, которые будут отправляться с каждым запросом. По умолчанию — отсутствуют.

  - `setForcedColors` [null] | `enum ForcedColors { ACTIVE, NONE }` *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-forced-colors"/><a href="#browser-new-context-option-forced-colors" class="list-anchor">#</a>

      Эмулирует медиа-фичу `'forced-colors'`, поддерживаемые значения — `'active'`, `'none'`. Подробнее см. [Page.emulateMedia()](/api/class-page.mdx#page-emulate-media). Значение `null` сбрасывает эмуляцию до системных настроек. По умолчанию — `'none'`.

  - `setGeolocation` Geolocation *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-geolocation"/><a href="#browser-new-context-option-geolocation" class="list-anchor">#</a>

      - `setLatitude` [double]

        Широта в диапазоне от -90 до 90.
      - `setLongitude` [double]

        Долгота в диапазоне от -180 до 180.
      - `setAccuracy` [double] *(опционально)*

        Неотрицательное значение точности. По умолчанию — `0`.

  - `setHasTouch` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-has-touch"/><a href="#browser-new-context-option-has-touch" class="list-anchor">#</a>

      Определяет, поддерживает ли viewport сенсорные события. По умолчанию — `false`. Подробнее о [мобильной эмуляции](../emulation.mdx#devices).

  - `setHttpCredentials` HttpCredentials *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-http-credentials"/><a href="#browser-new-context-option-http-credentials" class="list-anchor">#</a>

      - `setOrigin` [String] *(опционально)*

        Ограничивает отправку HTTP-учётных данных определённым origin (scheme://host:port).
      - `setSend` `enum HttpCredentialsSend { UNAUTHORIZED, ALWAYS }` *(опционально)*

        Эта опция применяется только к запросам, отправляемым через соответствующий [APIRequestContext], и не влияет на запросы из браузера. `'always'` — заголовок `Authorization` с базовой авторизацией будет отправляться с каждым API-запросом. `'unauthorized'` — учётные данные отправляются только в случае ответа 401 (Unauthorized) с заголовком `WWW-Authenticate`. По умолчанию — `'unauthorized'`.

      Учётные данные для [HTTP-аутентификации](https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication). Если origin не указан, имя пользователя и пароль отправляются на любые серверы при получении ответа с требованием авторизации.

  - `setIgnoreHTTPSErrors` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-ignore-https-errors"/><a href="#browser-new-context-option-ignore-https-errors" class="list-anchor">#</a>

      Игнорировать ли ошибки HTTPS при отправке сетевых запросов. По умолчанию — `false`.

  - `setIsMobile` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-is-mobile"/><a href="#browser-new-context-option-is-mobile" class="list-anchor">#</a>

      Учитывается ли тег `meta viewport` и активированы ли сенсорные события. `isMobile` является частью предустановленного устройства, поэтому обычно нет необходимости указывать его вручную. По умолчанию — `false`, не поддерживается в Firefox. Подробнее о [мобильной эмуляции](../emulation.mdx#ismobile).

  - `setJavaScriptEnabled` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-java-script-enabled"/><a href="#browser-new-context-option-java-script-enabled" class="list-anchor">#</a>

      Включён ли JavaScript в этом контексте. По умолчанию — `true`. Подробнее о [отключении JavaScript](../emulation.mdx#javascript-enabled).

  - `setLocale` [String] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-locale"/><a href="#browser-new-context-option-locale" class="list-anchor">#</a>

      Указание локали пользователя, например `en-GB`, `de-DE` и т.д. Локаль влияет на значение `navigator.language`, заголовок `Accept-Language`, а также правила форматирования чисел и дат. По умолчанию — локаль системы. Подробнее в [руководстве по эмуляции](../emulation.mdx#locale--timezone).

  - `setOffline` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-offline"/><a href="#browser-new-context-option-offline" class="list-anchor">#</a>

      Эмулировать ли офлайн-состояние сети. По умолчанию — `false`. Подробнее о [сетевой эмуляции](../emulation.mdx#offline).

  - `setPermissions` [List]&lt;[String]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-permissions"/><a href="#browser-new-context-option-permissions" class="list-anchor">#</a>

      Список разрешений, предоставляемых всем страницам в этом контексте. Подробнее см. [BrowserContext.grantPermissions()](/api/class-browsercontext.mdx#browser-context-grant-permissions). По умолчанию — нет.

  - `setProxy` Proxy *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-proxy"/><a href="#browser-new-context-option-proxy" class="list-anchor">#</a>

      - `setServer` [String]

        Прокси-сервер, используемый для всех запросов. Поддерживаются HTTP и SOCKS-прокси, например `http://myproxy.com:3128` или `socks5://myproxy.com:3128`. Короткая форма `myproxy.com:3128` считается HTTP-прокси.
      - `setBypass` [String] *(опционально)*

        Необязательный список доменов (через запятую), для которых прокси не будет использоваться, например `".com, chromium.org, .domain.com"`.
      - `setUsername` [String] *(опционально)*

        Необязательное имя пользователя, если прокси требует аутентификацию.
      - `setPassword` [String] *(опционально)*

        Необязательный пароль, если прокси требует аутентификацию.

      Настройки сетевого прокси для этого контекста. По умолчанию — отсутствуют.

  - `setRecordHarContent` `enum HarContentPolicy { OMIT, EMBED, ATTACH }` *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-record-har-content"/><a href="#browser-new-context-option-record-har-content" class="list-anchor">#</a>

      Необязательная настройка управления содержимым ресурсов. При значении `omit` содержимое не сохраняется. При `attach` ресурсы сохраняются как отдельные файлы и архивируются вместе с HAR. По умолчанию — `embed`, что сохраняет содержимое внутри HAR-файла согласно спецификации HAR.

  - `setRecordHarMode` `enum HarMode { FULL, MINIMAL }` *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-record-har-mode"/><a href="#browser-new-context-option-record-har-mode" class="list-anchor">#</a>

      При значении `minimal` записывается только информация, необходимая для воспроизведения HAR, без размеров, времени, страницы, cookies, безопасности и прочих данных. По умолчанию — `full`.

  - `setRecordHarOmitContent` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-record-har-omit-content"/><a href="#browser-new-context-option-record-har-omit-content" class="list-anchor">#</a>

      Необязательная настройка, указывающая, исключать ли содержимое запроса из HAR. По умолчанию — `false`.

  - `setRecordHarPath` [Path] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-record-har-path"/><a href="#browser-new-context-option-record-har-path" class="list-anchor">#</a>

      Включает [HAR](http://www.softwareishard.com/blog/har-12-spec) запись для всех страниц в указанный HAR-файл. Если путь не указан, HAR не записывается. Не забудьте вызвать [BrowserContext.close()](/api/class-browsercontext.mdx#browser-context-close), чтобы сохранить HAR.

  - `setRecordHarUrlFilter` [String] | [Pattern] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-record-har-url-filter"/><a href="#browser-new-context-option-record-har-url-filter" class="list-anchor">#</a>

  - `setRecordVideoDir` [Path] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-record-video-dir"/><a href="#browser-new-context-option-record-video-dir" class="list-anchor">#</a>

      Включает запись видео всех страниц в указанный каталог. Если не указано — видео не записываются. Не забудьте вызвать [BrowserContext.close()](/api/class-browsercontext.mdx#browser-context-close), чтобы сохранить видео.

  - `setRecordVideoSize` RecordVideoSize *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-record-video-size"/><a href="#browser-new-context-option-record-video-size" class="list-anchor">#</a>

      - `setWidth` [int]

        Ширина кадра видео.
      - `setHeight` [int]

        Высота кадра видео.

      Размеры записываемого видео. Если не указано — размер соответствует `viewport`, уменьшенному до 800x800. Если `viewport` не задан явно, по умолчанию используется размер 800x450. Изображение каждой страницы при необходимости масштабируется под заданные размеры.

  - `setReducedMotion` [null] | `enum ReducedMotion { REDUCE, NO_PREFERENCE }` *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-reduced-motion"/><a href="#browser-new-context-option-reduced-motion" class="list-anchor">#</a>

      Эмулирует медиа-фичу `'prefers-reduced-motion'`, поддерживаемые значения — `'reduce'`, `'no-preference'`. Подробнее см. [Page.emulateMedia()](/api/class-page.mdx#page-emulate-media). Значение `null` сбрасывает эмуляцию до системных настроек. По умолчанию — `'no-preference'`.

  - `setScreenSize` ScreenSize *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-screen"/><a href="#browser-new-context-option-screen" class="list-anchor">#</a>

      - `setWidth` [int]

        Ширина страницы в пикселях.
      - `setHeight` [int]

        Высота страницы в пикселях.

      Эмулирует постоянный размер окна, доступный через `window.screen` внутри страницы. Используется только если задан [setViewportSize](/api/class-browser.mdx#browser-new-context-option-viewport).

  - `setServiceWorkers` `enum ServiceWorkerPolicy { ALLOW, BLOCK }` *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-service-workers"/><a href="#browser-new-context-option-service-workers" class="list-anchor">#</a>

      Разрешать ли сайтам регистрировать Service Workers. По умолчанию — `'allow'`.

      * `'allow'`: Разрешено регистрировать [Service Workers](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API).
      * `'block'`: Playwright будет блокировать все регистрации Service Workers.

  - `setStorageState` [String] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-storage-state"/><a href="#browser-new-context-option-storage-state" class="list-anchor">#</a>

      Инициализирует контекст с заданным состоянием хранилища. Можно использовать для загрузки информации о входе в систему, полученной через [BrowserContext.storageState()](/api/class-browsercontext.mdx#browser-context-storage-state).

  - `setStorageStatePath` [Path] *(опционально)* <font size="2">Добавлено в: v1.9</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-storage-state-path"/><a href="#browser-new-context-option-storage-state-path" class="list-anchor">#</a>

      Инициализирует контекст с заданным состоянием хранилища. Можно использовать для загрузки информации о входе в систему, полученной через [BrowserContext.storageState()](/api/class-browsercontext.mdx#browser-context-storage-state). Путь к файлу с сохранённым состоянием.

  - `setStrictSelectors` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-strict-selectors"/><a href="#browser-new-context-option-strict-selectors" class="list-anchor">#</a>

      Если установлено в `true`, включает строгий режим селекторов для этого контекста. В строгом режиме все операции с селекторами, предполагающие единственный DOM-элемент, выбрасывают исключение, если селектор находит несколько элементов. Эта опция не влияет на API Locator (они всегда работают в строгом режиме). По умолчанию — `false`. Подробнее см. [Locator].

  - `setTimezoneId` [String] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-timezone-id"/><a href="#browser-new-context-option-timezone-id" class="list-anchor">#</a>

      Изменяет часовой пояс контекста. См. [ICU's metaZones.txt](https://cs.chromium.org/chromium/src/third_party/icu/source/data/misc/metaZones.txt?rcl=faee8bc70570192d82d2978a71e2a615788597d1) для списка поддерживаемых идентификаторов. По умолчанию — часовой пояс системы.

  - `setUserAgent` [String] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-user-agent"/><a href="#browser-new-context-option-user-agent" class="list-anchor">#</a>

      Задаёт user agent для данного контекста.

  - `setViewportSize` [null] | ViewportSize *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-viewport"/><a href="#browser-new-context-option-viewport" class="list-anchor">#</a>

      - `setWidth` [int]

        Ширина страницы в пикселях.
      - `setHeight` [int]

        Высота страницы в пикселях.

      Эмулирует постоянный viewport для каждой страницы. По умолчанию используется разрешение 1280x720. Значение `null` отключает эмуляцию viewport. Подробнее о [эмуляции viewport](../emulation#viewport).

      :::note

      Значение `null` отключает стандартные предустановки и делает размер viewport зависимым от размеров окна хоста, определяемых операционной системой. Это делает выполнение тестов недетерминированным.
      :::

**Возвращает**
- [BrowserContext]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-return"/><a href="#browser-new-context-return" class="list-anchor">#</a>

---

### newPage {#browser-new-page}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено до v1.9</font><x-search>browser.newPage</x-search>

Создаёт новую страницу в новом контексте браузера. Закрытие этой страницы также приведёт к закрытию контекста.

Это вспомогательный API, который следует использовать только для сценариев с одной страницей и коротких сниппетов. В производственном коде и тестовых фреймворках следует явно создавать [Browser.newContext()](/api/class-browser.mdx#browser-new-context), а затем вызывать [BrowserContext.newPage()](/api/class-browsercontext.mdx#browser-context-new-page), чтобы управлять временем жизни объектов.

**Использование**

```java
Browser.newPage();
Browser.newPage(options);
```

**Аргументы**
- `options` `Browser.NewPageOptions` *(опционально)*
  - `setAcceptDownloads` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-accept-downloads"/><a href="#browser-new-page-option-accept-downloads" class="list-anchor">#</a>

    Загружать ли вложения автоматически. По умолчанию — `true`, все загрузки принимаются.
  - `setBaseURL` [String] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-base-url"/><a href="#browser-new-page-option-base-url" class="list-anchor">#</a>

    При использовании [Page.navigate()](/api/class-page.mdx#page-goto), [Page.route()](/api/class-page.mdx#page-route), [Page.waitForURL()](/api/class-page.mdx#page-wait-for-url), [Page.waitForRequest()](/api/class-page.mdx#page-wait-for-request) или [Page.waitForResponse()](/api/class-page.mdx#page-wait-for-response), базовый URL учитывается с помощью конструктора [`URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) для построения конечного URL. По умолчанию не задан. Примеры:
    * baseURL: `http://localhost:3000` и переход на `/bar.html` даст `http://localhost:3000/bar.html`
    * baseURL: `http://localhost:3000/foo/` и переход на `./bar.html` даст `http://localhost:3000/foo/bar.html`
    * baseURL: `http://localhost:3000/foo` (без завершающего слэша) и переход на `./bar.html` даст `http://localhost:3000/bar.html`
  - `setBypassCSP` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-bypass-csp"/><a href="#browser-new-page-option-bypass-csp" class="list-anchor">#</a>

    Переключает обход политики Content-Security-Policy страницы. По умолчанию — `false`.
  - `setClientCertificates` [List]&lt;ClientCertificates&gt; *(опционально)* <font size="2">Добавлено в: 1.46</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-client-certificates"/><a href="#browser-new-page-option-client-certificates" class="list-anchor">#</a>
    - `setOrigin` [String]

      Точный origin, для которого действителен сертификат. Origin включает протокол `https`, имя хоста и, при необходимости, порт.
    - `setCertPath` [Path] *(опционально)*

      Путь к файлу с сертификатом в формате PEM.
    - `setCert` [byte&#91;&#93;] *(опционально)*

      Прямое значение сертификата в формате PEM.
    - `setKeyPath` [Path] *(опционально)*

      Путь к файлу с закрытым ключом в формате PEM.
    - `setKey` [byte&#91;&#93;] *(опционально)*

      Прямое значение закрытого ключа в формате PEM.
    - `setPfxPath` [Path] *(опционально)*

      Путь к файлу с закрытым ключом и цепочкой сертификатов в формате PFX или PKCS12.
    - `setPfx` [byte&#91;&#93;] *(опционально)*

      Прямое значение закрытого ключа и цепочки сертификатов в формате PFX или PKCS12.
    - `setPassphrase` [String] *(опционально)*

      Пароль для закрытого ключа (PEM или PFX).

    TLS-аутентификация клиента позволяет серверу запрашивать клиентский сертификат и проверять его.

    **Детали**

    Массив клиентских сертификатов, которые будут использоваться. Каждый объект сертификата должен содержать либо одновременно `certPath` и `keyPath`, либо один `pfxPath`, либо соответствующие им значения напрямую (`cert` и `key`, или `pfx`). При необходимости следует указать свойство `passphrase`, если сертификат зашифрован. Свойство `origin` должно быть задано с точным соответствием origin'у запроса, для которого сертификат действителен.

    :::note

    При использовании WebKit на macOS доступ к `localhost` не приведёт к использованию клиентских сертификатов. Чтобы обойти это ограничение, замените `localhost` на `local.playwright`.
    :::

  - `setColorScheme` [null] | `enum ColorScheme { LIGHT, DARK, NO_PREFERENCE }` *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-color-scheme"/><a href="#browser-new-page-option-color-scheme" class="list-anchor">#</a>

  Эмулирует медиапараметр [prefers-color-scheme](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme); поддерживаемые значения: `'light'` и `'dark'`. Подробнее см. [Page.emulateMedia()](/api/class-page.mdx#page-emulate-media). Значение `null` сбрасывает эмуляцию на настройки системы. По умолчанию — `'light'`.

  - `setContrast` [null] | `enum Contrast { NO_PREFERENCE, MORE }` *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-contrast"/><a href="#browser-new-page-option-contrast" class="list-anchor">#</a>

  Эмулирует медиапараметр `'prefers-contrast'`; поддерживаемые значения: `'no-preference'`, `'more'`. Подробнее см. [Page.emulateMedia()](/api/class-page.mdx#page-emulate-media). Значение `null` сбрасывает эмуляцию на настройки системы. По умолчанию — `'no-preference'`.

  - `setDeviceScaleFactor` [double] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-device-scale-factor"/><a href="#browser-new-page-option-device-scale-factor" class="list-anchor">#</a>

  Указывает коэффициент масштабирования устройства (аналог dpr). По умолчанию — `1`. Подробнее о [эмуляции устройств с коэффициентом масштабирования](../emulation.mdx#devices).

  - `setExtraHTTPHeaders` [Map]&lt;[String], [String]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-extra-http-headers"/><a href="#browser-new-page-option-extra-http-headers" class="list-anchor">#</a>

  Объект с дополнительными HTTP-заголовками, которые будут добавлены ко всем запросам. По умолчанию — отсутствуют.

  - `setForcedColors` [null] | `enum ForcedColors { ACTIVE, NONE }` *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-forced-colors"/><a href="#browser-new-page-option-forced-colors" class="list-anchor">#</a>

  Эмулирует медиапараметр `'forced-colors'`; поддерживаемые значения: `'active'`, `'none'`. Подробнее см. [Page.emulateMedia()](/api/class-page.mdx#page-emulate-media). Значение `null` сбрасывает эмуляцию на настройки системы. По умолчанию — `'none'`.

  - `setGeolocation` Geolocation *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-geolocation"/><a href="#browser-new-page-option-geolocation" class="list-anchor">#</a>
  - `setLatitude` [double]

    Широта в пределах от -90 до 90.
    - `setLongitude` [double]

    Долгота в пределах от -180 до 180.
    - `setAccuracy` [double] *(опционально)*

    Неотрицательное значение точности. По умолчанию — `0`.

  - `setHasTouch` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-has-touch"/><a href="#browser-new-page-option-has-touch" class="list-anchor">#</a>

      Определяет, поддерживает ли viewport события касания. По умолчанию — `false`. Подробнее см. раздел про [эмуляцию мобильных устройств](../emulation.mdx#devices).

  - `setHttpCredentials` HttpCredentials *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-http-credentials"/><a href="#browser-new-page-option-http-credentials" class="list-anchor">#</a>
    - `setUsername` [String]

    - `setPassword` [String]

    - `setOrigin` [String] *(опционально)*

      Ограничивает отправку HTTP-учётных данных определённым origin (scheme://host:port).
    - `setSend` `enum HttpCredentialsSend { UNAUTHORIZED, ALWAYS }` *(опционально)*

      Этот параметр применяется только к запросам, отправленным с помощью соответствующего [APIRequestContext], и не влияет на запросы, отправленные из браузера. `'always'` — заголовок `Authorization` с данными базовой авторизации будет отправляться с каждым API-запросом. `'unauthorized'` — учётные данные отправляются только при получении ответа 401 (Unauthorized) с заголовком `WWW-Authenticate`. По умолчанию — `'unauthorized'`.

    Учётные данные для [HTTP-аутентификации](https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication). Если origin не указан, имя пользователя и пароль отправляются любому серверу при получении ответа с требованием авторизации.

  - `setIgnoreHTTPSErrors` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-ignore-https-errors"/><a href="#browser-new-page-option-ignore-https-errors" class="list-anchor">#</a>

    Игнорировать ли ошибки HTTPS при выполнении сетевых запросов. По умолчанию — `false`.

  - `setIsMobile` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-is-mobile"/><a href="#browser-new-page-option-is-mobile" class="list-anchor">#</a>

    Определяет, учитывается ли тег `meta viewport` и включены ли события касания. `isMobile` является частью устройства, поэтому обычно не требуется указывать вручную. По умолчанию — `false`. Не поддерживается в Firefox. Подробнее см. раздел про [эмуляцию мобильных устройств](../emulation.mdx#ismobile).

  - `setJavaScriptEnabled` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-java-script-enabled"/><a href="#browser-new-page-option-java-script-enabled" class="list-anchor">#</a>

    Включён ли JavaScript в этом контексте. По умолчанию — `true`. Подробнее см. раздел про [отключение JavaScript](../emulation.mdx#javascript-enabled).

  - `setLocale` [String] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-locale"/><a href="#browser-new-page-option-locale" class="list-anchor">#</a>

    Указывает пользовательскую локаль, например `en-GB`, `de-DE` и т.д. Локаль влияет на значение `navigator.language`, заголовок `Accept-Language`, а также правила форматирования чисел и дат. По умолчанию используется системная локаль. Подробнее об эмуляции см. в [руководстве по эмуляции](../emulation.mdx#locale--timezone).

  - `setOffline` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-offline"/><a href="#browser-new-page-option-offline" class="list-anchor">#</a>

    Эмулировать ли отсутствие сети. По умолчанию — `false`. Подробнее о [сетевой эмуляции](../emulation.mdx#offline).

  - `setPermissions` [List]&lt;[String]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-permissions"/><a href="#browser-new-page-option-permissions" class="list-anchor">#</a>

    Список разрешений, предоставляемых всем страницам в этом контексте. Подробнее см. [BrowserContext.grantPermissions()](/api/class-browsercontext.mdx#browser-context-grant-permissions). По умолчанию — нет разрешений.

  - `setProxy` Proxy *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-proxy"/><a href="#browser-new-page-option-proxy" class="list-anchor">#</a>
    - `setServer` [String]

      Прокси-сервер, который будет использоваться для всех запросов. Поддерживаются HTTP и SOCKS прокси, например `http://myproxy.com:3128` или `socks5://myproxy.com:3128`. Короткая форма `myproxy.com:3128` считается HTTP-прокси.
    - `setBypass` [String] *(опционально)*

      Необязательный список доменов, разделённых запятыми, которые будут обходить прокси, например `".com, chromium.org, .domain.com"`.
    - `setUsername` [String] *(опционально)*

      Необязательное имя пользователя, если для прокси требуется авторизация.
    - `setPassword` [String] *(опционально)*

    Необязательный пароль, если для прокси требуется авторизация.

    Настройки сетевого прокси, которые будут использоваться в этом контексте. По умолчанию — не указано.

  - `setRecordHarContent` `enum HarContentPolicy { OMIT, EMBED, ATTACH }` *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-record-har-content"/><a href="#browser-new-page-option-record-har-content" class="list-anchor">#</a>

    Необязательная настройка для управления сохранением содержимого ресурсов. При значении `omit` содержимое не сохраняется. При значении `attach` ресурсы сохраняются в виде отдельных файлов и архивируются вместе с HAR-файлом. По умолчанию — `embed`, то есть содержимое сохраняется встроенно в HAR-файл согласно спецификации HAR.

  - `setRecordHarMode` `enum HarMode { FULL, MINIMAL }` *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-record-har-mode"/><a href="#browser-new-page-option-record-har-mode" class="list-anchor">#</a>

    При значении `minimal` записывается только информация, необходимая для воспроизведения маршрутов из HAR. Исключаются размеры, тайминги, информация о страницах, cookies, параметры безопасности и другие данные, не используемые при воспроизведении HAR. По умолчанию — `full`.

  - `setRecordHarOmitContent` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-record-har-omit-content"/><a href="#browser-new-page-option-record-har-omit-content" class="list-anchor">#</a>

    Необязательная настройка, определяющая, нужно ли исключить содержимое запроса из HAR. По умолчанию — `false`.

  - `setRecordHarPath` [Path] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-record-har-path"/><a href="#browser-new-page-option-record-har-path" class="list-anchor">#</a>

    Включает запись [HAR](http://www.softwareishard.com/blog/har-12-spec) для всех страниц в указанный файл на файловой системе. Если не указано, запись HAR не производится. Не забудьте вызвать [BrowserContext.close()](/api/class-browsercontext.mdx#browser-context-close), чтобы HAR-файл был сохранён.

  - `setRecordHarUrlFilter` [String] | [Pattern] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-record-har-url-filter"/><a href="#browser-new-page-option-record-har-url-filter" class="list-anchor">#</a>


  - `setRecordVideoDir` [Path] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-record-video-dir"/><a href="#browser-new-page-option-record-video-dir" class="list-anchor">#</a>

  Включает запись видео для всех страниц в указанную директорию. Если путь не указан, видео не записывается. Обязательно вызовите [BrowserContext.close()](/api/class-browsercontext.mdx#browser-context-close), чтобы сохранить видео.

  - `setRecordVideoSize` RecordVideoSize *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-record-video-size"/><a href="#browser-new-page-option-record-video-size" class="list-anchor">#</a>
    - `setWidth` [int]

    Ширина кадра видео.
    - `setHeight` [int]

    Высота кадра видео.

  Размеры записываемого видео. Если не указаны, размер будет соответствовать `viewport`, масштабированному под 800x800. Если `viewport` не задан явно, размер видео по умолчанию — 800x450. Изображение каждой страницы будет масштабироваться при необходимости, чтобы соответствовать заданным размерам.

  - `setReducedMotion` [null] | `enum ReducedMotion { REDUCE, NO_PREFERENCE }` *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-reduced-motion"/><a href="#browser-new-page-option-reduced-motion" class="list-anchor">#</a>

  Эмулирует медиапараметр `'prefers-reduced-motion'`. Поддерживаемые значения: `'reduce'`, `'no-preference'`. Подробнее см. [Page.emulateMedia()](/api/class-page.mdx#page-emulate-media). Значение `null` сбрасывает эмуляцию до системных настроек. По умолчанию — `'no-preference'`.

  - `setScreenSize` ScreenSize *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-screen"/><a href="#browser-new-page-option-screen" class="list-anchor">#</a>
    - `setWidth` [int]

    Ширина окна страницы в пикселях.
    - `setHeight` [int]

    Высота окна страницы в пикселях.

  Эмулирует фиксированный размер окна, доступный внутри веб-страницы через `window.screen`. Используется только при заданном параметре [setViewportSize](/api/class-browser.mdx#browser-new-page-option-viewport).

  - `setServiceWorkers` `enum ServiceWorkerPolicy { ALLOW, BLOCK }` *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-service-workers"/><a href="#browser-new-page-option-service-workers" class="list-anchor">#</a>

  Разрешать ли сайтам регистрировать Service Workers. По умолчанию — `'allow'`.
    * `'allow'`: Разрешена регистрация [Service Workers](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API).
    * `'block'`: Playwright будет блокировать любую регистрацию Service Workers.

  - `setStorageState` [String] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-storage-state"/><a href="#browser-new-page-option-storage-state" class="list-anchor">#</a>

  Заполняет контекст заданным состоянием хранилища. Может использоваться для инициализации контекста с уже авторизованным пользователем, полученным через [BrowserContext.storageState()](/api/class-browsercontext.mdx#browser-context-storage-state).

  - `setStorageStatePath` [Path] *(опционально)* <font size="2">Добавлено в: v1.9</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-storage-state-path"/><a href="#browser-new-page-option-storage-state-path" class="list-anchor">#</a>

  Заполняет контекст состоянием хранилища из файла. Может использоваться для инициализации контекста с авторизованным пользователем, сохранённым через [BrowserContext.storageState()](/api/class-browsercontext.mdx#browser-context-storage-state). Путь к файлу с сохранённым состоянием.

  - `setStrictSelectors` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-strict-selectors"/><a href="#browser-new-page-option-strict-selectors" class="list-anchor">#</a>

  Если установлено в `true`, включает режим строгих селекторов для этого контекста. В этом режиме все операции с селекторами, подразумевающими один элемент в DOM, выбросят ошибку, если селектору соответствует более одного элемента. Эта настройка не влияет на API Locator (они всегда используют строгий режим). По умолчанию — `false`. Подробнее см. [Locator].

  - `setTimezoneId` [String] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-timezone-id"/><a href="#browser-new-page-option-timezone-id" class="list-anchor">#</a>

  Изменяет часовой пояс для контекста. Список поддерживаемых идентификаторов часовых поясов можно найти в [ICU metaZones.txt](https://cs.chromium.org/chromium/src/third_party/icu/source/data/misc/metaZones.txt?rcl=faee8bc70570192d82d2978a71e2a615788597d1). По умолчанию используется системный часовой пояс.

  - `setUserAgent` [String] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-user-agent"/><a href="#browser-new-page-option-user-agent" class="list-anchor">#</a>

  Указывает конкретный user agent для этого контекста.

  - `setViewportSize` [null] | ViewportSize *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-viewport"/><a href="#browser-new-page-option-viewport" class="list-anchor">#</a>
    - `setWidth` [int]

    Ширина страницы в пикселях.
    - `setHeight` [int]

    Высота страницы в пикселях.

  Эмулирует фиксированный viewport для каждой страницы. По умолчанию используется viewport 1280x720. Укажите `null`, чтобы отключить эмуляцию фиксированного viewport. Подробнее о [эмуляции viewport](../emulation#viewport).

  :::note

  Значение `null` отключает предустановки по умолчанию и делает viewport зависимым от размера окна хоста, заданного операционной системой. Это может привести к недетерминированному выполнению тестов.
  :::

**Возвращает**
- [Page]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-return"/><a href="#browser-new-page-return" class="list-anchor">#</a>

---

### startTracing {#browser-start-tracing}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.11</font><x-search>browser.startTracing</x-search>

:::note

Этот API управляет [Chromium Tracing](https://www.chromium.org/developers/how-tos/trace-event-profiling-tool), который является низкоуровневым инструментом отладки, специфичным для Chromium. API для управления [Playwright Tracing](../trace-viewer) можно найти [здесь](./class-tracing).
:::

Вы можете использовать [Browser.startTracing()](/api/class-browser.mdx#browser-start-tracing) и [Browser.stopTracing()](/api/class-browser.mdx#browser-stop-tracing) для создания файла трассировки, который можно открыть в панели производительности Chrome DevTools.

**Использование**

```java
browser.startTracing(page, new Browser.StartTracingOptions()
  .setPath(Paths.get("trace.json")));
page.navigate("https://www.google.com");
browser.stopTracing();
```

**Аргументы**
- `page` [Page] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-start-tracing-option-page"/><a href="#browser-start-tracing-option-page" class="list-anchor">#</a>
  
  Опционально, если указано, трассировка включает скриншоты данной страницы.
- `options` `Browser.StartTracingOptions` *(опционально)*
  - `setCategories` [List]&lt;[String]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-start-tracing-option-categories"/><a href="#browser-start-tracing-option-categories" class="list-anchor">#</a>
    
    укажите пользовательские категории для использования вместо стандартных.
  - `setPath` [Path] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-start-tracing-option-path"/><a href="#browser-start-tracing-option-path" class="list-anchor">#</a>
    
    Путь для записи файла трассировки.
  - `setScreenshots` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-start-tracing-option-screenshots"/><a href="#browser-start-tracing-option-screenshots" class="list-anchor">#</a>
    
    захватывает скриншоты в трассировке.

**Возвращает**
- [void]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-start-tracing-return"/><a href="#browser-start-tracing-return" class="list-anchor">#</a>

---

### stopTracing {#browser-stop-tracing}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.11</font><x-search>browser.stopTracing</x-search>

:::note

Этот API управляет [Chromium Tracing](https://www.chromium.org/developers/how-tos/trace-event-profiling-tool), который является низкоуровневым инструментом отладки, специфичным для Chromium. API для управления [Playwright Tracing](../trace-viewer) можно найти [здесь](./class-tracing).
:::

Возвращает буфер с данными трассировки.

**Использование**

```java
Browser.stopTracing();
```

**Возвращает**
- [byte&#91;&#93;]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-stop-tracing-return"/><a href="#browser-stop-tracing-return" class="list-anchor">#</a>

---

### version {#browser-version}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено до v1.9</font><x-search>browser.version</x-search>

Возвращает версию браузера.

**Использование**

```java
Browser.version();
```

**Возвращает**
- [String]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-version-return"/><a href="#browser-version-return" class="list-anchor">#</a>

---

## События

### onDisconnected(handler) {#browser-event-disconnected}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено до v1.9</font><x-search>browser.onDisconnected(handler)</x-search>

Вызывается, когда браузер отключается от приложения браузера. Это может произойти по одной из следующих причин:
* Приложение браузера закрыто или аварийно завершило работу.
* Метод [Browser.close()](/api/class-browser.mdx#browser-close) был вызван.

**Использование**

```java
Browser.onDisconnected(handler)
```

**Данные события**
- [Browser]


[APIRequest]: /api/class-apirequest.mdx "APIRequest"
[APIRequestContext]: /api/class-apirequestcontext.mdx "APIRequestContext"
[APIResponse]: /api/class-apiresponse.mdx "APIResponse"
[APIResponseAssertions]: /api/class-apiresponseassertions.mdx "APIResponseAssertions"
[Browser]: /api/class-browser.mdx "Browser"
[BrowserContext]: /api/class-browsercontext.mdx "BrowserContext"
[BrowserType]: /api/class-browsertype.mdx "BrowserType"
[CDPSession]: /api/class-cdpsession.mdx "CDPSession"
[Clock]: /api/class-clock.mdx "Clock"
[ConsoleMessage]: /api/class-consolemessage.mdx "ConsoleMessage"
[Dialog]: /api/class-dialog.mdx "Dialog"
[Download]: /api/class-download.mdx "Download"
[ElementHandle]: /api/class-elementhandle.mdx "ElementHandle"
[FileChooser]: /api/class-filechooser.mdx "FileChooser"
[FormData]: /api/class-formdata.mdx "FormData"
[Frame]: /api/class-frame.mdx "Frame"
[FrameLocator]: /api/class-framelocator.mdx "FrameLocator"
[JSHandle]: /api/class-jshandle.mdx "JSHandle"
[Keyboard]: /api/class-keyboard.mdx "Keyboard"
[Locator]: /api/class-locator.mdx "Locator"
[LocatorAssertions]: /api/class-locatorassertions.mdx "LocatorAssertions"
[Mouse]: /api/class-mouse.mdx "Mouse"
[Page]: /api/class-page.mdx "Page"
[PageAssertions]: /api/class-pageassertions.mdx "PageAssertions"
[Playwright]: /api/class-playwright.mdx "Playwright"
[PlaywrightAssertions]: /api/class-playwrightassertions.mdx "PlaywrightAssertions"
[PlaywrightException]: /api/class-playwrightexception.mdx "PlaywrightException"
[Request]: /api/class-request.mdx "Request"
[RequestOptions]: /api/class-requestoptions.mdx "RequestOptions"
[Response]: /api/class-response.mdx "Response"
[Route]: /api/class-route.mdx "Route"
[Selectors]: /api/class-selectors.mdx "Selectors"
[TimeoutError]: /api/class-timeouterror.mdx "TimeoutError"
[Touchscreen]: /api/class-touchscreen.mdx "Touchscreen"
[Tracing]: /api/class-tracing.mdx "Tracing"
[Video]: /api/class-video.mdx "Video"
[WebError]: /api/class-weberror.mdx "WebError"
[WebSocket]: /api/class-websocket.mdx "WebSocket"
[WebSocketFrame]: /api/class-websocketframe.mdx "WebSocketFrame"
[WebSocketRoute]: /api/class-websocketroute.mdx "WebSocketRoute"
[Worker]: /api/class-worker.mdx "Worker"
[Element]: https://developer.mozilla.org/en-US/docs/Web/API/element "Element"
[EvaluationArgument]: /evaluating.mdx#evaluation-argument "EvaluationArgument"
[Promise]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"
[iterator]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols "Iterator"
[origin]: https://developer.mozilla.org/en-US/docs/Glossary/Origin "Origin"
[selector]: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors "selector"
[Serializable]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable"
[UIEvent.detail]: https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detail "UIEvent.detail"
[UnixTime]: https://en.wikipedia.org/wiki/Unix_time "Unix Time"
[xpath]: https://developer.mozilla.org/en-US/docs/Web/XPath "xpath"

[boolean]: https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html "boolean"
[byte&#91;&#93;]: https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html "byte[]"
[Consumer]: https://docs.oracle.com/javase/8/docs/api/java/util/function/Consumer.html "Consumer"
[Date]: https://docs.oracle.com/javase/8/docs/api/java/util/Date.html "Date"
[double]: https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html "double"
[InputStream]: https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html "InputStream"
[int]: https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html "int"
[long]: https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html "long"
[JsonObject]: https://www.javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/JsonObject.html "JsonObject"
[List]: https://docs.oracle.com/javase/8/docs/api/java/util/List.html "List"
[Map]: https://docs.oracle.com/javase/8/docs/api/java/util/Map.html "Map"
[null]: https://docs.oracle.com/javase/specs/jls/se8/html/jls-3.html#jls-3.10.7 "null"
[Object]: https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html "Object"
[Path]: https://docs.oracle.com/javase/8/docs/api/java/nio/file/Path.html "Path"
[Pattern]: https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html "Pattern"
[Predicate]: https://docs.oracle.com/javase/8/docs/api/java/util/function/Predicate.html "Predicate"
[void]: https://docs.oracle.com/javase/tutorial/java/javaOO/methods.html "void"
[Runnable]: https://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html "Runnable"
[RuntimeException]: https://docs.oracle.com/javase/8/docs/api/java/lang/RuntimeException.html "RuntimeException"
[String]: https://docs.oracle.com/javase/8/docs/api/java/lang/String.html "String"

[all available image tags]: https://mcr.microsoft.com/en-us/product/playwright/java/about "all available image tags"
[Microsoft Artifact Registry]: https://mcr.microsoft.com/en-us/product/playwright/java/about "Microsoft Artifact Registry"
[Dockerfile.noble]: https://github.com/microsoft/playwright-java/blob/main/utils/docker/Dockerfile.noble "Dockerfile.noble"
