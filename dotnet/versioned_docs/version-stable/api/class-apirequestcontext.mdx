---
id: class-apirequestcontext
title: "APIRequestContext"
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import HTMLCard from '@site/src/components/HTMLCard';

Этот API используется для тестирования веб-API. Вы можете использовать его для вызова конечных точек API, настройки микросервисов, подготовки окружения или сервиса для вашего e2e теста.

Каждый контекст браузера Playwright имеет связанный с ним экземпляр [APIRequestContext], который разделяет хранилище cookie с контекстом браузера и может быть доступен через [BrowserContext.APIRequest](/api/class-browsercontext.mdx#browser-context-request) или [Page.APIRequest](/api/class-page.mdx#page-request). Также возможно создать новый экземпляр APIRequestContext вручную, вызвав [ApiRequest.NewContextAsync()](/api/class-apirequest.mdx#api-request-new-context).

**Управление cookie**

[APIRequestContext], возвращаемый [BrowserContext.APIRequest](/api/class-browsercontext.mdx#browser-context-request) и [Page.APIRequest](/api/class-page.mdx#page-request), разделяет хранилище cookie с соответствующим [BrowserContext]. Каждый API-запрос будет иметь заголовок `Cookie`, заполненный значениями из контекста браузера. Если ответ API содержит заголовок `Set-Cookie`, он автоматически обновит cookie [BrowserContext], и запросы, сделанные со страницы, их подхватят. Это означает, что если вы войдете в систему с помощью этого API, ваш e2e тест будет авторизован, и наоборот.

Если вы хотите, чтобы API-запросы не вмешивались в cookie браузера, вы должны создать новый [APIRequestContext], вызвав [ApiRequest.NewContextAsync()](/api/class-apirequest.mdx#api-request-new-context). Такой объект `APIRequestContext` будет иметь собственное изолированное хранилище cookie.

---

## Методы

### CreateFormData {#api-request-context-create-form-data}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.23</font><x-search>apiRequestContext.CreateFormData</x-search>

Создает новый экземпляр [FormData], который используется для предоставления данных формы и multipart данных при выполнении HTTP-запросов.

**Использование**

```csharp
ApiRequestContext.CreateFormData
```

**Возвращает**
- [FormData]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-create-form-data-return"/><a href="#api-request-context-create-form-data-return" class="list-anchor">#</a>

---

### DeleteAsync {#api-request-context-delete}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.16</font><x-search>apiRequestContext.DeleteAsync</x-search>

Отправляет HTTP(S) запрос [DELETE](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/DELETE) и возвращает его ответ. Метод заполнит cookies запроса из контекста и обновит cookies контекста из ответа. Метод автоматически следует за перенаправлениями.

**Использование**

```csharp
await ApiRequestContext.DeleteAsync(url, options);
```

**Аргументы**
- `url` [string]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-url"/><a href="#api-request-context-delete-option-url" class="list-anchor">#</a>
  
  Целевой URL.
- `options` `ApiRequestContextDeleteOptions?` *(опционально)*
  - `Data|DataByte|DataObject` [string]? | [byte]&#91;&#93;? | [object]? *(опционально)* <font size="2">Добавлено в: v1.17</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-data"/><a href="#api-request-context-delete-option-data" class="list-anchor">#</a>
    
    Позволяет установить данные запроса. Если параметр данных является объектом, он будет сериализован в строку json, и заголовок `content-type` будет установлен в `application/json`, если не установлен явно. В противном случае заголовок `content-type` будет установлен в `application/octet-stream`, если не установлен явно.
  - `FailOnStatusCode` [bool]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-fail-on-status-code"/><a href="#api-request-context-delete-option-fail-on-status-code" class="list-anchor">#</a>
    
    Следует ли выбрасывать исключение при кодах ответа, отличных от 2xx и 3xx. По умолчанию объект ответа возвращается для всех кодов состояния.
  - `Form` [FormData]? *(опционально)* <font size="2">Добавлено в: v1.17</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-form"/><a href="#api-request-context-delete-option-form" class="list-anchor">#</a>
    
    Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `application/x-www-form-urlencoded` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `application/x-www-form-urlencoded`, если не указан явно.
    
    Экземпляр [FormData] можно создать через [ApiRequestContext.CreateFormData](/api/class-apirequestcontext.mdx#api-request-context-create-form-data).
  - `Headers` [IDictionary]?&lt;[string], [string]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-headers"/><a href="#api-request-context-delete-option-headers" class="list-anchor">#</a>
    
    Позволяет установить HTTP-заголовки. Эти заголовки будут применяться к запрашиваемому запросу, а также к любым перенаправлениям, инициированным им.
  - `IgnoreHTTPSErrors` [bool]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-ignore-https-errors"/><a href="#api-request-context-delete-option-ignore-https-errors" class="list-anchor">#</a>
    
    Следует ли игнорировать ошибки HTTPS при отправке сетевых запросов. По умолчанию `false`.
  - `MaxRedirects` [int]? *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-max-redirects"/><a href="#api-request-context-delete-option-max-redirects" class="list-anchor">#</a>
    
    Максимальное количество перенаправлений запроса, которые будут автоматически следоваться. Ошибка будет выброшена, если количество превышено. По умолчанию `20`. Передайте `0`, чтобы не следовать за перенаправлениями.
  - `MaxRetries` [int]? *(опционально)* <font size="2">Добавлено в: v1.46</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-max-retries"/><a href="#api-request-context-delete-option-max-retries" class="list-anchor">#</a>
    
    Максимальное количество раз, когда сетевые ошибки должны быть повторены. В настоящее время повторяется только ошибка `ECONNRESET`. Не повторяет на основе кодов ответа HTTP. Ошибка будет выброшена, если лимит превышен. По умолчанию `0` - без повторов.
  - `Multipart` [FormData]? *(опционально)* <font size="2">Добавлено в: v1.17</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-multipart"/><a href="#api-request-context-delete-option-multipart" class="list-anchor">#</a>
    
    Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `multipart/form-data` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `multipart/form-data`, если не указан явно. Значения файлов могут быть переданы как объект, похожий на файл, содержащий имя файла, mime-тип и его содержимое.
    
    Экземпляр [FormData] можно создать через [ApiRequestContext.CreateFormData](/api/class-apirequestcontext.mdx#api-request-context-create-form-data).
  - `Params` [IDictionary]?&lt;[string], [object]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-params"/><a href="#api-request-context-delete-option-params" class="list-anchor">#</a>
    
    Параметры запроса, которые будут отправлены с URL.
  - `ParamsString` [string]? *(опционально)* <font size="2">Добавлено в: v1.47</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-params-string"/><a href="#api-request-context-delete-option-params-string" class="list-anchor">#</a>
    
    Параметры запроса, которые будут отправлены с URL.
  - `Timeout` [float]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-timeout"/><a href="#api-request-context-delete-option-timeout" class="list-anchor">#</a>
    
    Тайм-аут запроса в миллисекундах. По умолчанию `30000` (30 секунд). Передайте `0`, чтобы отключить тайм-аут.

**Возвращает**
- [APIResponse]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-return"/><a href="#api-request-context-delete-return" class="list-anchor">#</a>

---

### DisposeAsync {#api-request-context-dispose}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.16</font><x-search>apiRequestContext.DisposeAsync</x-search>

Все ответы, возвращаемые [ApiRequestContext.GetAsync()](/api/class-apirequestcontext.mdx#api-request-context-get) и аналогичными методами, хранятся в памяти, чтобы вы могли позже вызвать [ApiResponse.BodyAsync()](/api/class-apiresponse.mdx#api-response-body). Этот метод освобождает все свои ресурсы, вызов любого метода на освобожденном [APIRequestContext] вызовет исключение.

**Использование**

```csharp
await ApiRequestContext.DisposeAsync(options);
```

**Аргументы**
- `options` `ApiRequestContextDisposeOptions?` *(опционально)*
  - `Reason` [string]? *(опционально)* <font size="2">Добавлено в: v1.45</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-dispose-option-reason"/><a href="#api-request-context-dispose-option-reason" class="list-anchor">#</a>
    
    Причина, которая будет сообщена операциям, прерванным из-за освобождения контекста.

**Возвращает**
- [void]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-dispose-return"/><a href="#api-request-context-dispose-return" class="list-anchor">#</a>

---

### FetchAsync {#api-request-context-fetch}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.16</font><x-search>apiRequestContext.FetchAsync</x-search>

Отправляет HTTP(S) запрос и возвращает его ответ. Метод заполнит cookies запроса из контекста и обновит cookies контекста из ответа. Метод автоматически следует за перенаправлениями.

**Использование**

JSON-объекты могут быть переданы напрямую в запрос:

```csharp
var data = new Dictionary<string, object>() {
  { "title", "Book Title" },
  { "body", "John Doe" }
};
await Request.FetchAsync("https://example.com/api/createBook", new() { Method = "post", DataObject = data });
```

Обычный способ отправки файла(ов) в теле запроса - загрузить их как поля формы с кодировкой `multipart/form-data`, указав параметр `multipart`:

```csharp
var file = new FilePayload()
{
    Name = "f.js",
    MimeType = "text/javascript",
    Buffer = System.Text.Encoding.UTF8.GetBytes("console.log(2022);")
};
var multipart = Context.APIRequest.CreateFormData();
multipart.Set("fileField", file);
await Request.FetchAsync("https://example.com/api/uploadScript", new() { Method = "post", Multipart = multipart });
```

**Аргументы**
- `urlOrRequest` [string] | [Request]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-url-or-request"/><a href="#api-request-context-fetch-option-url-or-request" class="list-anchor">#</a>
  
  Целевой URL или запрос, из которого будут получены все параметры.
- `options` `ApiRequestContextFetchOptions?` *(опционально)*
  - `Data|DataByte|DataObject` [string]? | [byte]&#91;&#93;? | [object]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-data"/><a href="#api-request-context-fetch-option-data" class="list-anchor">#</a>
    
    Позволяет установить данные запроса. Если параметр данных является объектом, он будет сериализован в строку json, и заголовок `content-type` будет установлен в `application/json`, если не установлен явно. В противном случае заголовок `content-type` будет установлен в `application/octet-stream`, если не установлен явно.
  - `FailOnStatusCode` [bool]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-fail-on-status-code"/><a href="#api-request-context-fetch-option-fail-on-status-code" class="list-anchor">#</a>
    
    Следует ли выбрасывать исключение при кодах ответа, отличных от 2xx и 3xx. По умолчанию объект ответа возвращается для всех кодов состояния.
  - `Form` [FormData]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-form"/><a href="#api-request-context-fetch-option-form" class="list-anchor">#</a>
    
    Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `application/x-www-form-urlencoded` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `application/x-www-form-urlencoded`, если не указан явно.
    
    Экземпляр [FormData] можно создать через [ApiRequestContext.CreateFormData](/api/class-apirequestcontext.mdx#api-request-context-create-form-data).
  - `Headers` [IDictionary]?&lt;[string], [string]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-headers"/><a href="#api-request-context-fetch-option-headers" class="list-anchor">#</a>
    
    Позволяет установить HTTP-заголовки. Эти заголовки будут применяться к запрашиваемому запросу, а также к любым перенаправлениям, инициированным им.
  - `IgnoreHTTPSErrors` [bool]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-ignore-https-errors"/><a href="#api-request-context-fetch-option-ignore-https-errors" class="list-anchor">#</a>
    
    Следует ли игнорировать ошибки HTTPS при отправке сетевых запросов. По умолчанию `false`.
  - `MaxRedirects` [int]? *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-max-redirects"/><a href="#api-request-context-fetch-option-max-redirects" class="list-anchor">#</a>
    
    Максимальное количество перенаправлений запроса, которые будут автоматически следоваться. Ошибка будет выброшена, если количество превышено. По умолчанию `20`. Передайте `0`, чтобы не следовать за перенаправлениями.
  - `MaxRetries` [int]? *(опционально)* <font size="2">Добавлено в: v1.46</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-max-retries"/><a href="#api-request-context-fetch-option-max-retries" class="list-anchor">#</a>
    
    Максимальное количество раз, когда сетевые ошибки должны быть повторены. В настоящее время повторяется только ошибка `ECONNRESET`. Не повторяет на основе кодов ответа HTTP. Ошибка будет выброшена, если лимит превышен. По умолчанию `0` - без повторов.
  - `Method` [string]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-method"/><a href="#api-request-context-fetch-option-method" class="list-anchor">#</a>
    
    Если установлено, изменяет метод запроса (например, [PUT](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/PUT) или [POST](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST)). Если не указано, используется метод GET.
  - `Multipart` [FormData]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-multipart"/><a href="#api-request-context-fetch-option-multipart" class="list-anchor">#</a>
    
    Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `multipart/form-data` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `multipart/form-data`, если не указан явно. Значения файлов могут быть переданы как объект, похожий на файл, содержащий имя файла, mime-тип и его содержимое.
    
    Экземпляр [FormData] можно создать через [ApiRequestContext.CreateFormData](/api/class-apirequestcontext.mdx#api-request-context-create-form-data).
  - `Params` [IDictionary]?&lt;[string], [object]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-params"/><a href="#api-request-context-fetch-option-params" class="list-anchor">#</a>
    
    Параметры запроса, которые будут отправлены с URL.
  - `ParamsString` [string]? *(опционально)* <font size="2">Добавлено в: v1.47</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-params-string"/><a href="#api-request-context-fetch-option-params-string" class="list-anchor">#</a>
    
    Параметры запроса, которые будут отправлены с URL.
  - `Timeout` [float]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-timeout"/><a href="#api-request-context-fetch-option-timeout" class="list-anchor">#</a>
    
    Тайм-аут запроса в миллисекундах. По умолчанию `30000` (30 секунд). Передайте `0`, чтобы отключить тайм-аут.

**Возвращает**
- [APIResponse]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-return"/><a href="#api-request-context-fetch-return" class="list-anchor">#</a>

---

### GetAsync {#api-request-context-get}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.16</font><x-search>apiRequestContext.GetAsync</x-search>

Отправляет HTTP(S) запрос [GET](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/GET) и возвращает его ответ. Метод заполнит cookies запроса из контекста и обновит cookies контекста из ответа. Метод автоматически следует за перенаправлениями.

**Использование**

Параметры запроса могут быть настроены с помощью опции `params`, они будут сериализованы в параметры поиска URL:

```csharp
var queryParams = new Dictionary<string, object>()
{
  { "isbn", "1234" },
  { "page", 23 },
};
await request.GetAsync("https://example.com/api/getText", new() { Params = queryParams });
```

**Аргументы**
- `url` [string]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-url"/><a href="#api-request-context-get-option-url" class="list-anchor">#</a>
  
  Целевой URL.
- `options` `ApiRequestContextGetOptions?` *(опционально)*
  - `Data|DataByte|DataObject` [string]? | [byte]&#91;&#93;? | [object]? *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-data"/><a href="#api-request-context-get-option-data" class="list-anchor">#</a>
    
    Позволяет установить данные запроса. Если параметр данных является объектом, он будет сериализован в строку json, и заголовок `content-type` будет установлен в `application/json`, если не установлен явно. В противном случае заголовок `content-type` будет установлен в `application/octet-stream`, если не установлен явно.
  - `FailOnStatusCode` [bool]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-fail-on-status-code"/><a href="#api-request-context-get-option-fail-on-status-code" class="list-anchor">#</a>
    
    Следует ли выбрасывать исключение при кодах ответа, отличных от 2xx и 3xx. По умолчанию объект ответа возвращается для всех кодов состояния.
  - `Form` [FormData]? *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-form"/><a href="#api-request-context-get-option-form" class="list-anchor">#</a>
    
    Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `application/x-www-form-urlencoded` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `application/x-www-form-urlencoded`, если не указан явно.
    
    Экземпляр [FormData] можно создать через [ApiRequestContext.CreateFormData](/api/class-apirequestcontext.mdx#api-request-context-create-form-data).
  - `Headers` [IDictionary]?&lt;[string], [string]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-headers"/><a href="#api-request-context-get-option-headers" class="list-anchor">#</a>
    
    Позволяет установить HTTP-заголовки. Эти заголовки будут применяться к запрашиваемому запросу, а также к любым перенаправлениям, инициированным им.
  - `IgnoreHTTPSErrors` [bool]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-ignore-https-errors"/><a href="#api-request-context-get-option-ignore-https-errors" class="list-anchor">#</a>
    
    Следует ли игнорировать ошибки HTTPS при отправке сетевых запросов. По умолчанию `false`.
  - `MaxRedirects` [int]? *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-max-redirects"/><a href="#api-request-context-get-option-max-redirects" class="list-anchor">#</a>
    
    Максимальное количество перенаправлений запроса, которые будут автоматически следоваться. Ошибка будет выброшена, если количество превышено. По умолчанию `20`. Передайте `0`, чтобы не следовать за перенаправлениями.
  - `MaxRetries` [int]? *(опционально)* <font size="2">Добавлено в: v1.46</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-max-retries"/><a href="#api-request-context-get-option-max-retries" class="list-anchor">#</a>
    
    Максимальное количество раз, когда сетевые ошибки должны быть повторены. В настоящее время повторяется только ошибка `ECONNRESET`. Не повторяет на основе кодов ответа HTTP. Ошибка будет выброшена, если лимит превышен. По умолчанию `0` - без повторов.
  - `Multipart` [FormData]? *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-multipart"/><a href="#api-request-context-get-option-multipart" class="list-anchor">#</a>
    
    Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `multipart/form-data` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `multipart/form-data`, если не указан явно. Значения файлов могут быть переданы как объект, похожий на файл, содержащий имя файла, mime-тип и его содержимое.
    
    Экземпляр [FormData] можно создать через [ApiRequestContext.CreateFormData](/api/class-apirequestcontext.mdx#api-request-context-create-form-data).
  - `Params` [IDictionary]?&lt;[string], [object]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-params"/><a href="#api-request-context-get-option-params" class="list-anchor">#</a>
    
    Параметры запроса, которые будут отправлены с URL.
  - `ParamsString` [string]? *(опционально)* <font size="2">Добавлено в: v1.47</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-params-string"/><a href="#api-request-context-get-option-params-string" class="list-anchor">#</a>
    
    Параметры запроса, которые будут отправлены с URL.
  - `Timeout` [float]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-timeout"/><a href="#api-request-context-get-option-timeout" class="list-anchor">#</a>
    
    Тайм-аут запроса в миллисекундах. По умолчанию `30000` (30 секунд). Передайте `0`, чтобы отключить тайм-аут.

**Возвращает**
- [APIResponse]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-return"/><a href="#api-request-context-get-return" class="list-anchor">#</a>

---

### HeadAsync {#api-request-context-head}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.16</font><x-search>apiRequestContext.HeadAsync</x-search>

Отправляет HTTP(S) запрос [HEAD](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/HEAD) и возвращает его ответ. Метод заполнит cookies запроса из контекста и обновит cookies контекста из ответа. Метод автоматически следует за перенаправлениями.

**Использование**

```csharp
await ApiRequestContext.HeadAsync(url, options);
```

**Аргументы**
- `url` [string]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-url"/><a href="#api-request-context-head-option-url" class="list-anchor">#</a>
  
  Целевой URL.
- `options` `ApiRequestContextHeadOptions?` *(опционально)*
  - `Data|DataByte|DataObject` [string]? | [byte]&#91;&#93;? | [object]? *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-data"/><a href="#api-request-context-head-option-data" class="list-anchor">#</a>
    
    Позволяет установить данные запроса. Если параметр данных является объектом, он будет сериализован в строку json, и заголовок `content-type` будет установлен в `application/json`, если не установлен явно. В противном случае заголовок `content-type` будет установлен в `application/octet-stream`, если не установлен явно.
  - `FailOnStatusCode` [bool]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-fail-on-status-code"/><a href="#api-request-context-head-option-fail-on-status-code" class="list-anchor">#</a>
    
    Следует ли выбрасывать исключение при кодах ответа, отличных от 2xx и 3xx. По умолчанию объект ответа возвращается для всех кодов состояния.
  - `Form` [FormData]? *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-form"/><a href="#api-request-context-head-option-form" class="list-anchor">#</a>
    
    Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `application/x-www-form-urlencoded` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `application/x-www-form-urlencoded`, если не указан явно.
    
    Экземпляр [FormData] можно создать через [ApiRequestContext.CreateFormData](/api/class-apirequestcontext.mdx#api-request-context-create-form-data).
  - `Headers` [IDictionary]?&lt;[string], [string]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-headers"/><a href="#api-request-context-head-option-headers" class="list-anchor">#</a>
    
    Позволяет установить HTTP-заголовки. Эти заголовки будут применяться к запрашиваемому запросу, а также к любым перенаправлениям, инициированным им.
  - `IgnoreHTTPSErrors` [bool]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-ignore-https-errors"/><a href="#api-request-context-head-option-ignore-https-errors" class="list-anchor">#</a>
    
    Следует ли игнорировать ошибки HTTPS при отправке сетевых запросов. По умолчанию `false`.
  - `MaxRedirects` [int]? *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-max-redirects"/><a href="#api-request-context-head-option-max-redirects" class="list-anchor">#</a>
    
    Максимальное количество перенаправлений запроса, которые будут автоматически следоваться. Ошибка будет выброшена, если количество превышено. По умолчанию `20`. Передайте `0`, чтобы не следовать за перенаправлениями.
  - `MaxRetries` [int]? *(опционально)* <font size="2">Добавлено в: v1.46</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-max-retries"/><a href="#api-request-context-head-option-max-retries" class="list-anchor">#</a>
    
    Максимальное количество раз, когда сетевые ошибки должны быть повторены. В настоящее время повторяется только ошибка `ECONNRESET`. Не повторяет на основе кодов ответа HTTP. Ошибка будет выброшена, если лимит превышен. По умолчанию `0` - без повторов.
  - `Multipart` [FormData]? *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-multipart"/><a href="#api-request-context-head-option-multipart" class="list-anchor">#</a>
    
    Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `multipart/form-data` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `multipart/form-data`, если не указан явно. Значения файлов могут быть переданы как объект, похожий на файл, содержащий имя файла, mime-тип и его содержимое.
    
    Экземпляр [FormData] можно создать через [ApiRequestContext.CreateFormData](/api/class-apirequestcontext.mdx#api-request-context-create-form-data).
  - `Params` [IDictionary]?&lt;[string], [object]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-params"/><a href="#api-request-context-head-option-params" class="list-anchor">#</a>
    
    Параметры запроса, которые будут отправлены с URL.
  - `ParamsString` [string]? *(опционально)* <font size="2">Добавлено в: v1.47</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-params-string"/><a href="#api-request-context-head-option-params-string" class="list-anchor">#</a>
    
    Параметры запроса, которые будут отправлены с URL.
  - `Timeout` [float]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-timeout"/><a href="#api-request-context-head-option-timeout" class="list-anchor">#</a>
    
    Тайм-аут запроса в миллисекундах. По умолчанию `30000` (30 секунд). Передайте `0`, чтобы отключить тайм-аут.

**Возвращает**
- [APIResponse]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-return"/><a href="#api-request-context-head-return" class="list-anchor">#</a>

---

### PatchAsync {#api-request-context-patch}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.16</font><x-search>apiRequestContext.PatchAsync</x-search>

Отправляет HTTP(S) запрос [PATCH](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/PATCH) и возвращает его ответ. Метод заполнит cookies запроса из контекста и обновит cookies контекста из ответа. Метод автоматически следует за перенаправлениями.

**Использование**

```csharp
await ApiRequestContext.PatchAsync(url, options);
```

**Аргументы**
- `url` [string]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-url"/><a href="#api-request-context-patch-option-url" class="list-anchor">#</a>
  
  Целевой URL.
- `options` `ApiRequestContextPatchOptions?` *(опционально)*
  - `Data|DataByte|DataObject` [string]? | [byte]&#91;&#93;? | [object]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-data"/><a href="#api-request-context-patch-option-data" class="list-anchor">#</a>
    
    Позволяет установить данные запроса. Если параметр данных является объектом, он будет сериализован в строку json, и заголовок `content-type` будет установлен в `application/json`, если не установлен явно. В противном случае заголовок `content-type` будет установлен в `application/octet-stream`, если не установлен явно.
  - `FailOnStatusCode` [bool]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-fail-on-status-code"/><a href="#api-request-context-patch-option-fail-on-status-code" class="list-anchor">#</a>
    
    Следует ли выбрасывать исключение при кодах ответа, отличных от 2xx и 3xx. По умолчанию объект ответа возвращается для всех кодов состояния.
  - `Form` [FormData]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-form"/><a href="#api-request-context-patch-option-form" class="list-anchor">#</a>
    
    Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `application/x-www-form-urlencoded` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `application/x-www-form-urlencoded`, если не указан явно.
    
    Экземпляр [FormData] можно создать через [ApiRequestContext.CreateFormData](/api/class-apirequestcontext.mdx#api-request-context-create-form-data).
  - `Headers` [IDictionary]?&lt;[string], [string]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-headers"/><a href="#api-request-context-patch-option-headers" class="list-anchor">#</a>
    
    Позволяет установить HTTP-заголовки. Эти заголовки будут применяться к запрашиваемому запросу, а также к любым перенаправлениям, инициированным им.
  - `IgnoreHTTPSErrors` [bool]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-ignore-https-errors"/><a href="#api-request-context-patch-option-ignore-https-errors" class="list-anchor">#</a>
    
    Следует ли игнорировать ошибки HTTPS при отправке сетевых запросов. По умолчанию `false`.
  - `MaxRedirects` [int]? *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-max-redirects"/><a href="#api-request-context-patch-option-max-redirects" class="list-anchor">#</a>
    
    Максимальное количество перенаправлений запроса, которые будут автоматически следоваться. Ошибка будет выброшена, если количество превышено. По умолчанию `20`. Передайте `0`, чтобы не следовать за перенаправлениями.
  - `MaxRetries` [int]? *(опционально)* <font size="2">Добавлено в: v1.46</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-max-retries"/><a href="#api-request-context-patch-option-max-retries" class="list-anchor">#</a>
    
    Максимальное количество раз, когда сетевые ошибки должны быть повторены. В настоящее время повторяется только ошибка `ECONNRESET`. Не повторяет на основе кодов ответа HTTP. Ошибка будет выброшена, если лимит превышен. По умолчанию `0` - без повторов.
  - `Multipart` [FormData]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-multipart"/><a href="#api-request-context-patch-option-multipart" class="list-anchor">#</a>
    
    Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `multipart/form-data` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `multipart/form-data`, если не указан явно. Значения файлов могут быть переданы как объект, похожий на файл, содержащий имя файла, mime-тип и его содержимое.
    
    Экземпляр [FormData] можно создать через [ApiRequestContext.CreateFormData](/api/class-apirequestcontext.mdx#api-request-context-create-form-data).
  - `Params` [IDictionary]?&lt;[string], [object]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-params"/><a href="#api-request-context-patch-option-params" class="list-anchor">#</a>
    
    Параметры запроса, которые будут отправлены с URL.
  - `ParamsString` [string]? *(опционально)* <font size="2">Добавлено в: v1.47</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-params-string"/><a href="#api-request-context-patch-option-params-string" class="list-anchor">#</a>
    
    Параметры запроса, которые будут отправлены с URL.
  - `Timeout` [float]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-timeout"/><a href="#api-request-context-patch-option-timeout" class="list-anchor">#</a>
    
    Тайм-аут запроса в миллисекундах. По умолчанию `30000` (30 секунд). Передайте `0`, чтобы отключить тайм-аут.

**Возвращает**
- [APIResponse]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-return"/><a href="#api-request-context-patch-return" class="list-anchor">#</a>

---

### PostAsync {#api-request-context-post}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.16</font><x-search>apiRequestContext.PostAsync</x-search>

Отправляет HTTP(S) запрос [POST](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST) и возвращает его ответ. Метод заполнит cookies запроса из контекста и обновит cookies контекста из ответа. Метод автоматически следует за перенаправлениями.

**Использование**

JSON-объекты могут быть переданы напрямую в запрос:

```csharp
var data = new Dictionary<string, object>() {
  { "firstName", "John" },
  { "lastName", "Doe" }
};
await request.PostAsync("https://example.com/api/createBook", new() { DataObject = data });
```

Чтобы отправить данные формы на сервер, используйте опцию `form`. Ее значение будет закодировано в теле запроса с использованием кодировки `application/x-www-form-urlencoded` (см. ниже, как использовать кодировку формы `multipart/form-data` для отправки файлов):

```csharp
var formData = Context.APIRequest.CreateFormData();
formData.Set("title", "Book Title");
formData.Set("body", "John Doe");
await request.PostAsync("https://example.com/api/findBook", new() { Form = formData });
```

Обычный способ отправки файла(ов) в теле запроса - загрузить их как поля формы с кодировкой `multipart/form-data`. Используйте [FormData] для создания тела запроса и передайте его в запрос как параметр `multipart`:

```csharp
var file = new FilePayload()
{
    Name = "f.js",
    MimeType = "text/javascript",
    Buffer = System.Text.Encoding.UTF8.GetBytes("console.log(2022);")
};
var multipart = Context.APIRequest.CreateFormData();
multipart.Set("fileField", file);
await request.PostAsync("https://example.com/api/uploadScript", new() { Multipart = multipart });
```

**Аргументы**
- `url` [string]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-url"/><a href="#api-request-context-post-option-url" class="list-anchor">#</a>
  
  Целевой URL.
- `options` `ApiRequestContextPostOptions?` *(опционально)*
  - `Data|DataByte|DataObject` [string]? | [byte]&#91;&#93;? | [object]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-data"/><a href="#api-request-context-post-option-data" class="list-anchor">#</a>
    
    Позволяет установить данные запроса. Если параметр данных является объектом, он будет сериализован в строку json, и заголовок `content-type` будет установлен в `application/json`, если не установлен явно. В противном случае заголовок `content-type` будет установлен в `application/octet-stream`, если не установлен явно.
  - `FailOnStatusCode` [bool]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-fail-on-status-code"/><a href="#api-request-context-post-option-fail-on-status-code" class="list-anchor">#</a>
    
    Следует ли выбрасывать исключение при кодах ответа, отличных от 2xx и 3xx. По умолчанию объект ответа возвращается для всех кодов состояния.
  - `Form` [FormData]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-form"/><a href="#api-request-context-post-option-form" class="list-anchor">#</a>
    
    Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `application/x-www-form-urlencoded` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `application/x-www-form-urlencoded`, если не указан явно.
    
    Экземпляр [FormData] можно создать через [ApiRequestContext.CreateFormData](/api/class-apirequestcontext.mdx#api-request-context-create-form-data).
  - `Headers` [IDictionary]?&lt;[string], [string]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-headers"/><a href="#api-request-context-post-option-headers" class="list-anchor">#</a>
    
    Позволяет установить HTTP-заголовки. Эти заголовки будут применяться к запрашиваемому запросу, а также к любым перенаправлениям, инициированным им.
  - `IgnoreHTTPSErrors` [bool]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-ignore-https-errors"/><a href="#api-request-context-post-option-ignore-https-errors" class="list-anchor">#</a>
    
    Следует ли игнорировать ошибки HTTPS при отправке сетевых запросов. По умолчанию `false`.
  - `MaxRedirects` [int]? *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-max-redirects"/><a href="#api-request-context-post-option-max-redirects" class="list-anchor">#</a>
    
    Максимальное количество перенаправлений запроса, которые будут автоматически следоваться. Ошибка будет выброшена, если количество превышено. По умолчанию `20`. Передайте `0`, чтобы не следовать за перенаправлениями.
  - `MaxRetries` [int]? *(опционально)* <font size="2">Добавлено в: v1.46</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-max-retries"/><a href="#api-request-context-post-option-max-retries" class="list-anchor">#</a>
    
    Максимальное количество раз, когда сетевые ошибки должны быть повторены. В настоящее время повторяется только ошибка `ECONNRESET`. Не повторяет на основе кодов ответа HTTP. Ошибка будет выброшена, если лимит превышен. По умолчанию `0` - без повторов.
  - `Multipart` [FormData]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-multipart"/><a href="#api-request-context-post-option-multipart" class="list-anchor">#</a>
    
    Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `multipart/form-data` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `multipart/form-data`, если не указан явно. Значения файлов могут быть переданы как объект, похожий на файл, содержащий имя файла, mime-тип и его содержимое.
    
    Экземпляр [FormData] можно создать через [ApiRequestContext.CreateFormData](/api/class-apirequestcontext.mdx#api-request-context-create-form-data).
  - `Params` [IDictionary]?&lt;[string], [object]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-params"/><a href="#api-request-context-post-option-params" class="list-anchor">#</a>
    
    Параметры запроса, которые будут отправлены с URL.
  - `ParamsString` [string]? *(опционально)* <font size="2">Добавлено в: v1.47</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-params-string"/><a href="#api-request-context-post-option-params-string" class="list-anchor">#</a>
    
    Параметры запроса, которые будут отправлены с URL.
  - `Timeout` [float]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-timeout"/><a href="#api-request-context-post-option-timeout" class="list-anchor">#</a>
    
    Тайм-аут запроса в миллисекундах. По умолчанию `30000` (30 секунд). Передайте `0`, чтобы отключить тайм-аут.

**Возвращает**
- [APIResponse]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-return"/><a href="#api-request-context-post-return" class="list-anchor">#</a>

---

### PutAsync {#api-request-context-put}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.16</font><x-search>apiRequestContext.PutAsync</x-search>

Отправляет HTTP(S) запрос [PUT](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/PUT) и возвращает его ответ. Метод заполнит cookies запроса из контекста и обновит cookies контекста из ответа. Метод автоматически следует за перенаправлениями.

**Использование**

```csharp
await ApiRequestContext.PutAsync(url, options);
```

**Аргументы**
- `url` [string]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-url"/><a href="#api-request-context-put-option-url" class="list-anchor">#</a>
  
  Целевой URL.
- `options` `ApiRequestContextPutOptions?` *(опционально)*
  - `Data|DataByte|DataObject` [string]? | [byte]&#91;&#93;? | [object]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-data"/><a href="#api-request-context-put-option-data" class="list-anchor">#</a>
    
    Позволяет установить данные запроса. Если параметр данных является объектом, он будет сериализован в строку json, и заголовок `content-type` будет установлен в `application/json`, если не установлен явно. В противном случае заголовок `content-type` будет установлен в `application/octet-stream`, если не установлен явно.
  - `FailOnStatusCode` [bool]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-fail-on-status-code"/><a href="#api-request-context-put-option-fail-on-status-code" class="list-anchor">#</a>
    
    Следует ли выбрасывать исключение при кодах ответа, отличных от 2xx и 3xx. По умолчанию объект ответа возвращается для всех кодов состояния.
  - `Form` [FormData]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-form"/><a href="#api-request-context-put-option-form" class="list-anchor">#</a>
    
    Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `application/x-www-form-urlencoded` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `application/x-www-form-urlencoded`, если не указан явно.
    
    Экземпляр [FormData] можно создать через [ApiRequestContext.CreateFormData](/api/class-apirequestcontext.mdx#api-request-context-create-form-data).
  - `Headers` [IDictionary]?&lt;[string], [string]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-headers"/><a href="#api-request-context-put-option-headers" class="list-anchor">#</a>
    
    Позволяет установить HTTP-заголовки. Эти заголовки будут применяться к запрашиваемому запросу, а также к любым перенаправлениям, инициированным им.
  - `IgnoreHTTPSErrors` [bool]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-ignore-https-errors"/><a href="#api-request-context-put-option-ignore-https-errors" class="list-anchor">#</a>
    
    Следует ли игнорировать ошибки HTTPS при отправке сетевых запросов. По умолчанию `false`.
  - `MaxRedirects` [int]? *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-max-redirects"/><a href="#api-request-context-put-option-max-redirects" class="list-anchor">#</a>
    
    Максимальное количество перенаправлений запроса, которые будут автоматически следоваться. Ошибка будет выброшена, если количество превышено. По умолчанию `20`. Передайте `0`, чтобы не следовать за перенаправлениями.
  - `MaxRetries` [int]? *(опционально)* <font size="2">Добавлено в: v1.46</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-max-retries"/><a href="#api-request-context-put-option-max-retries" class="list-anchor">#</a>
    
    Максимальное количество раз, когда сетевые ошибки должны быть повторены. В настоящее время повторяется только ошибка `ECONNRESET`. Не повторяет на основе кодов ответа HTTP. Ошибка будет выброшена, если лимит превышен. По умолчанию `0` - без повторов.
  - `Multipart` [FormData]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-multipart"/><a href="#api-request-context-put-option-multipart" class="list-anchor">#</a>
    
    Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `multipart/form-data` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `multipart/form-data`, если не указан явно. Значения файлов могут быть переданы как объект, похожий на файл, содержащий имя файла, mime-тип и его содержимое.
    
    Экземпляр [FormData] можно создать через [ApiRequestContext.CreateFormData](/api/class-apirequestcontext.mdx#api-request-context-create-form-data).
  - `Params` [IDictionary]?&lt;[string], [object]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-params"/><a href="#api-request-context-put-option-params" class="list-anchor">#</a>
    
    Параметры запроса, которые будут отправлены с URL.
  - `ParamsString` [string]? *(опционально)* <font size="2">Добавлено в: v1.47</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-params-string"/><a href="#api-request-context-put-option-params-string" class="list-anchor">#</a>
    
    Параметры запроса, которые будут отправлены с URL.
  - `Timeout` [float]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-timeout"/><a href="#api-request-context-put-option-timeout" class="list-anchor">#</a>
    
    Тайм-аут запроса в миллисекундах. По умолчанию `30000` (30 секунд). Передайте `0`, чтобы отключить тайм-аут.

**Возвращает**
- [APIResponse]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-return"/><a href="#api-request-context-put-return" class="list-anchor">#</a>

---

### StorageStateAsync {#api-request-context-storage-state}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.16</font><x-search>apiRequestContext.StorageStateAsync</x-search>

Возвращает состояние хранилища для этого контекста запроса, содержит текущие cookies и снимок локального хранилища, если он был передан в конструктор.

**Использование**

```csharp
await ApiRequestContext.StorageStateAsync(options);
```

**Аргументы**
- `options` `ApiRequestContextStorageStateOptions?` *(опционально)*
  - `IndexedDB` [bool]? *(опционально)* <font size="2">Добавлено в: v1.51</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-storage-state-option-indexed-db"/><a href="#api-request-context-storage-state-option-indexed-db" class="list-anchor">#</a>
    
    Установите в `true`, чтобы включить IndexedDB в снимок состояния хранилища.
  - `Path` [string]? *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-storage-state-option-path"/><a href="#api-request-context-storage-state-option-path" class="list-anchor">#</a>
    
    Путь к файлу для сохранения состояния хранилища. Если [Path](/api/class-apirequestcontext.mdx#api-request-context-storage-state-option-path) является относительным путем, то он разрешается относительно текущей рабочей директории. Если путь не указан, состояние хранилища все равно возвращается, но не будет сохранено на диск.

**Возвращает**
- [string]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-storage-state-return"/><a href="#api-request-context-storage-state-return" class="list-anchor">#</a>


[APIRequest]: /api/class-apirequest.mdx "APIRequest"
[APIRequestContext]: /api/class-apirequestcontext.mdx "APIRequestContext"
[APIResponse]: /api/class-apiresponse.mdx "APIResponse"
[APIResponseAssertions]: /api/class-apiresponseassertions.mdx "APIResponseAssertions"
[Browser]: /api/class-browser.mdx "Browser"
[BrowserContext]: /api/class-browsercontext.mdx "BrowserContext"
[BrowserType]: /api/class-browsertype.mdx "BrowserType"
[CDPSession]: /api/class-cdpsession.mdx "CDPSession"
[CDPSessionEvent]: /api/class-cdpsessionevent.mdx "CDPSessionEvent"
[Clock]: /api/class-clock.mdx "Clock"
[ConsoleMessage]: /api/class-consolemessage.mdx "ConsoleMessage"
[Dialog]: /api/class-dialog.mdx "Dialog"
[Download]: /api/class-download.mdx "Download"
[ElementHandle]: /api/class-elementhandle.mdx "ElementHandle"
[FileChooser]: /api/class-filechooser.mdx "FileChooser"
[FormData]: /api/class-formdata.mdx "FormData"
[Frame]: /api/class-frame.mdx "Frame"
[FrameLocator]: /api/class-framelocator.mdx "FrameLocator"
[JSHandle]: /api/class-jshandle.mdx "JSHandle"
[Keyboard]: /api/class-keyboard.mdx "Keyboard"
[Locator]: /api/class-locator.mdx "Locator"
[LocatorAssertions]: /api/class-locatorassertions.mdx "LocatorAssertions"
[Mouse]: /api/class-mouse.mdx "Mouse"
[Page]: /api/class-page.mdx "Page"
[PageAssertions]: /api/class-pageassertions.mdx "PageAssertions"
[Playwright]: /api/class-playwright.mdx "Playwright"
[PlaywrightAssertions]: /api/class-playwrightassertions.mdx "PlaywrightAssertions"
[Request]: /api/class-request.mdx "Request"
[Response]: /api/class-response.mdx "Response"
[Route]: /api/class-route.mdx "Route"
[Selectors]: /api/class-selectors.mdx "Selectors"
[TimeoutError]: /api/class-timeouterror.mdx "TimeoutError"
[Touchscreen]: /api/class-touchscreen.mdx "Touchscreen"
[Tracing]: /api/class-tracing.mdx "Tracing"
[Video]: /api/class-video.mdx "Video"
[WebError]: /api/class-weberror.mdx "WebError"
[WebSocket]: /api/class-websocket.mdx "WebSocket"
[WebSocketFrame]: /api/class-websocketframe.mdx "WebSocketFrame"
[WebSocketRoute]: /api/class-websocketroute.mdx "WebSocketRoute"
[Worker]: /api/class-worker.mdx "Worker"
[Element]: https://developer.mozilla.org/en-US/docs/Web/API/element "Element"
[EvaluationArgument]: /evaluating.mdx#evaluation-argument "EvaluationArgument"
[Promise]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"
[iterator]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols "Iterator"
[origin]: https://developer.mozilla.org/en-US/docs/Glossary/Origin "Origin"
[selector]: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors "selector"
[Serializable]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable"
[UIEvent.detail]: https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detail "UIEvent.detail"
[UnixTime]: https://en.wikipedia.org/wiki/Unix_time "Unix Time"
[xpath]: https://developer.mozilla.org/en-US/docs/Web/XPath "xpath"

[bool]: https://docs.microsoft.com/en-us/dotnet/api/system.boolean "bool"
[Date]: https://learn.microsoft.com/en-us/dotnet/api/system.datetime "DateTime"
[double]: https://docs.microsoft.com/en-us/dotnet/api/system.double "double"
[byte]: https://docs.microsoft.com/en-us/dotnet/api/system.byte "byte"
[int]: https://docs.microsoft.com/en-us/dotnet/api/system.int32 "int"
[long]: https://docs.microsoft.com/en-us/dotnet/api/system.int64 "long"
[void]: https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/void "void"
[string]: https://docs.microsoft.com/en-us/dotnet/api/system.string "string"
[URL]: https://nodejs.org/api/url.html "URL"
[Regex]: https://docs.microsoft.com/en-us/dotnet/api/system.text.regularexpressions.regex "Regex"

[Action]: https://docs.microsoft.com/en-us/dotnet/api/system.action-1 "Action"
[Func]: https://docs.microsoft.com/en-us/dotnet/api/system.func-2 "Func"
[IEnumerable]: https://docs.microsoft.com/en-us/dotnet/api/system.collections.ienumerable "IEnumerable"
[IReadOnlyList]: https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.ireadonlylist-1?view=net-9.0 "IReadOnlyList"
[IDictionary]: https://docs.microsoft.com/en-us/dotnet/api/system.collections.idictionary "IDictionary"
[Task]: https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task?view=net-5.0 "Task"
[IReadOnlyDictionary]: https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.ireadonlydictionary-2 "IReadOnlyDictionary"
[JsonElement]: https://docs.microsoft.com/en-us/dotnet/api/system.text.json.jsonelement "JsonElement"

[all available image tags]: https://mcr.microsoft.com/en-us/product/playwright/dotnet/about "all available image tags"
[Microsoft Artifact Registry]: https://mcr.microsoft.com/en-us/product/playwright/dotnet/about "Microsoft Artifact Registry"
[Dockerfile.noble]: https://github.com/microsoft/playwright-dotnet/blob/main/utils/docker/Dockerfile.noble "Dockerfile.noble"
