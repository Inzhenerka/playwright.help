---
id: test-cli
title: "Командная строка"
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import HTMLCard from '@site/src/components/HTMLCard';

Playwright предоставляет мощный интерфейс командной строки для запуска тестов, генерации кода, отладки и многого другого. Самый актуальный список команд и аргументов CLI всегда можно получить с помощью `npx playwright --help`.

## Основные команды

### Запуск тестов

Запускает ваши тесты Playwright. [Подробнее о запуске тестов](./running-tests.mdx).

#### Синтаксис

```bash
npx playwright test [options] [test-filter...]
```

#### Примеры

```bash
# Запустить все тесты
npx playwright test

# Запустить один файл тестов
npx playwright test tests/todo-page.spec.ts

# Запустить набор файлов тестов
npx playwright test tests/todo-page/ tests/landing-page/

# Запустить тесты на конкретной строке
npx playwright test my-spec.ts:42

# Запустить тесты по заголовку
npx playwright test -g "add a todo item"

# Запустить тесты в headed-режиме
npx playwright test --headed

# Запустить тесты для конкретного проекта
npx playwright test --project=chromium

# Справка
npx playwright test --help
```

**Отключить [параллелизацию](./test-parallel.mdx)**

```bash
npx playwright test --workers=1
```

**Запуск в режиме отладки с [Playwright Inspector](./debug.mdx)**

```bash
npx playwright test --debug
```

**Запуск тестов в интерактивном [UI mode](./test-ui-mode.mdx)**

```bash
npx playwright test --ui
```

#### Часто используемые опции

| Опция | Описание |
| :--- | :--- |
| `--debug` | Запускает тесты с Playwright Inspector. Сокращение для переменной окружения `PWDEBUG=1` и опций `--timeout=0 --max-failures=1 --headed --workers=1`. |
| `--headed` | Запускает тесты в браузерах с интерфейсом (по умолчанию: headless). |
| `-g <grep>` или `--grep <grep>` | Запускает только тесты, соответствующие этому регулярному выражению (по умолчанию: `".*"`). |
| `--project <project-name...>` | Запускает тесты только из указанного списка проектов; поддерживает wildcard `*` (по умолчанию: запускаются все проекты). |
| `--ui` | Запускает тесты в интерактивном UI-режиме. |
| `-j <workers>` или `--workers <workers>` | Количество параллельных воркеров или процент от числа логических ядер CPU; используйте `1`, чтобы запускать в одном воркере (по умолчанию: 50%). |

#### Все опции

| Опция | Описание |
| :--- | :--- |
| Аргументы без опций | Каждый аргумент трактуется как регулярное выражение, сопоставляемое с полным путём к файлу теста. Будут выполнены только тесты из файлов, путь которых соответствует шаблону. Спецсимволы вроде `$` или `*` нужно экранировать с помощью `\`. Во многих shell/терминалах аргументы может потребоваться заключать в кавычки. |
| `-c <file>` или `--config <file>` | Файл конфигурации или директория с тестами с необязательным `playwright.config.&#123;m,c&#125;?&#123;js,ts&#125;`. По умолчанию используется `playwright.config.ts` или `playwright.config.js` в текущей директории. |
| `--debug` | Запускает тесты с Playwright Inspector. Сокращение для `PWDEBUG=1` и опций `--timeout=0 --max-failures=1 --headed --workers=1`. |
| `--fail-on-flaky-tests` | Завершает запуск с ошибкой, если какой‑то тест помечен как flaky (по умолчанию: false). |
| `--forbid-only` | Завершает запуск с ошибкой, если встречается `test.only` (по умолчанию: false). Полезно в CI. |
| `--fully-parallel` | Запускает все тесты параллельно (по умолчанию: false). |
| `--global-timeout <timeout>` | Максимальное время выполнения всего набора тестов (в миллисекундах) (по умолчанию: без ограничений). |
| `-g <grep>` или `--grep <grep>` | Запускает только тесты, соответствующие этому регулярному выражению (по умолчанию: `".*"`). |
| `--grep-invert <grep>` | Запускает только тесты, которые не соответствуют этому регулярному выражению. |
| `--headed` | Запускает тесты в браузерах с интерфейсом (по умолчанию: headless). |
| `--ignore-snapshots` | Игнорирует ожидания скриншотов и снапшотов. |
| `-j <workers>` или `--workers <workers>` | Количество параллельных воркеров или процент от числа логических ядер CPU; используйте `1`, чтобы запускать в одном воркере (по умолчанию: 50%). |
| `--last-failed` | Повторно запускает только упавшие тесты. |
| `--list` | Собирает список тестов и выводит его, но не запускает. |
| `--max-failures <N>` или `-x` | Останавливается после первых `N` падений. Опция `-x` останавливает после первого падения. |
| `--no-deps` | Не запускает зависимости проектов. |
| `--output <dir>` | Папка для выходных артефактов (по умолчанию: `"test-results"`). |
| `--only-changed [ref]` | Запускает только файлы тестов, изменённые между `HEAD` и `ref`. По умолчанию запускаются все незакоммиченные изменения. Поддерживается только Git. |
| `--pass-with-no-tests` | Считает запуск успешным, даже если тесты не найдены. |
| `--project <project-name...>` | Запускает тесты только из указанного списка проектов; поддерживает wildcard `*` (по умолчанию: запускаются все проекты). |
| `--quiet` | Подавляет stdio. |
| `--repeat-each <N>` | Запускает каждый тест `N` раз (по умолчанию: 1). |
| `--reporter <reporter>` | Репортёр, который будет использоваться; перечисляется через запятую, может быть `"dot"`, `"line"`, `"list"` и др. (по умолчанию: `"list"`). Также можно передать путь к файлу пользовательского репортера. |
| `--retries <retries>` | Максимальное число повторов для flaky-тестов; 0 — без повторов (по умолчанию: без повторов). |
| `--shard <shard>` | Делит тесты на шарды и выполняет только выбранный шард, в формате `"current/all"` (нумерация с 1), например `"3/5"`. |
| `--test-list <file>` | Путь к файлу со списком тестов для запуска. См. [test list](#test-list). |
| `--test-list-invert <file>` | Путь к файлу со списком тестов, которые нужно пропустить. См. [test list](#test-list). |
| `--timeout <timeout>` | Таймаут теста в миллисекундах; 0 — без ограничений (по умолчанию: 30 секунд). |
| `--trace <mode>` | Принудительно задаёт режим трассировки: `on`, `off`, `on-first-retry`, `on-all-retries`, `retain-on-failure`, `retain-on-first-failure`. |
| `--tsconfig <path>` | Путь к единому tsconfig для всех импортируемых файлов (по умолчанию: tsconfig ищется для каждого импортируемого файла отдельно). |
| `--ui` | Запускает тесты в интерактивном UI-режиме. |
| `--ui-host <host>` | Хост, на котором будет подниматься UI; при указании опции UI открывается во вкладке браузера. |
| `--ui-port <port>` | Порт, на котором будет подниматься UI; `0` — любой свободный порт; при указании опции UI открывается во вкладке браузера. |
| `-u` или `--update-snapshots [mode]` | Обновляет снапшоты фактическими результатами. Возможные значения: `"all"`, `"changed"`, `"missing"`, `"none"`. Запуск без флага использует `"missing"`; запуск с флагом, но без значения — `"changed"`. |
| `--update-source-method [mode]` | Обновляет снапшоты фактическими результатами. Возможные значения: `"patch"` (по умолчанию), `"3way"`, `"overwrite"`. `"patch"` создаёт unified diff-файл, который можно применить к исходникам позже. `"3way"` добавляет в исходники маркеры merge-конфликтов. `"overwrite"` перезаписывает исходники новыми значениями снапшотов. |
| `-x` | Останавливается после первого падения. |

#### Список тестов

Опции `--test-list` и `--test-list-invert` принимают путь к файлу со списком тестов. Этот файл должен перечислять тесты в формате, похожем на вывод режима `--list`.

```txt
# Это файл со списком тестов.
# В нём могут быть комментарии и пустые строки.

# Полностью квалифицированный тест с проектом:
[chromium] › path/to/example.spec.ts:3:9 › suite › nested suite › example test

# Этот тест включён для всех проектов:
path/to/example.spec.ts:3:9 › example test

# В качестве разделителя можно использовать "›" или ">":
[firefox] > example.spec.ts > suite > nested suite > example test

# Номера строки/колонки полностью игнорируются — их можно опустить.
# Три записи ниже относятся к одному и тому же тесту:
example.spec.ts › example test
example.spec.ts:15 › example test
example.spec.ts:42:42 › example test
```

### Show Report

Display HTML report from previous test run. [Read more about the HTML reporter](./test-reporters#html-reporter).

#### Syntax

```bash
npx playwright show-report [report] [options]
```

#### Examples

```bash
# Show latest test report
npx playwright show-report

# Show a specific report
npx playwright show-report playwright-report/

# Show report on custom port
npx playwright show-report --port 8080
```

#### Options

| Option | Description |
| :--- | :--- |
| `--host <host>` | Host to serve report on (default: localhost) |
| `--port <port>` | Port to serve report on (default: 9323) |

### Install Browsers

Install browsers required by Playwright. [Read more about Playwright's browser support](./browsers.mdx).

#### Syntax

```bash
npx playwright install [options] [browser...]
npx playwright install-deps [options] [browser...]
npx playwright uninstall
```

#### Examples

```bash
# Install all browsers
npx playwright install

# Install only Chromium
npx playwright install chromium

# Install specific browsers
npx playwright install chromium webkit

# Install browsers with dependencies
npx playwright install --with-deps
```

#### Install Options

| Option | Description |
| :--- | :--- |
| `--force` | Force reinstall of stable browser channels |
| `--with-deps` | Install browser system dependencies |
| `--dry-run` | Don't perform installation, just print information |
| `--only-shell` | Only install chromium-headless-shell instead of full Chromium |
| `--no-shell` | Don't install chromium-headless-shell |

#### Install Deps Options

| Option | Description |
| :--- | :--- |
| `--dry-run` | Don't perform installation, just print information |

## Generation & Debugging Tools

### Code Generation

Record actions and generate tests for multiple languages. [Read more about Codegen](./codegen-intro.mdx).

#### Syntax

```bash
npx playwright codegen [options] [url]
```

#### Examples

```bash
# Start recording with interactive UI
npx playwright codegen

# Record on specific site
npx playwright codegen https://playwright.dev

# Generate Python code
npx playwright codegen --target=python
```

#### Options

| Option | Description |
| :--- | :--- |
| `-b, --browser <name>` | Browser to use: chromium, firefox, or webkit (default: chromium) |
| `-o, --output <file>` | Output file for the generated script |
| `--target <language>` | Language to use: javascript, playwright-test, python, etc. |
| `--test-id-attribute <attr>` | Attribute to use for test IDs |

### Trace Viewer

Analyze and view test traces for debugging. [Read more about Trace Viewer](./trace-viewer.mdx).

#### Syntax

```bash
npx playwright show-trace [options] [trace]
```

#### Examples

```bash
# Open trace viewer without a specific trace (can load traces via UI)
npx playwright show-trace

# View a trace file
npx playwright show-trace trace.zip

# View trace from directory
npx playwright show-trace trace/
```

#### Options

| Option | Description |
| :--- | :--- |
| `-b, --browser <name>` | Browser to use: chromium, firefox, or webkit (default: chromium) |
| `-h, --host <host>` | Host to serve trace on |
| `-p, --port <port>` | Port to serve trace on |

## Specialized Commands

### Merge Reports

Read [blob](./test-reporters#blob-reporter) reports and combine them. [Read more about merge-reports](./test-sharding.mdx).

#### Syntax

```bash
npx playwright merge-reports [options] <blob dir>
```

#### Examples

```bash
# Combine test reports
npx playwright merge-reports ./reports
```

#### Options

| Option | Description |
| :--- | :--- |
| `-c, --config <file>` | Configuration file. Can be used to specify additional configuration for the output report |
| `--reporter <reporter>` | Reporter to use, comma-separated, can be "list", "line", "dot", "json", "junit", "null", "github", "html", "blob" (default: "list") |

### Clear Cache

Clear all Playwright caches.

#### Syntax

```bash
npx playwright clear-cache
```


[Android]: /api/class-android.mdx "Android"
[AndroidDevice]: /api/class-androiddevice.mdx "AndroidDevice"
[AndroidInput]: /api/class-androidinput.mdx "AndroidInput"
[AndroidSocket]: /api/class-androidsocket.mdx "AndroidSocket"
[AndroidWebView]: /api/class-androidwebview.mdx "AndroidWebView"
[APIRequest]: /api/class-apirequest.mdx "APIRequest"
[APIRequestContext]: /api/class-apirequestcontext.mdx "APIRequestContext"
[APIResponse]: /api/class-apiresponse.mdx "APIResponse"
[APIResponseAssertions]: /api/class-apiresponseassertions.mdx "APIResponseAssertions"
[Browser]: /api/class-browser.mdx "Browser"
[BrowserContext]: /api/class-browsercontext.mdx "BrowserContext"
[BrowserServer]: /api/class-browserserver.mdx "BrowserServer"
[BrowserType]: /api/class-browsertype.mdx "BrowserType"
[CDPSession]: /api/class-cdpsession.mdx "CDPSession"
[Clock]: /api/class-clock.mdx "Clock"
[ConsoleMessage]: /api/class-consolemessage.mdx "ConsoleMessage"
[Coverage]: /api/class-coverage.mdx "Coverage"
[Dialog]: /api/class-dialog.mdx "Dialog"
[Download]: /api/class-download.mdx "Download"
[Electron]: /api/class-electron.mdx "Electron"
[ElectronApplication]: /api/class-electronapplication.mdx "ElectronApplication"
[ElementHandle]: /api/class-elementhandle.mdx "ElementHandle"
[FileChooser]: /api/class-filechooser.mdx "FileChooser"
[Frame]: /api/class-frame.mdx "Frame"
[FrameLocator]: /api/class-framelocator.mdx "FrameLocator"
[GenericAssertions]: /api/class-genericassertions.mdx "GenericAssertions"
[JSHandle]: /api/class-jshandle.mdx "JSHandle"
[Keyboard]: /api/class-keyboard.mdx "Keyboard"
[Locator]: /api/class-locator.mdx "Locator"
[LocatorAssertions]: /api/class-locatorassertions.mdx "LocatorAssertions"
[Logger]: /api/class-logger.mdx "Logger"
[Mouse]: /api/class-mouse.mdx "Mouse"
[Page]: /api/class-page.mdx "Page"
[PageAssertions]: /api/class-pageassertions.mdx "PageAssertions"
[Playwright]: /api/class-playwright.mdx "Playwright"
[PlaywrightAssertions]: /api/class-playwrightassertions.mdx "PlaywrightAssertions"
[Request]: /api/class-request.mdx "Request"
[Response]: /api/class-response.mdx "Response"
[Route]: /api/class-route.mdx "Route"
[Selectors]: /api/class-selectors.mdx "Selectors"
[SnapshotAssertions]: /api/class-snapshotassertions.mdx "SnapshotAssertions"
[TimeoutError]: /api/class-timeouterror.mdx "TimeoutError"
[Touchscreen]: /api/class-touchscreen.mdx "Touchscreen"
[Tracing]: /api/class-tracing.mdx "Tracing"
[Video]: /api/class-video.mdx "Video"
[WebError]: /api/class-weberror.mdx "WebError"
[WebSocket]: /api/class-websocket.mdx "WebSocket"
[WebSocketRoute]: /api/class-websocketroute.mdx "WebSocketRoute"
[Worker]: /api/class-worker.mdx "Worker"
[Fixtures]: /api/class-fixtures.mdx "Fixtures"
[FullConfig]: /api/class-fullconfig.mdx "FullConfig"
[FullProject]: /api/class-fullproject.mdx "FullProject"
[Location]: /api/class-location.mdx "Location"
[Test]: /api/class-test.mdx "Test"
[TestConfig]: /api/class-testconfig.mdx "TestConfig"
[TestInfo]: /api/class-testinfo.mdx "TestInfo"
[TestInfoError]: /api/class-testinfoerror.mdx "TestInfoError"
[TestOptions]: /api/class-testoptions.mdx "TestOptions"
[TestProject]: /api/class-testproject.mdx "TestProject"
[TestStepInfo]: /api/class-teststepinfo.mdx "TestStepInfo"
[WorkerInfo]: /api/class-workerinfo.mdx "WorkerInfo"
[Reporter]: /api/class-reporter.mdx "Reporter"
[Suite]: /api/class-suite.mdx "Suite"
[TestCase]: /api/class-testcase.mdx "TestCase"
[TestError]: /api/class-testerror.mdx "TestError"
[TestResult]: /api/class-testresult.mdx "TestResult"
[TestStep]: /api/class-teststep.mdx "TestStep"
[Element]: https://developer.mozilla.org/en-US/docs/Web/API/element "Element"
[EvaluationArgument]: /evaluating.mdx#evaluation-argument "EvaluationArgument"
[Promise]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"
[iterator]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols "Iterator"
[origin]: https://developer.mozilla.org/en-US/docs/Glossary/Origin "Origin"
[selector]: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors "selector"
[Serializable]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable"
[UIEvent.detail]: https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detail "UIEvent.detail"
[UnixTime]: https://en.wikipedia.org/wiki/Unix_time "Unix Time"
[xpath]: https://developer.mozilla.org/en-US/docs/Web/XPath "xpath"

[Array]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array"
[boolean]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean"
[Buffer]: https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer"
[ChildProcess]: https://nodejs.org/api/child_process.html "ChildProcess"
[Date]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date "Date"
[Error]: https://nodejs.org/api/errors.html#errors_class_error "Error"
[EventEmitter]: https://nodejs.org/api/events.html#events_class_eventemitter "EventEmitter"
[function]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function"
[FormData]: https://developer.mozilla.org/en-US/docs/Web/API/FormData "FormData"
[Map]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map "Map"
[Metadata]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object&lt;string, any&gt;"
[null]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null"
[number]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number"
[Object]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object"
[Promise]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"
[Readable]: https://nodejs.org/api/stream.html#stream_class_stream_readable "Readable"
[ReadStream]: https://nodejs.org/api/fs.html#class-fsreadstream "ReadStream"
[RegExp]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp"
[string]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"
[void]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void"
[URL]: https://nodejs.org/api/url.html "URL"
[URLSearchParams]: https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams "URLSearchParams"

[все доступные теги образов]: https://mcr.microsoft.com/en-us/product/playwright/about "все доступные теги образов"
[Microsoft Artifact Registry]: https://mcr.microsoft.com/en-us/product/playwright/about "Microsoft Artifact Registry"
[Dockerfile.noble]: https://github.com/microsoft/playwright/blob/main/utils/docker/Dockerfile.noble "Dockerfile.noble"