---
id: class-testconfig
title: "TestConfig"
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import HTMLCard from '@site/src/components/HTMLCard';

Playwright Test предоставляет множество опций для настройки того, как ваши тесты собираются и выполняются, например, `timeout` или `testDir`. Эти опции описаны в объекте [TestConfig] в [файле конфигурации](../test-configuration.mdx). Этот тип описывает формат файла конфигурации, для доступа к разрешенным параметрам конфигурации во время выполнения используйте [FullConfig].

Playwright Test поддерживает одновременное выполнение нескольких тестовых проектов. Специфичные для проекта опции должны быть указаны в [testConfig.projects](/api/class-testconfig.mdx#test-config-projects), но опции верхнего уровня [TestConfig] также могут определять базовые параметры, общие для всех проектов.

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  timeout: 30000,
  globalTimeout: 600000,
  reporter: 'list',
  testDir: './tests',
});
```

---

## Свойства

### build {#test-config-build}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.35</font><x-search>testConfig.build</x-search>

Конфигурация транспилятора Playwright.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  build: {
    external: ['**/*bundle.js'],
  },
});
```

**Тип**
- [Object]
  - `external` [Array]&lt;[string]&gt; *(опционально)*
    
    Пути, которые следует исключить из транспиляции, выраженные в виде списка шаблонов glob. Обычно здесь перечисляются тяжелые JS-бандлы, которые использует ваш тест.

---

### captureGitInfo {#test-config-capture-git-info}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.51</font><x-search>testConfig.captureGitInfo</x-search>

Эти настройки контролируют, будет ли информация о git захвачена и сохранена в конфигурации [testConfig.metadata](/api/class-testconfig.mdx#test-config-metadata).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  captureGitInfo: { commit: true, diff: true }
});
```

**Тип**
- [Object]
  - `commit` [boolean] *(опционально)*
    
    Указывает, следует ли захватывать информацию о коммите и запросе на слияние, такую как хэш, автор, временная метка.
  - `diff` [boolean] *(опционально)*
    
    Указывает, следует ли захватывать разницу коммита.

**Детали**
* Захват информации о `commit` полезен, когда вы хотите видеть ее в вашем HTML (или стороннем) отчете.
* Захват информации о `diff` полезен для обогащения отчета фактической разницей в исходном коде. Эта информация может быть использована для предоставления разумных советов о том, как исправить тест.

:::note

Значения по умолчанию для этих настроек зависят от окружения. Когда тесты выполняются как часть CI, где безопасно получать информацию о git, значение по умолчанию равно `true`, в противном случае `false`.
:::

:::note
Структура метаданных коммита git может измениться.
:::

---

### expect {#test-config-expect}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.expect</x-search>

Конфигурация для библиотеки утверждений `expect`. Узнайте больше о [различных таймаутах](../test-timeouts.mdx).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  expect: {
    timeout: 10000,
    toMatchSnapshot: {
      maxDiffPixels: 10,
    },
  },
});
```

**Тип**
- [Object]
  - `timeout` [number] *(опционально)*
    
    Таймаут по умолчанию для асинхронных матчеров expect в миллисекундах, по умолчанию 5000мс.
  - `toHaveScreenshot` [Object] *(опционально)*
    - `animations` "allow" | "disabled" *(опционально)*
      
      См. [animations](/api/class-page.mdx#page-screenshot-option-animations) в [page.screenshot()](/api/class-page.mdx#page-screenshot). По умолчанию `"disabled"`.
    - `caret` "hide" | "initial" *(опционально)*
      
      См. [caret](/api/class-page.mdx#page-screenshot-option-caret) в [page.screenshot()](/api/class-page.mdx#page-screenshot). По умолчанию `"hide"`.
    - `maxDiffPixels` [number] *(опционально)*
      
      Допустимое количество пикселей, которые могут отличаться, по умолчанию не установлено.
    - `maxDiffPixelRatio` [number] *(опционально)*
      
      Допустимое соотношение пикселей, которые отличаются от общего количества пикселей, от `0` до `1`, по умолчанию не установлено.
    - `scale` "css" | "device" *(опционально)*
      
      См. [scale](/api/class-page.mdx#page-screenshot-option-scale) в [page.screenshot()](/api/class-page.mdx#page-screenshot). По умолчанию `"css"`.
    - `stylePath` [string] | [Array]&lt;[string]&gt; *(опционально)*
      
      См. [style](/api/class-page.mdx#page-screenshot-option-style) в [page.screenshot()](/api/class-page.mdx#page-screenshot).
    - `threshold` [number] *(опционально)*
      
      Допустимое воспринимаемое цветовое различие между одним и тем же пикселем в сравниваемых изображениях, от `0` (строго) до `1` (свободно). Компаратор `"pixelmatch"` вычисляет цветовое различие в [YIQ цветовой модели](https://en.wikipedia.org/wiki/YIQ) и по умолчанию устанавливает значение `threshold` на `0.2`.
    - `pathTemplate` [string] *(опционально)*
      
      Шаблон, контролирующий расположение скриншотов. См. [testConfig.snapshotPathTemplate](/api/class-testconfig.mdx#test-config-snapshot-path-template) для получения подробной информации.
    
    Конфигурация для метода [expect(page).toHaveScreenshot()](/api/class-pageassertions.mdx#page-assertions-to-have-screenshot-1).
  - `toMatchAriaSnapshot` [Object] *(опционально)*
    - `pathTemplate` [string] *(опционально)*
      
      Шаблон, контролирующий расположение aria-снимков. См. [testConfig.snapshotPathTemplate](/api/class-testconfig.mdx#test-config-snapshot-path-template) для получения подробной информации.
    
    Конфигурация для метода [expect(locator).toMatchAriaSnapshot()](/api/class-locatorassertions.mdx#locator-assertions-to-match-aria-snapshot-2).
  - `toMatchSnapshot` [Object] *(опционально)*
    - `maxDiffPixels` [number] *(опционально)*
      
      Допустимое количество пикселей, которые могут отличаться, по умолчанию не установлено.
    - `maxDiffPixelRatio` [number] *(опционально)*
      
      Допустимое соотношение пикселей, которые отличаются от общего количества пикселей, от `0` до `1`, по умолчанию не установлено.
    - `threshold` [number] *(опционально)*
      
      Допустимое воспринимаемое цветовое различие между одним и тем же пикселем в сравниваемых изображениях, от `0` (строго) до `1` (свободно). Компаратор `"pixelmatch"` вычисляет цветовое различие в [YIQ цветовой модели](https://en.wikipedia.org/wiki/YIQ) и по умолчанию устанавливает значение `threshold` на `0.2`.
    
    Конфигурация для метода [expect(value).toMatchSnapshot()](/api/class-snapshotassertions.mdx#snapshot-assertions-to-match-snapshot-1).
  - `toPass` [Object] *(опционально)*
    - `intervals` [Array]&lt;[number]&gt; *(опционально)*
      
      Интервалы опроса для метода toPass в миллисекундах.
    - `timeout` [number] *(опционально)*
      
      Таймаут для метода toPass в миллисекундах.
    
    Конфигурация для метода [expect(value).toPass()](../test-assertions.mdx#expecttopass) метода.

---

### forbidOnly {#test-config-forbid-only}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.forbidOnly</x-search>

Указывает, следует ли завершать выполнение с ошибкой, если какие-либо тесты или группы помечены как [test.only()](/api/class-test.mdx#test-only) или [test.describe.only()](/api/class-test.mdx#test-describe-only). Полезно в CI.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  forbidOnly: !!process.env.CI,
});
```

**Тип**
- [boolean]

---

### fullyParallel {#test-config-fully-parallel}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.20</font><x-search>testConfig.fullyParallel</x-search>

Playwright Test выполняет тесты параллельно. Для этого он запускает несколько рабочих процессов, которые работают одновременно. По умолчанию **тестовые файлы** выполняются параллельно. Тесты в одном файле выполняются по порядку, в одном и том же рабочем процессе.

Вы можете настроить выполнение всех тестов во всех файлах одновременно, используя эту опцию.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  fullyParallel: true,
});
```

**Тип**
- [boolean]

---

### globalSetup {#test-config-global-setup}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.globalSetup</x-search>

Путь к файлу глобальной настройки. Этот файл будет загружен и выполнен перед всеми тестами. Он должен экспортировать одну функцию, которая принимает аргумент [FullConfig]. Передайте массив путей, чтобы указать несколько файлов глобальной настройки.

Узнайте больше о [глобальной настройке и завершении работы](../test-global-setup-teardown.mdx).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  globalSetup: './global-setup',
});
```

**Тип**
- [string] | [Array]&lt;[string]&gt;

---

### globalTeardown {#test-config-global-teardown}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.globalTeardown</x-search>

Путь к файлу глобального завершения работы. Этот файл будет загружен и выполнен после всех тестов. Он должен экспортировать одну функцию. См. также [testConfig.globalSetup](/api/class-testconfig.mdx#test-config-global-setup). Передайте массив путей, чтобы указать несколько файлов глобального завершения работы.

Узнайте больше о [глобальной настройке и завершении работы](../test-global-setup-teardown.mdx).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  globalTeardown: './global-teardown',
});
```

**Тип**
- [string] | [Array]&lt;[string]&gt;

---

### globalTimeout {#test-config-global-timeout}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.globalTimeout</x-search>

Максимальное время в миллисекундах, в течение которого может выполняться весь тестовый набор. Нулевой таймаут (по умолчанию) отключает это поведение. Полезно в CI, чтобы предотвратить длительное выполнение сломанной настройки и не тратить ресурсы. Узнайте больше о [различных таймаутах](../test-timeouts.mdx).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  globalTimeout: process.env.CI ? 60 * 60 * 1000 : undefined,
});
```

**Тип**
- [number]

---

### grep {#test-config-grep}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.grep</x-search>

Фильтр для выполнения только тех тестов, заголовок которых соответствует одному из шаблонов. Например, передача `grep: /cart/` должна выполнить только тесты с "cart" в заголовке. Также доступно в [командной строке](../test-cli.mdx) с опцией `-g`. Регулярное выражение будет проверяться на строке, состоящей из имени проекта, имени тестового файла, имени `test.describe` (если есть), имени теста и тегов теста, разделенных пробелами, например `chromium my-test.spec.ts my-suite my-test`.

Опция `grep` также полезна для [тегирования тестов](../test-annotations.mdx#tag-tests).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  grep: /smoke/,
});
```

**Тип**
- [RegExp] | [Array]&lt;[RegExp]&gt;

---

### grepInvert {#test-config-grep-invert}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.grepInvert</x-search>

Фильтр для выполнения только тех тестов, заголовок которых **не** соответствует одному из шаблонов. Это противоположно [testConfig.grep](/api/class-testconfig.mdx#test-config-grep). Также доступно в [командной строке](../test-cli.mdx) с опцией `--grep-invert`.

Опция `grepInvert` также полезна для [тегирования тестов](../test-annotations.mdx#tag-tests).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  grepInvert: /manual/,
});
```

**Тип**
- [RegExp] | [Array]&lt;[RegExp]&gt;

---

### ignoreSnapshots {#test-config-ignore-snapshots}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.26</font><x-search>testConfig.ignoreSnapshots</x-search>

Указывает, следует ли пропускать ожидания снимков, такие как `expect(value).toMatchSnapshot()` и `await expect(page).toHaveScreenshot()`.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  ignoreSnapshots: !process.env.CI,
});
```

**Тип**
- [boolean]

---

### maxFailures {#test-config-max-failures}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.maxFailures</x-search>

Максимальное количество неудач тестов для выполнения всего тестового набора. После достижения этого числа тестирование остановится и завершится с ошибкой. Установка в ноль (по умолчанию) отключает это поведение.

Также доступно в [командной строке](../test-cli.mdx) с опциями `--max-failures` и `-x`.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  maxFailures: process.env.CI ? 1 : 0,
});
```

**Тип**
- [number]

---

### metadata {#test-config-metadata}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.metadata</x-search>

Метаданные содержат пары ключ-значение, которые будут включены в отчет. Например, HTML-отчет отобразит их в виде пар ключ-значение, а JSON-отчет будет включать метаданные, сериализованные в формате json.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  metadata: { title: 'acceptance tests' },
});
```

**Тип**
- [Metadata]

---

### name {#test-config-name}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.name</x-search>

Имя конфигурации отображается в отчете и во время выполнения тестов, если не переопределено [testProject.name](/api/class-testproject.mdx#test-project-name).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  name: 'acceptance tests',
});
```

**Тип**
- [string]

---

### outputDir {#test-config-output-dir}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.outputDir</x-search>

Каталог для файлов, создаваемых во время выполнения тестов. По умолчанию `<package.json-directory>/test-results`.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  outputDir: './test-results',
});
```

**Тип**
- [string]

**Детали**

Этот каталог очищается в начале. При выполнении теста создается уникальный подкаталог внутри [testConfig.outputDir](/api/class-testconfig.mdx#test-config-output-dir), что гарантирует, что тесты, выполняемые параллельно, не конфликтуют. Этот каталог может быть доступен через [testInfo.outputDir](/api/class-testinfo.mdx#test-info-output-dir) и [testInfo.outputPath()](/api/class-testinfo.mdx#test-info-output-path).

Вот пример, который использует [testInfo.outputPath()](/api/class-testinfo.mdx#test-info-output-path) для создания временного файла.

```js
import { test, expect } from '@playwright/test';
import fs from 'fs';

test('example test', async ({}, testInfo) => {
  const file = testInfo.outputPath('temporary-file.txt');
  await fs.promises.writeFile(file, 'Put some data to the file', 'utf8');
});
```

---

### preserveOutput {#test-config-preserve-output}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.preserveOutput</x-search>

Указывает, следует ли сохранять вывод тестов в [testConfig.outputDir](/api/class-testconfig.mdx#test-config-output-dir). По умолчанию `'always'`.
* `'always'` - сохранять вывод для всех тестов;
* `'never'` - не сохранять вывод для любых тестов;
* `'failures-only'` - сохранять вывод только для неудачных тестов.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  preserveOutput: 'always',
});
```

**Тип**
- "always" | "never" | "failures-only"

---

### projects {#test-config-projects}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.projects</x-search>

Playwright Test поддерживает одновременное выполнение нескольких тестовых проектов. См. [TestProject] для получения дополнительной информации.

**Использование**

```js title="playwright.config.ts"
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  projects: [
    { name: 'chromium', use: devices['Desktop Chrome'] }
  ]
});
```

**Тип**
- [Array]&lt;[TestProject]&gt;

---

### quiet {#test-config-quiet}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.quiet</x-search>

Указывает, следует ли подавлять вывод stdio и stderr от тестов.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  quiet: !!process.env.CI,
});
```

**Тип**
- [boolean]

---

### repeatEach {#test-config-repeat-each}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.repeatEach</x-search>

Количество раз, которое следует повторить каждый тест, полезно для отладки ненадежных тестов.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  repeatEach: 3,
});
```

**Тип**
- [number]

---

### reportSlowTests {#test-config-report-slow-tests}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.reportSlowTests</x-search>

Указывает, следует ли сообщать о медленных тестовых файлах. Передайте `null`, чтобы отключить эту функцию.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  reportSlowTests: null,
});
```

**Тип**
- [null] | [Object]
  - `max` [number]
    
    Максимальное количество медленных тестовых файлов для отчета. По умолчанию `5`.
  - `threshold` [number]
    
    Длительность тестового файла в миллисекундах, которая считается медленной. По умолчанию 5 минут.

**Детали**

Тестовые файлы, которые заняли более `threshold` миллисекунд, считаются медленными, и о них сообщается, не более чем `max` из них. Передача нуля в качестве `max` сообщает о всех тестовых файлах, которые превышают порог.

---

### reporter {#test-config-reporter}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.reporter</x-search>

Список репортеров для использования. Каждый репортер может быть:
* Имя встроенного репортера, например `'list'` или `'json'`.
* Имя модуля, например `'my-awesome-reporter'`.
* Относительный путь к репортеру, например `'./reporters/my-awesome-reporter.js'`.

Вы можете передать параметры репортеру в кортеже, например `['json', { outputFile: './report.json' }]`.

Узнайте больше в [руководстве по репортерам](../test-reporters.mdx).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  reporter: 'line',
});
```

**Тип**
- [string] | [Array]&lt;[Object]&gt; | "list" | "dot" | "line" | "github" | "json" | "junit" | "null" | "html"
  - `0` [string]
    
    Имя репортера или модуля или путь к файлу
  - `1` [Object]
    
    Объект с параметрами репортера, если таковые имеются

---

### respectGitIgnore {#test-config-respect-git-ignore}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.45</font><x-search>testConfig.respectGitIgnore</x-search>

Указывает, следует ли пропускать записи из `.gitignore` при поиске тестовых файлов. По умолчанию, если ни [testConfig.testDir](/api/class-testconfig.mdx#test-config-test-dir), ни [testProject.testDir](/api/class-testproject.mdx#test-project-test-dir) не указаны явно, Playwright будет игнорировать любые тестовые файлы, соответствующие записям `.gitignore`.

**Использование**

```js
testConfig.respectGitIgnore
```

**Тип**
- [boolean]

---

### retries {#test-config-retries}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.retries</x-search>

Максимальное количество попыток повторного выполнения для неудавшихся тестов. По умолчанию неудавшиеся тесты не повторяются. Узнайте больше о [повторах тестов](../test-retries.mdx#retries).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  retries: 2,
});
```

**Тип**
- [number]

---

### shard {#test-config-shard}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.shard</x-search>

Разделите тесты и выполните только выбранный шард. Укажите в виде единичной формы, например `{ total: 5, current: 2 }`.

Узнайте больше о [параллелизме и шардировании](../test-parallel.mdx) с Playwright Test.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  shard: { total: 10, current: 3 },
});
```

**Тип**
- [null] | [Object]
  - `current` [number]
    
    Индекс шардирования для выполнения, единичный.
  - `total` [number]
    
    Общее количество шардов.

---

### snapshotPathTemplate {#test-config-snapshot-path-template}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.28</font><x-search>testConfig.snapshotPathTemplate</x-search>

Эта опция настраивает шаблон, контролирующий расположение снимков, создаваемых с помощью [expect(page).toHaveScreenshot()](/api/class-pageassertions.mdx#page-assertions-to-have-screenshot-1), [expect(locator).toMatchAriaSnapshot()](/api/class-locatorassertions.mdx#locator-assertions-to-match-aria-snapshot-2) и [expect(value).toMatchSnapshot()](/api/class-snapshotassertions.mdx#snapshot-assertions-to-match-snapshot-1).

Вы можете настроить шаблоны для каждого утверждения отдельно в [testConfig.expect](/api/class-testconfig.mdx#test-config-expect).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  testDir: './tests',

  // Один шаблон для всех утверждений
  snapshotPathTemplate: '{testDir}/__screenshots__/{testFilePath}/{arg}{ext}',

  // Шаблоны, специфичные для утверждений
  expect: {
    toHaveScreenshot: {
      pathTemplate: '{testDir}/__screenshots__{/projectName}/{testFilePath}/{arg}{ext}',
    },
    toMatchAriaSnapshot: {
      pathTemplate: '{testDir}/__snapshots__/{testFilePath}/{arg}{ext}',
    },
  },
});
```

**Тип**
- [string]

**Детали**

Значение может включать некоторые "токены", которые будут заменены фактическими значениями во время выполнения теста.

Рассмотрим следующую структуру файлов:

```txt
playwright.config.ts
tests/
└── page/
    └── page-click.spec.ts
```

И следующий `page-click.spec.ts`, который использует вызов `toHaveScreenshot()`:

```js title="page-click.spec.ts"
import { test, expect } from '@playwright/test';

test.describe('suite', () => {
  test('test should work', async ({ page }) => {
    await expect(page).toHaveScreenshot(['foo', 'bar', 'baz.png']);
  });
});
```

Список поддерживаемых токенов:
* `{arg}` - Относительный путь к снимку **без расширения**. Это происходит из аргументов, переданных в `toHaveScreenshot()`, `toMatchAriaSnapshot()` или `toMatchSnapshot()`; если вызвано без аргументов, это будет автоматически сгенерированное имя снимка.
  * Значение: `foo/bar/baz`
* `{ext}` - Расширение снимка (с ведущей точкой).
  * Значение: `.png`
* `{platform}` - Значение `process.platform`.
* `{projectName}` - Имя проекта, очищенное от символов файловой системы, если таковое имеется.
  * Значение: `''` (пустая строка).
* `{snapshotDir}` - [testProject.snapshotDir](/api/class-testproject.mdx#test-project-snapshot-dir) проекта.
  * Значение: `/home/playwright/tests` (так как `snapshotDir` не указано в конфигурации, по умолчанию это `testDir`)
* `{testDir}` - [testProject.testDir](/api/class-testproject.mdx#test-project-test-dir) проекта.
  * Значение: `/home/playwright/tests` (абсолютный путь, так как `testDir` разрешается относительно каталога с конфигурацией)
* `{testFileDir}` - Директории в относительном пути от `testDir` к **тестовому файлу**.
  * Значение: `page`
* `{testFileName}` - Имя тестового файла с расширением.
  * Значение: `page-click.spec.ts`
* `{testFilePath}` - Относительный путь от `testDir` к **тестовому файлу**.
  * Значение: `page/page-click.spec.ts`
* `{testName}` - Заголовок теста, очищенный от символов файловой системы, включая родительские описания, но исключая имя файла.
  * Значение: `suite-test-should-work`

Каждый токен может быть предшествован одним символом, который будет использоваться **только если** этот токен имеет ненулевое значение.

Рассмотрим следующую конфигурацию:

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  snapshotPathTemplate: '__screenshots__{/projectName}/{testFilePath}/{arg}{ext}',
  testMatch: 'example.spec.ts',
  projects: [
    { use: { browserName: 'firefox' } },
    { name: 'chromium', use: { browserName: 'chromium' } },
  ],
});
```

В этой конфигурации:
1. Первый проект **не имеет** имени, поэтому его снимки будут храниться в `<configDir>/__screenshots__/example.spec.ts/...`.
1. Второй проект **имеет** имя, поэтому его снимки будут храниться в `<configDir>/__screenshots__/chromium/example.spec.ts/..`.
1. Поскольку `snapshotPathTemplate` разрешается в относительный путь, он будет разрешен относительно `configDir`.
1. Прямые слэши `"/"` могут использоваться в качестве разделителей путей на любой платформе.

---

### testDir {#test-config-test-dir}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.testDir</x-search>

Каталог, который будет рекурсивно просканирован для тестовых файлов. По умолчанию это каталог файла конфигурации.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  testDir: './tests/playwright',
});
```

**Тип**
- [string]

---

### testIgnore {#test-config-test-ignore}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.testIgnore</x-search>

Файлы, соответствующие одному из этих шаблонов, не выполняются как тестовые файлы. Сопоставление выполняется по абсолютному пути файла. Строки обрабатываются как шаблоны glob.

Например, `'**/test-assets/**'` будет игнорировать любые файлы в каталоге `test-assets`.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  testIgnore: '**/test-assets/**',
});
```

**Тип**
- [string] | [RegExp] | [Array]&lt;[string] | [RegExp]&gt;

---

### testMatch {#test-config-test-match}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.testMatch</x-search>

Только файлы, соответствующие одному из этих шаблонов, выполняются как тестовые файлы. Сопоставление выполняется по абсолютному пути файла. Строки обрабатываются как шаблоны glob.

По умолчанию Playwright ищет файлы, соответствующие следующему шаблону glob: `**/*.@(spec|test).?(c|m)[jt]s?(x)`. Это означает, что JavaScript или TypeScript файлы с суффиксом `".test"` или `".spec"`, например `login-screen.wrong-credentials.spec.ts`.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  testMatch: /.*\.e2e\.js/,
});
```

**Тип**
- [string] | [RegExp] | [Array]&lt;[string] | [RegExp]&gt;

---

### timeout {#test-config-timeout}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.timeout</x-search>

Таймаут для каждого теста в миллисекундах. По умолчанию 30 секунд.

Это базовый таймаут для всех тестов. Кроме того, каждый тест может настроить свой собственный таймаут с помощью [test.setTimeout()](/api/class-test.mdx#test-set-timeout). Узнайте больше о [различных таймаутах](../test-timeouts.mdx).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  timeout: 5 * 60 * 1000,
});
```

**Тип**
- [number]

---

### tsconfig {#test-config-tsconfig}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.49</font><x-search>testConfig.tsconfig</x-search>

Путь к единственному `tsconfig`, применимому ко всем импортированным файлам. По умолчанию `tsconfig` для каждого импортированного файла ищется отдельно. Обратите внимание, что свойство `tsconfig` не влияет на загрузку файла конфигурации или любых его зависимостей. Игнорируется, когда указан параметр командной строки `--tsconfig`.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  tsconfig: './tsconfig.test.json',
});
```

**Тип**
- [string]

---

### updateSnapshots {#test-config-update-snapshots}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.updateSnapshots</x-search>

Указывает, следует ли обновлять ожидаемые снимки фактическими результатами, полученными в ходе выполнения теста. По умолчанию `'missing'`.
* `'all'` - Все выполняемые тесты будут обновлять снимки.
* `'changed'` - Все выполняемые тесты будут обновлять снимки, которые не совпали. Совпадающие снимки обновляться не будут.
* `'missing'` - Создаются отсутствующие снимки, например, при создании нового теста и его первом запуске. Это значение по умолчанию.
* `'none'` - Снимки не обновляются.

Узнайте больше о [снимках](../test-snapshots.mdx).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  updateSnapshots: 'missing',
});
```

**Тип**
- "all" | "changed" | "missing" | "none"

---

### updateSourceMethod {#test-config-update-source-method}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.50</font><x-search>testConfig.updateSourceMethod</x-search>

Определяет, как обновлять снимки в исходном коде.
* `'patch'` - Создает файл унифицированного диффа, который можно использовать для последующего обновления исходного кода. Это значение по умолчанию.
* `'3way'` - Генерирует маркеры конфликта слияния в исходном коде. Это позволяет пользователю вручную выбрать соответствующие изменения, как если бы он разрешал конфликт слияния в IDE.
* `'overwrite'` - Перезаписывает исходный код новыми значениями снимков.

**Использование**

```js
testConfig.updateSourceMethod
```

**Тип**
- "overwrite" | "3way" | "patch"

---

### use {#test-config-use}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.use</x-search>

Глобальные параметры для всех тестов, например [testOptions.browserName](/api/class-testoptions.mdx#test-options-browser-name). Узнайте больше о [конфигурации](../test-configuration.mdx) и смотрите [доступные опции][TestOptions].

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    browserName: 'chromium',
  },
});
```

**Тип**
- [TestOptions]

---

### webServer {#test-config-web-server}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.webServer</x-search>

Запустите веб-сервер разработки (или несколько) во время тестов.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';
export default defineConfig({
  webServer: {
    command: 'npm run start',
    url: 'http://localhost:3000',
    timeout: 120 * 1000,
    reuseExistingServer: !process.env.CI,
  },
  use: {
    baseURL: 'http://localhost:3000/',
  },
});
```

Теперь вы можете использовать относительный путь при навигации по странице:

```js title="test.spec.ts"
import { test } from '@playwright/test';

test('test', async ({ page }) => {
  // Это приведет к http://localhost:3000/foo
  await page.goto('/foo');
});
```

Можно запустить несколько веб-серверов (или фоновых процессов):

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';
export default defineConfig({
  webServer: [
    {
      command: 'npm run start',
      url: 'http://localhost:3000',
      timeout: 120 * 1000,
      reuseExistingServer: !process.env.CI,
    },
    {
      command: 'npm run backend',
      url: 'http://localhost:3333',
      timeout: 120 * 1000,
      reuseExistingServer: !process.env.CI,
    }
  ],
  use: {
    baseURL: 'http://localhost:3000',
  },
});
```

**Тип**
- [Object] | [Array]&lt;[Object]&gt;
  - `command` [string]
    
    Команда оболочки для запуска. Например `npm run start`..
  - `cwd` [string] *(опционально)*
    
    Текущий рабочий каталог запущенного процесса, по умолчанию это каталог файла конфигурации.
  - `env` [Object]&lt;[string], [string]&gt; *(опционально)*
    
    Переменные окружения, которые следует установить для команды, по умолчанию `process.env`.
  - `ignoreHTTPSErrors` [boolean] *(опционально)*
    
    Указывает, следует ли игнорировать ошибки HTTPS при получении `url`. По умолчанию `false`.
  - `port` [number] *(опционально)*
    
    Порт, на котором ожидается ваш http-сервер. Он ждет, пока он не начнет принимать соединения. Должен быть указан либо `port`, либо `url`.
  - `reuseExistingServer` [boolean] *(опционально)*
    
    Если true, он будет повторно использовать существующий сервер на `port` или `url`, если он доступен. Если на этом `port` или `url` не запущен сервер, он выполнит команду для запуска нового сервера. Если `false`, он выдаст ошибку, если существующий процесс слушает на `port` или `url`. Это обычно следует установить в `!process.env.CI`, чтобы разрешить локальный сервер разработки при выполнении тестов локально.
  - `stdout` "pipe" | "ignore" *(опционально)*
    
    Если `"pipe"`, он будет перенаправлять stdout команды в stdout процесса. Если `"ignore"`, он будет игнорировать stdout команды. По умолчанию `"ignore"`.
  - `stderr` "pipe" | "ignore" *(опционально)*
    
    Указывает, следует ли перенаправлять stderr команды в stderr процесса или игнорировать его. По умолчанию `"pipe"`.
  - `timeout` [number] *(опционально)*
    
    Как долго ждать, чтобы процесс запустился и стал доступным в миллисекундах. По умолчанию 60000.
  - `gracefulShutdown` [Object] *(опционально)*
    - `signal` "SIGINT" | "SIGTERM"
      
      
    - `timeout` [number]
      
      
    Как завершить процесс. Если не указано, группа процессов будет принудительно завершена с помощью `SIGKILL`. Если указано `{ signal: 'SIGTERM', timeout: 500 }`, группе процессов отправляется сигнал `SIGTERM`, за которым следует `SIGKILL`, если она не завершится в течение 500мс. Вы также можете использовать `SIGINT` в качестве сигнала. Таймаут `0` означает, что сигнал `SIGKILL` не будет отправлен. Windows не поддерживает сигналы `SIGTERM` и `SIGINT`, поэтому эта опция игнорируется на Windows. Обратите внимание, что завершение работы контейнера Docker требует `SIGTERM`.
  - `url` [string] *(опционально)*
    
    URL на вашем http-сервере, который ожидается для возврата кода состояния 2xx, 3xx, 400, 401, 402 или 403, когда сервер готов принимать соединения. Перенаправления (коды состояния 3xx) отслеживаются, и новое местоположение проверяется. Должен быть указан либо `port`, либо `url`.

**Детали**

Если порт указан, Playwright Test будет ждать, пока он не станет доступным на `127.0.0.1` или `::1`, перед выполнением тестов. Если указан URL, Playwright Test будет ждать, пока URL не вернет код состояния 2xx, 3xx, 400, 401, 402 или 403 перед выполнением тестов.

Для непрерывной интеграции вы можете использовать опцию `reuseExistingServer: !process.env.CI`, которая не использует существующий сервер в CI. Чтобы увидеть stdout, вы можете установить переменную окружения `DEBUG=pw:webserver`.

Порт (но не URL) передается Playwright как [testOptions.baseURL](/api/class-testoptions.mdx#test-options-base-url). Например, порт `8080` создает `baseURL`, равный `http://localhost:8080`. Если `webServer` указан как массив, вы должны явно настроить `baseURL` (даже если он содержит только одну запись).

:::note

Также рекомендуется указывать [testOptions.baseURL](/api/class-testoptions.mdx#test-options-base-url) в конфигурации, чтобы тесты могли использовать относительные URL.
:::

---

### workers {#test-config-workers}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.workers</x-search>

Максимальное количество параллельных рабочих процессов, которые следует использовать для параллелизации тестов. Также может быть установлено в процентах от логических ядер ЦП, например, `'50%'`.

Playwright Test использует рабочие процессы для выполнения тестов. Всегда есть хотя бы один рабочий процесс, но можно использовать больше для ускорения выполнения тестов.

По умолчанию это половина количества логических ядер ЦП. Узнайте больше о [параллелизме и шардировании](../test-parallel.mdx) с Playwright Test.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  workers: 3,
});
```

**Тип**
- [number] | [string]

---

## Устарело

### snapshotDir {#test-config-snapshot-dir}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testConfig.snapshotDir</x-search>

:::warning[Не рекомендуется]

Используйте [testConfig.snapshotPathTemplate](/api/class-testconfig.mdx#test-config-snapshot-path-template) для настройки путей снимков.

:::

Базовый каталог, относительно файла конфигурации, для файлов снимков, создаваемых с помощью `toMatchSnapshot`. По умолчанию [testConfig.testDir](/api/class-testconfig.mdx#test-config-test-dir).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  snapshotDir: './snapshots',
});
```

**Тип**
- [string]

**Детали**

Каталог для каждого теста может быть доступен через [testInfo.snapshotDir](/api/class-testinfo.mdx#test-info-snapshot-dir) и [testInfo.snapshotPath()](/api/class-testinfo.mdx#test-info-snapshot-path).

Этот путь будет служить в качестве базового каталога для каталога снимков каждого тестового файла. Установка `snapshotDir` в `'snapshots'` приведет к тому, что [testInfo.snapshotDir](/api/class-testinfo.mdx#test-info-snapshot-dir) будет разрешен в `snapshots/a.spec.js-snapshots`.

[Accessibility]: /api/class-accessibility.mdx "Accessibility"
[Android]: /api/class-android.mdx "Android"
[AndroidDevice]: /api/class-androiddevice.mdx "AndroidDevice"
[AndroidInput]: /api/class-androidinput.mdx "AndroidInput"
[AndroidSocket]: /api/class-androidsocket.mdx "AndroidSocket"
[AndroidWebView]: /api/class-androidwebview.mdx "AndroidWebView"
[APIRequest]: /api/class-apirequest.mdx "APIRequest"
[APIRequestContext]: /api/class-apirequestcontext.mdx "APIRequestContext"
[APIResponse]: /api/class-apiresponse.mdx "APIResponse"
[APIResponseAssertions]: /api/class-apiresponseassertions.mdx "APIResponseAssertions"
[Browser]: /api/class-browser.mdx "Browser"
[BrowserContext]: /api/class-browsercontext.mdx "BrowserContext"
[BrowserServer]: /api/class-browserserver.mdx "BrowserServer"
[BrowserType]: /api/class-browsertype.mdx "BrowserType"
[CDPSession]: /api/class-cdpsession.mdx "CDPSession"
[Clock]: /api/class-clock.mdx "Clock"
[ConsoleMessage]: /api/class-consolemessage.mdx "ConsoleMessage"
[Coverage]: /api/class-coverage.mdx "Coverage"
[Dialog]: /api/class-dialog.mdx "Dialog"
[Download]: /api/class-download.mdx "Download"
[Electron]: /api/class-electron.mdx "Electron"
[ElectronApplication]: /api/class-electronapplication.mdx "ElectronApplication"
[ElementHandle]: /api/class-elementhandle.mdx "ElementHandle"
[FileChooser]: /api/class-filechooser.mdx "FileChooser"
[Frame]: /api/class-frame.mdx "Frame"
[FrameLocator]: /api/class-framelocator.mdx "FrameLocator"
[GenericAssertions]: /api/class-genericassertions.mdx "GenericAssertions"
[JSHandle]: /api/class-jshandle.mdx "JSHandle"
[Keyboard]: /api/class-keyboard.mdx "Keyboard"
[Locator]: /api/class-locator.mdx "Locator"
[LocatorAssertions]: /api/class-locatorassertions.mdx "LocatorAssertions"
[Logger]: /api/class-logger.mdx "Logger"
[Mouse]: /api/class-mouse.mdx "Mouse"
[Page]: /api/class-page.mdx "Page"
[PageAssertions]: /api/class-pageassertions.mdx "PageAssertions"
[Playwright]: /api/class-playwright.mdx "Playwright"
[PlaywrightAssertions]: /api/class-playwrightassertions.mdx "PlaywrightAssertions"
[Request]: /api/class-request.mdx "Request"
[Response]: /api/class-response.mdx "Response"
[Route]: /api/class-route.mdx "Route"
[Selectors]: /api/class-selectors.mdx "Selectors"
[SnapshotAssertions]: /api/class-snapshotassertions.mdx "SnapshotAssertions"
[TimeoutError]: /api/class-timeouterror.mdx "TimeoutError"
[Touchscreen]: /api/class-touchscreen.mdx "Touchscreen"
[Tracing]: /api/class-tracing.mdx "Tracing"
[Video]: /api/class-video.mdx "Video"
[WebError]: /api/class-weberror.mdx "WebError"
[WebSocket]: /api/class-websocket.mdx "WebSocket"
[WebSocketRoute]: /api/class-websocketroute.mdx "WebSocketRoute"
[Worker]: /api/class-worker.mdx "Worker"
[Fixtures]: /api/class-fixtures.mdx "Fixtures"
[FullConfig]: /api/class-fullconfig.mdx "FullConfig"
[FullProject]: /api/class-fullproject.mdx "FullProject"
[Location]: /api/class-location.mdx "Location"
[Test]: /api/class-test.mdx "Test"
[TestConfig]: /api/class-testconfig.mdx "TestConfig"
[TestInfo]: /api/class-testinfo.mdx "TestInfo"
[TestInfoError]: /api/class-testinfoerror.mdx "TestInfoError"
[TestOptions]: /api/class-testoptions.mdx "TestOptions"
[TestProject]: /api/class-testproject.mdx "TestProject"
[TestStepInfo]: /api/class-teststepinfo.mdx "TestStepInfo"
[WorkerInfo]: /api/class-workerinfo.mdx "WorkerInfo"
[Reporter]: /api/class-reporter.mdx "Reporter"
[Suite]: /api/class-suite.mdx "Suite"
[TestCase]: /api/class-testcase.mdx "TestCase"
[TestError]: /api/class-testerror.mdx "TestError"
[TestResult]: /api/class-testresult.mdx "TestResult"
[TestStep]: /api/class-teststep.mdx "TestStep"
[Element]: https://developer.mozilla.org/en-US/docs/Web/API/element "Element"
[EvaluationArgument]: /evaluating.mdx#evaluation-argument "EvaluationArgument"
[Promise]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"
[iterator]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols "Iterator"
[origin]: https://developer.mozilla.org/en-US/docs/Glossary/Origin "Origin"
[selector]: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors "selector"
[Serializable]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable"
[UIEvent.detail]: https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detail "UIEvent.detail"
[UnixTime]: https://en.wikipedia.org/wiki/Unix_time "Unix Time"
[xpath]: https://developer.mozilla.org/en-US/docs/Web/XPath "xpath"

[Array]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array"
[boolean]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean"
[Buffer]: https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer"
[ChildProcess]: https://nodejs.org/api/child_process.html "ChildProcess"
[Date]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date "Date"
[Error]: https://nodejs.org/api/errors.html#errors_class_error "Error"
[EventEmitter]: https://nodejs.org/api/events.html#events_class_eventemitter "EventEmitter"
[function]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function"
[FormData]: https://developer.mozilla.org/en-US/docs/Web/API/FormData "FormData"
[Map]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map "Map"
[Metadata]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object&lt;string, any&gt;"
[null]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null"
[number]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number"
[Object]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object"
[Promise]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"
[Readable]: https://nodejs.org/api/stream.html#stream_class_stream_readable "Readable"
[ReadStream]: https://nodejs.org/api/fs.html#class-fsreadstream "ReadStream"
[RegExp]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp"
[string]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"
[void]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void"
[URL]: https://nodejs.org/api/url.html "URL"
[URLSearchParams]: https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams "URLSearchParams"