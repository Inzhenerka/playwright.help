---
id: class-snapshotassertions
title: "SnapshotAssertions"
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import HTMLCard from '@site/src/components/HTMLCard';

Playwright предоставляет методы для сравнения скриншотов страниц и элементов с ожидаемыми значениями, хранящимися в файлах.

```js
expect(screenshot).toMatchSnapshot('landing-page.png');
```

---

## Методы

### toMatchSnapshot(name) {#snapshot-assertions-to-match-snapshot-1}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.22</font><x-search>snapshotAssertions.toMatchSnapshot(name)</x-search>

:::caution

Для сравнения скриншотов используйте [expect(page).toHaveScreenshot()](/api/class-pageassertions.mdx#page-assertions-to-have-screenshot-1) вместо этого.
:::

Убеждается, что переданное значение, будь то [string] или [Buffer], соответствует ожидаемому снимку, хранящемуся в директории тестовых снимков.

**Использование**

```js
// Базовое использование.
expect(await page.screenshot()).toMatchSnapshot('landing-page.png');

// Передайте параметры для настройки сравнения снимков и получения сгенерированного имени.
expect(await page.screenshot()).toMatchSnapshot('landing-page.png', {
  maxDiffPixels: 27, // допускается не более 27 различных пикселей.
});

// Настройте порог совпадения изображений.
expect(await page.screenshot()).toMatchSnapshot('landing-page.png', { threshold: 0.3 });

// Привнесите структуру в ваши файлы снимков, передавая сегменты пути к файлу.
expect(await page.screenshot()).toMatchSnapshot(['landing', 'step2.png']);
expect(await page.screenshot()).toMatchSnapshot(['landing', 'step3.png']);
```

Узнайте больше о [визуальных сравнениях](../test-snapshots.mdx).

Обратите внимание, что совпадение снимков работает только с тестовым раннером Playwright.

**Аргументы**
- `name` [string] | [Array]&lt;[string]&gt;<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="snapshot-assertions-to-match-snapshot-1-option-name"/><a href="#snapshot-assertions-to-match-snapshot-1-option-name" class="list-anchor">#</a>
  
  Имя снимка.
- `options` [Object] *(опционально)*
  - `maxDiffPixelRatio` [number] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="snapshot-assertions-to-match-snapshot-1-option-max-diff-pixel-ratio"/><a href="#snapshot-assertions-to-match-snapshot-1-option-max-diff-pixel-ratio" class="list-anchor">#</a>
    
    Допустимое соотношение пикселей, которые отличаются от общего количества пикселей, между `0` и `1`. По умолчанию настраивается с помощью `TestConfig.expect`. По умолчанию не задано.
  - `maxDiffPixels` [number] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="snapshot-assertions-to-match-snapshot-1-option-max-diff-pixels"/><a href="#snapshot-assertions-to-match-snapshot-1-option-max-diff-pixels" class="list-anchor">#</a>
    
    Допустимое количество пикселей, которые могут отличаться. По умолчанию настраивается с помощью `TestConfig.expect`. По умолчанию не задано.
  - `threshold` [number] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="snapshot-assertions-to-match-snapshot-1-option-threshold"/><a href="#snapshot-assertions-to-match-snapshot-1-option-threshold" class="list-anchor">#</a>
    
    Допустимая воспринимаемая разница в цвете в [цветовом пространстве YIQ](https://en.wikipedia.org/wiki/YIQ) между одним и тем же пикселем в сравниваемых изображениях, между нулем (строго) и единицей (свободно), по умолчанию настраивается с помощью `TestConfig.expect`. По умолчанию `0.2`.

---

### toMatchSnapshot(options) {#snapshot-assertions-to-match-snapshot-2}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.22</font><x-search>snapshotAssertions.toMatchSnapshot(options)</x-search>

:::caution

Для сравнения скриншотов используйте [expect(page).toHaveScreenshot()](/api/class-pageassertions.mdx#page-assertions-to-have-screenshot-2) вместо этого.
:::

Убеждается, что переданное значение, будь то [string] или [Buffer], соответствует ожидаемому снимку, хранящемуся в директории тестовых снимков.

**Использование**

```js
// Базовое использование, и имя файла выводится из имени теста.
expect(await page.screenshot()).toMatchSnapshot();

// Передайте параметры для настройки сравнения снимков и получения сгенерированного имени.
expect(await page.screenshot()).toMatchSnapshot({
  maxDiffPixels: 27, // допускается не более 27 различных пикселей.
});

// Настройте порог совпадения изображений и имя снимка.
expect(await page.screenshot()).toMatchSnapshot({
  name: 'landing-page.png',
  threshold: 0.3,
});
```

Узнайте больше о [визуальных сравнениях](../test-snapshots.mdx).

Обратите внимание, что совпадение снимков работает только с тестовым раннером Playwright.

**Аргументы**
- `options` [Object] *(опционально)*
  - `maxDiffPixelRatio` [number] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="snapshot-assertions-to-match-snapshot-2-option-max-diff-pixel-ratio"/><a href="#snapshot-assertions-to-match-snapshot-2-option-max-diff-pixel-ratio" class="list-anchor">#</a>
    
    Допустимое соотношение пикселей, которые отличаются от общего количества пикселей, между `0` и `1`. По умолчанию настраивается с помощью `TestConfig.expect`. По умолчанию не задано.
  - `maxDiffPixels` [number] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="snapshot-assertions-to-match-snapshot-2-option-max-diff-pixels"/><a href="#snapshot-assertions-to-match-snapshot-2-option-max-diff-pixels" class="list-anchor">#</a>
    
    Допустимое количество пикселей, которые могут отличаться. По умолчанию настраивается с помощью `TestConfig.expect`. По умолчанию не задано.
  - `name` [string] | [Array]&lt;[string]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="snapshot-assertions-to-match-snapshot-2-option-name"/><a href="#snapshot-assertions-to-match-snapshot-2-option-name" class="list-anchor">#</a>
    
    Имя снимка. Если не передано, используется имя теста и порядковые номера при многократных вызовах.
  - `threshold` [number] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="snapshot-assertions-to-match-snapshot-2-option-threshold"/><a href="#snapshot-assertions-to-match-snapshot-2-option-threshold" class="list-anchor">#</a>
    
    Допустимая воспринимаемая разница в цвете в [цветовом пространстве YIQ](https://en.wikipedia.org/wiki/YIQ) между одним и тем же пикселем в сравниваемых изображениях, между нулем (строго) и единицей (свободно), по умолчанию настраивается с помощью `TestConfig.expect`. По умолчанию `0.2`.