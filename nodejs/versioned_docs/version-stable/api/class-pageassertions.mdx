---
id: class-pageassertions
title: "PageAssertions"
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import HTMLCard from '@site/src/components/HTMLCard';

Класс [PageAssertions] предоставляет методы утверждений, которые могут быть использованы для проверки состояния [Page] в тестах.

```js
import { test, expect } from '@playwright/test';

test('navigates to login', async ({ page }) => {
  // ...
  await page.getByText('Sign in').click();
  await expect(page).toHaveURL(/.*\/login/);
});
```

---

## Методы

### toHaveScreenshot(name) {#page-assertions-to-have-screenshot-1}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.23</font><x-search>pageAssertions.toHaveScreenshot(name)</x-search>

Эта функция будет ждать, пока два последовательных скриншота страницы не дадут одинаковый результат, а затем сравнит последний скриншот с ожидаемым.

**Использование**

```js
await expect(page).toHaveScreenshot('image.png');
```

Обратите внимание, что утверждения скриншотов работают только с тестовым раннером Playwright.

**Аргументы**
- `name` [string] | [Array]&lt;[string]&gt;<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-1-option-name"/><a href="#page-assertions-to-have-screenshot-1-option-name" class="list-anchor">#</a>
  
  Имя снимка.
- `options` [Object] *(опционально)*
  - `animations` "disabled" | "allow" *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-1-option-animations"/><a href="#page-assertions-to-have-screenshot-1-option-animations" class="list-anchor">#</a>
    
    При установке в `"disabled"`, останавливает CSS-анимации, CSS-переходы и веб-анимации. Анимации получают разное обращение в зависимости от их продолжительности:
    * конечные анимации ускоряются до завершения, чтобы они вызвали событие `transitionend`.
    * бесконечные анимации отменяются до начального состояния, а затем воспроизводятся после скриншота.
    
    По умолчанию `"disabled"`, что отключает анимации.
  - `caret` "hide" | "initial" *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-1-option-caret"/><a href="#page-assertions-to-have-screenshot-1-option-caret" class="list-anchor">#</a>
    
    При установке в `"hide"`, скриншот скроет текстовый курсор. При установке в `"initial"`, поведение текстового курсора не изменится. По умолчанию `"hide"`.
  - `clip` [Object] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-1-option-clip"/><a href="#page-assertions-to-have-screenshot-1-option-clip" class="list-anchor">#</a>
    - `x` [number]
      
      x-координата верхнего левого угла области обрезки
    - `y` [number]
      
      y-координата верхнего левого угла области обрезки
    - `width` [number]
      
      ширина области обрезки
    - `height` [number]
      
      высота области обрезки
    
    Объект, который определяет обрезку результирующего изображения.
  - `fullPage` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-1-option-full-page"/><a href="#page-assertions-to-have-screenshot-1-option-full-page" class="list-anchor">#</a>
    
    Если true, делает скриншот всей прокручиваемой страницы, вместо текущей видимой области. По умолчанию `false`.
  - `mask` [Array]&lt;[Locator]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-1-option-mask"/><a href="#page-assertions-to-have-screenshot-1-option-mask" class="list-anchor">#</a>
    
    Укажите локаторы, которые должны быть замаскированы при создании скриншота. Замаскированные элементы будут покрыты розовым прямоугольником `#FF00FF` (настраивается с помощью [maskColor](/api/class-pageassertions.mdx#page-assertions-to-have-screenshot-1-option-mask-color)), который полностью покрывает их ограничивающий прямоугольник. Маска также применяется к невидимым элементам, см. [Совпадение только видимых элементов](../locators.mdx#matching-only-visible-elements), чтобы отключить это.
  - `maskColor` [string] *(опционально)* <font size="2">Добавлено в: v1.35</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-1-option-mask-color"/><a href="#page-assertions-to-have-screenshot-1-option-mask-color" class="list-anchor">#</a>
    
    Укажите цвет наложения для замаскированных элементов в [формате цвета CSS](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value). Цвет по умолчанию - розовый `#FF00FF`.
  - `maxDiffPixelRatio` [number] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-1-option-max-diff-pixel-ratio"/><a href="#page-assertions-to-have-screenshot-1-option-max-diff-pixel-ratio" class="list-anchor">#</a>
    
    Допустимое соотношение пикселей, которые отличаются от общего количества пикселей, между `0` и `1`. По умолчанию настраивается с помощью `TestConfig.expect`. По умолчанию не установлено.
  - `maxDiffPixels` [number] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-1-option-max-diff-pixels"/><a href="#page-assertions-to-have-screenshot-1-option-max-diff-pixels" class="list-anchor">#</a>
    
    Допустимое количество пикселей, которые могут отличаться. По умолчанию настраивается с помощью `TestConfig.expect`. По умолчанию не установлено.
  - `omitBackground` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-1-option-omit-background"/><a href="#page-assertions-to-have-screenshot-1-option-omit-background" class="list-anchor">#</a>
    
    Скрывает белый фон по умолчанию и позволяет делать скриншоты с прозрачностью. Не применимо к изображениям `jpeg`. По умолчанию `false`.
  - `scale` "css" | "device" *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-1-option-scale"/><a href="#page-assertions-to-have-screenshot-1-option-scale" class="list-anchor">#</a>
    
    При установке в `"css"`, скриншот будет иметь один пиксель на каждый css пиксель на странице. Для устройств с высоким разрешением это позволит уменьшить размер скриншотов. Использование опции `"device"` создаст один пиксель на каждый пиксель устройства, так что скриншоты устройств с высоким разрешением будут в два раза больше или даже больше.
    
    По умолчанию `"css"`.
  - `stylePath` [string] | [Array]&lt;[string]&gt; *(опционально)* <font size="2">Добавлено в: v1.41</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-1-option-style-path"/><a href="#page-assertions-to-have-screenshot-1-option-style-path" class="list-anchor">#</a>
    
    Имя файла, содержащего таблицу стилей, которую нужно применить при создании скриншота. Здесь вы можете скрыть динамические элементы, сделать элементы невидимыми или изменить их свойства, чтобы помочь вам создавать повторяемые скриншоты. Эта таблица стилей проникает в Shadow DOM и применяется к внутренним фреймам.
  - `threshold` [number] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-1-option-threshold"/><a href="#page-assertions-to-have-screenshot-1-option-threshold" class="list-anchor">#</a>
    
    Допустимая воспринимаемая разница в цвете в [цветовом пространстве YIQ](https://en.wikipedia.org/wiki/YIQ) между одним и тем же пикселем в сравниваемых изображениях, между нулем (строго) и единицей (свободно), по умолчанию настраивается с помощью `TestConfig.expect`. По умолчанию `0.2`.
  - `timeout` [number] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-1-option-timeout"/><a href="#page-assertions-to-have-screenshot-1-option-timeout" class="list-anchor">#</a>
    
    Время для повторной попытки утверждения в миллисекундах. По умолчанию `timeout` в `TestConfig.expect`.

**Возвращает**
- [Promise]&lt;[void]&gt;<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-1-return"/><a href="#page-assertions-to-have-screenshot-1-return" class="list-anchor">#</a>

---

### toHaveScreenshot(options) {#page-assertions-to-have-screenshot-2}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.23</font><x-search>pageAssertions.toHaveScreenshot(options)</x-search>

Эта функция будет ждать, пока два последовательных скриншота страницы не дадут одинаковый результат, а затем сравнит последний скриншот с ожидаемым.

**Использование**

```js
await expect(page).toHaveScreenshot();
```

Обратите внимание, что утверждения скриншотов работают только с тестовым раннером Playwright.

**Аргументы**
- `options` [Object] *(опционально)*
  - `animations` "disabled" | "allow" *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-2-option-animations"/><a href="#page-assertions-to-have-screenshot-2-option-animations" class="list-anchor">#</a>
    
    При установке в `"disabled"`, останавливает CSS-анимации, CSS-переходы и веб-анимации. Анимации получают разное обращение в зависимости от их продолжительности:
    * конечные анимации ускоряются до завершения, чтобы они вызвали событие `transitionend`.
    * бесконечные анимации отменяются до начального состояния, а затем воспроизводятся после скриншота.
    
    По умолчанию `"disabled"`, что отключает анимации.
  - `caret` "hide" | "initial" *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-2-option-caret"/><a href="#page-assertions-to-have-screenshot-2-option-caret" class="list-anchor">#</a>
    
    При установке в `"hide"`, скриншот скроет текстовый курсор. При установке в `"initial"`, поведение текстового курсора не изменится. По умолчанию `"hide"`.
  - `clip` [Object] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-2-option-clip"/><a href="#page-assertions-to-have-screenshot-2-option-clip" class="list-anchor">#</a>
    - `x` [number]
      
      x-координата верхнего левого угла области обрезки
    - `y` [number]
      
      y-координата верхнего левого угла области обрезки
    - `width` [number]
      
      ширина области обрезки
    - `height` [number]
      
      высота области обрезки
    
    Объект, который определяет обрезку результирующего изображения.
  - `fullPage` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-2-option-full-page"/><a href="#page-assertions-to-have-screenshot-2-option-full-page" class="list-anchor">#</a>
    
    Если true, делает скриншот всей прокручиваемой страницы, вместо текущей видимой области. По умолчанию `false`.
  - `mask` [Array]&lt;[Locator]&gt; *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-2-option-mask"/><a href="#page-assertions-to-have-screenshot-2-option-mask" class="list-anchor">#</a>
    
    Укажите локаторы, которые должны быть замаскированы при создании скриншота. Замаскированные элементы будут покрыты розовым прямоугольником `#FF00FF` (настраивается с помощью [maskColor](/api/class-pageassertions.mdx#page-assertions-to-have-screenshot-2-option-mask-color)), который полностью покрывает их ограничивающий прямоугольник. Маска также применяется к невидимым элементам, см. [Совпадение только видимых элементов](../locators.mdx#matching-only-visible-elements), чтобы отключить это.
  - `maskColor` [string] *(опционально)* <font size="2">Добавлено в: v1.35</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-2-option-mask-color"/><a href="#page-assertions-to-have-screenshot-2-option-mask-color" class="list-anchor">#</a>
    
    Укажите цвет наложения для замаскированных элементов в [формате цвета CSS](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value). Цвет по умолчанию - розовый `#FF00FF`.
  - `maxDiffPixelRatio` [number] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-2-option-max-diff-pixel-ratio"/><a href="#page-assertions-to-have-screenshot-2-option-max-diff-pixel-ratio" class="list-anchor">#</a>
    
    Допустимое соотношение пикселей, которые отличаются от общего количества пикселей, между `0` и `1`. По умолчанию настраивается с помощью `TestConfig.expect`. По умолчанию не установлено.
  - `maxDiffPixels` [number] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-2-option-max-diff-pixels"/><a href="#page-assertions-to-have-screenshot-2-option-max-diff-pixels" class="list-anchor">#</a>
    
    Допустимое количество пикселей, которые могут отличаться. По умолчанию настраивается с помощью `TestConfig.expect`. По умолчанию не установлено.
  - `omitBackground` [boolean] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-2-option-omit-background"/><a href="#page-assertions-to-have-screenshot-2-option-omit-background" class="list-anchor">#</a>
    
    Скрывает белый фон по умолчанию и позволяет делать скриншоты с прозрачностью. Не применимо к изображениям `jpeg`. По умолчанию `false`.
  - `scale` "css" | "device" *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-2-option-scale"/><a href="#page-assertions-to-have-screenshot-2-option-scale" class="list-anchor">#</a>
    
    При установке в `"css"`, скриншот будет иметь один пиксель на каждый css пиксель на странице. Для устройств с высоким разрешением это позволит уменьшить размер скриншотов. Использование опции `"device"` создаст один пиксель на каждый пиксель устройства, так что скриншоты устройств с высоким разрешением будут в два раза больше или даже больше.
    
    По умолчанию `"css"`.
  - `stylePath` [string] | [Array]&lt;[string]&gt; *(опционально)* <font size="2">Добавлено в: v1.41</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-2-option-style-path"/><a href="#page-assertions-to-have-screenshot-2-option-style-path" class="list-anchor">#</a>
    
    Имя файла, содержащего таблицу стилей, которую нужно применить при создании скриншота. Здесь вы можете скрыть динамические элементы, сделать элементы невидимыми или изменить их свойства, чтобы помочь вам создавать повторяемые скриншоты. Эта таблица стилей проникает в Shadow DOM и применяется к внутренним фреймам.
  - `threshold` [number] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-2-option-threshold"/><a href="#page-assertions-to-have-screenshot-2-option-threshold" class="list-anchor">#</a>
    
    Допустимая воспринимаемая разница в цвете в [цветовом пространстве YIQ](https://en.wikipedia.org/wiki/YIQ) между одним и тем же пикселем в сравниваемых изображениях, между нулем (строго) и единицей (свободно), по умолчанию настраивается с помощью `TestConfig.expect`. По умолчанию `0.2`.
  - `timeout` [number] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-2-option-timeout"/><a href="#page-assertions-to-have-screenshot-2-option-timeout" class="list-anchor">#</a>
    
    Время для повторной попытки утверждения в миллисекундах. По умолчанию `timeout` в `TestConfig.expect`.

**Возвращает**
- [Promise]&lt;[void]&gt;<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-screenshot-2-return"/><a href="#page-assertions-to-have-screenshot-2-return" class="list-anchor">#</a>

---

### toHaveTitle {#page-assertions-to-have-title}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.20</font><x-search>pageAssertions.toHaveTitle</x-search>

Убеждается, что страница имеет заданный заголовок.

**Использование**

```js
await expect(page).toHaveTitle(/.*checkout/);
```

**Аргументы**
- `titleOrRegExp` [string] | [RegExp] <font size="2">Добавлено в: v1.18</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-title-option-title-or-reg-exp"/><a href="#page-assertions-to-have-title-option-title-or-reg-exp" class="list-anchor">#</a>
  
  Ожидаемый заголовок или регулярное выражение.
- `options` [Object] *(опционально)*
  - `timeout` [number] *(опционально)* <font size="2">Добавлено в: v1.18</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-title-option-timeout"/><a href="#page-assertions-to-have-title-option-timeout" class="list-anchor">#</a>
    
    Время для повторной попытки утверждения в миллисекундах. По умолчанию `timeout` в `TestConfig.expect`.

**Возвращает**
- [Promise]&lt;[void]&gt;<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-title-return"/><a href="#page-assertions-to-have-title-return" class="list-anchor">#</a>

---

### toHaveURL {#page-assertions-to-have-url}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.20</font><x-search>pageAssertions.toHaveURL</x-search>

Убеждается, что страница перешла на заданный URL.

**Использование**

```js
// Проверка, что URL страницы равен 'https://playwright.dev/docs/intro' (включая строку запроса)
await expect(page).toHaveURL('https://playwright.dev/docs/intro');

// Проверка, что URL страницы содержит 'doc', за которым следует необязательная 's', за которой следует '/'
await expect(page).toHaveURL(/docs?\//);

// Проверка, что предикат удовлетворен
// Например: проверка строк запроса
await expect(page).toHaveURL(url => {
  const params = url.searchParams;
  return params.has('search') && params.has('options') && params.get('id') === '5';
});
```

**Аргументы**
- `url` [string] | [RegExp] | [function]\([URL]\):[boolean] <font size="2">Добавлено в: v1.18</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-url-option-url"/><a href="#page-assertions-to-have-url-option-url" class="list-anchor">#</a>
  
  Ожидаемая строка URL, регулярное выражение или предикат, получающий [URL] для совпадения. Когда [baseURL](/api/class-browser.mdx#browser-new-context-option-base-url) предоставляется через параметры контекста и аргумент `url` является строкой, два значения объединяются с помощью конструктора [`new URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) и используются для сравнения с текущим URL браузера.
- `options` [Object] *(опционально)*
  - `ignoreCase` [boolean] *(опционально)* <font size="2">Добавлено в: v1.44</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-url-option-ignore-case"/><a href="#page-assertions-to-have-url-option-ignore-case" class="list-anchor">#</a>
    
    Выполнять ли нечувствительное к регистру совпадение. Опция [ignoreCase](/api/class-pageassertions.mdx#page-assertions-to-have-url-option-ignore-case) имеет приоритет над соответствующим параметром регулярного выражения, если указано. Предоставленный предикат игнорирует этот флаг.
  - `timeout` [number] *(опционально)* <font size="2">Добавлено в: v1.18</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-url-option-timeout"/><a href="#page-assertions-to-have-url-option-timeout" class="list-anchor">#</a>
    
    Время для повторной попытки утверждения в миллисекундах. По умолчанию `timeout` в `TestConfig.expect`.

**Возвращает**
- [Promise]&lt;[void]&gt;<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="page-assertions-to-have-url-return"/><a href="#page-assertions-to-have-url-return" class="list-anchor">#</a>

---

## Свойства

### not {#page-assertions-not}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.20</font><x-search>pageAssertions.not</x-search>

Делает проверку утверждения на противоположное условие. Например, этот код проверяет, что URL страницы не содержит `"error"`:

```js
await expect(page).not.toHaveURL('error');
```

**Использование**

```js
expect(page).not
```

**Тип**
- [PageAssertions]