---
id: class-teststepinfo
title: "TestStepInfo"
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import HTMLCard from '@site/src/components/HTMLCard';

`TestStepInfo` содержит информацию о текущем выполняемом шаге теста. Он передается в качестве аргумента в функцию шага. `TestStepInfo` предоставляет утилиты для управления выполнением шага теста.

```js
import { test, expect } from '@playwright/test';

test('basic test', async ({ page, browserName }) => {
  await test.step('check some behavior', async step => {
    step.skip(browserName === 'webkit', 'The feature is not available in WebKit');
    // ... остальной код шага
  });
});
```

---

## Методы

### attach {#test-step-info-attach}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.51</font><x-search>testStepInfo.attach</x-search>

Прикрепляет значение или файл с диска к текущему шагу теста. Некоторые репортеры отображают вложения шагов теста. Необходимо указать либо [path](/api/class-teststepinfo.mdx#test-step-info-attach-option-path), либо [body](/api/class-teststepinfo.mdx#test-step-info-attach-option-body), но не оба. Вызов этого метода будет относить вложение к шагу, в отличие от [testInfo.attach()](/api/class-testinfo.mdx#test-info-attach), который сохраняет все вложения на уровне теста.

Например, вы можете прикрепить скриншот к шагу теста:

```js
import { test, expect } from '@playwright/test';

test('basic test', async ({ page }) => {
  await page.goto('https://playwright.dev');
  await test.step('check page rendering', async step => {
    const screenshot = await page.screenshot();
    await step.attach('screenshot', { body: screenshot, contentType: 'image/png' });
  });
});
```

Или вы можете прикрепить файлы, возвращаемые вашими API:

```js
import { test, expect } from '@playwright/test';
import { download } from './my-custom-helpers';

test('basic test', async ({}) => {
  await test.step('check download behavior', async step => {
    const tmpPath = await download('a');
    await step.attach('downloaded', { path: tmpPath });
  });
});
```

:::note
[testStepInfo.attach()](/api/class-teststepinfo.mdx#test-step-info-attach) автоматически заботится о копировании прикрепленных файлов в место, доступное для репортеров. Вы можете безопасно удалить вложение после ожидания вызова attach.
:::

**Использование**

```js
await testStepInfo.attach(name);
await testStepInfo.attach(name, options);
```

**Аргументы**
- `name` [string]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="test-step-info-attach-option-name"/><a href="#test-step-info-attach-option-name" class="list-anchor">#</a>
  
  Имя вложения. Имя также будет очищено и использовано в качестве префикса имени файла при сохранении на диск.
- `options` [Object] *(необязательно)*
  - `body` [string] | [Buffer] *(необязательно)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="test-step-info-attach-option-body"/><a href="#test-step-info-attach-option-body" class="list-anchor">#</a>
    
    Содержимое вложения. Взаимно исключает [path](/api/class-teststepinfo.mdx#test-step-info-attach-option-path).
  - `contentType` [string] *(необязательно)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="test-step-info-attach-option-content-type"/><a href="#test-step-info-attach-option-content-type" class="list-anchor">#</a>
    
    Тип содержимого этого вложения для правильного отображения в отчете, например `'application/json'` или `'image/png'`. Если не указано, тип содержимого определяется на основе [path](/api/class-teststepinfo.mdx#test-step-info-attach-option-path) или по умолчанию устанавливается в `text/plain` для [string] вложений и `application/octet-stream` для [Buffer] вложений.
  - `path` [string] *(необязательно)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="test-step-info-attach-option-path"/><a href="#test-step-info-attach-option-path" class="list-anchor">#</a>
    
    Путь в файловой системе к прикрепленному файлу. Взаимно исключает [body](/api/class-teststepinfo.mdx#test-step-info-attach-option-body).

**Возвращает**
- [Promise]&lt;[void]&gt;<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="test-step-info-attach-return"/><a href="#test-step-info-attach-return" class="list-anchor">#</a>

---

### skip() {#test-step-info-skip-1}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.51</font><x-search>testStepInfo.skip()</x-search>

Прерывает текущий выполняемый шаг и помечает его как пропущенный. Полезно для шагов, которые в данный момент не проходят и планируются к исправлению в ближайшее время.

**Использование**

```js
import { test, expect } from '@playwright/test';

test('my test', async ({ page }) => {
  await test.step('check expectations', async step => {
    step.skip();
    // тело шага ниже не будет выполнено
    // ...
  });
});
```

---

### skip(condition) {#test-step-info-skip-2}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.51</font><x-search>testStepInfo.skip(condition)</x-search>

Условно прерывает текущий выполняемый шаг и помечает его как пропущенный с необязательным описанием. Полезно для шагов, которые не должны выполняться в некоторых случаях.

**Использование**

```js
import { test, expect } from '@playwright/test';

test('my test', async ({ page, isMobile }) => {
  await test.step('check desktop expectations', async step => {
    step.skip(isMobile, 'not present in the mobile layout');
    // тело шага ниже не будет выполнено
    // ...
  });
});
```

**Аргументы**
- `condition` [boolean]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="test-step-info-skip-2-option-condition"/><a href="#test-step-info-skip-2-option-condition" class="list-anchor">#</a>
  
  Условие пропуска. Шаг теста пропускается, когда условие равно `true`.
- `description` [string] *(необязательно)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="test-step-info-skip-2-option-description"/><a href="#test-step-info-skip-2-option-description" class="list-anchor">#</a>
  
  Необязательное описание, которое будет отражено в отчете о тесте.