---
id: class-testoptions
title: "TestOptions"
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import HTMLCard from '@site/src/components/HTMLCard';

Playwright Test предоставляет множество опций для настройки тестовой среды, [Browser], [BrowserContext] и других параметров.

Эти опции обычно задаются в [файле конфигурации](../test-configuration.mdx) через [testConfig.use](/api/class-testconfig.mdx#test-config-use) и [testProject.use](/api/class-testproject.mdx#test-project-use).

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';
export default defineConfig({
  use: {
    headless: false,
    viewport: { width: 1280, height: 720 },
    ignoreHTTPSErrors: true,
    video: 'on-first-retry',
  },
});
```

В качестве альтернативы, с помощью [test.use()](/api/class-test.mdx#test-use) вы можете переопределить некоторые опции для конкретного файла.

```js title="example.spec.ts"
import { test, expect } from '@playwright/test';

// Запуск тестов в этом файле с портретным представлением.
test.use({ viewport: { width: 600, height: 900 } });

test('мой портретный тест', async ({ page }) => {
  // ...
});
```

---

## Свойства

### acceptDownloads {#test-options-accept-downloads}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.acceptDownloads</x-search>

Определяет, следует ли автоматически загружать все вложения. По умолчанию `true`, что означает, что все загрузки принимаются.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    acceptDownloads: false,
  },
});
```

**Тип**
- [boolean]

---

### actionTimeout {#test-options-action-timeout}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.actionTimeout</x-search>

Задает таймаут по умолчанию для каждого действия Playwright в миллисекундах, по умолчанию 0 (без таймаута).

Это таймаут по умолчанию для всех действий Playwright, аналогичный тому, который настраивается через [page.setDefaultTimeout()](/api/class-page.mdx#page-set-default-timeout).

**Использование**

```js
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  use: {
    /* Максимальное время, которое может занять каждое действие, такое как `click()`. По умолчанию 0 (без ограничения). */
    actionTimeout: 0,
  },
});
```

Узнайте больше о [различных таймаутах](../test-timeouts.mdx).

**Тип**
- [number]

---

### baseURL {#test-options-base-url}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.baseURL</x-search>

При использовании [page.goto()](/api/class-page.mdx#page-goto), [page.route()](/api/class-page.mdx#page-route), [page.waitForURL()](/api/class-page.mdx#page-wait-for-url), [page.waitForRequest()](/api/class-page.mdx#page-wait-for-request), или [page.waitForResponse()](/api/class-page.mdx#page-wait-for-response) учитывается базовый URL, используя конструктор [`URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) для построения соответствующего URL. По умолчанию не установлен. Примеры:
* baseURL: `http://localhost:3000` и переход к `/bar.html` приводит к `http://localhost:3000/bar.html`
* baseURL: `http://localhost:3000/foo/` и переход к `./bar.html` приводит к `http://localhost:3000/foo/bar.html`
* baseURL: `http://localhost:3000/foo` (без завершающего слэша) и переход к `./bar.html` приводит к `http://localhost:3000/bar.html`

**Использование**

```js
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  use: {
    /* Базовый URL для использования в действиях, таких как `await page.goto('/')`. */
    baseURL: 'http://localhost:3000',
  },
});
```

**Тип**
- [string]

---

### browserName {#test-options-browser-name}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.browserName</x-search>

Имя браузера, в котором выполняются тесты. По умолчанию `'chromium'`. Чаще всего вы должны установить `browserName` в вашем [TestConfig]:

**Использование**

```js title="playwright.config.ts"
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  use: {
    browserName: 'firefox',
  },
});
```

**Тип**
- "chromium" | "firefox" | "webkit"

---

### bypassCSP {#test-options-bypass-csp}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.bypassCSP</x-search>

Переключает обход политики безопасности контента страницы. По умолчанию `false`.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    bypassCSP: true,
  }
});
```

**Тип**
- [boolean]

---

### channel {#test-options-channel}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.channel</x-search>

Канал распространения браузера.

Используйте "chromium", чтобы [включить новый безголовый режим](../browsers.mdx#chromium-new-headless-mode).

Используйте "chrome", "chrome-beta", "chrome-dev", "chrome-canary", "msedge", "msedge-beta", "msedge-dev" или "msedge-canary", чтобы использовать брендированные [Google Chrome и Microsoft Edge](../browsers.mdx#google-chrome--microsoft-edge).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  projects: [
    {
      name: 'Microsoft Edge',
      use: {
        ...devices['Desktop Edge'],
        channel: 'msedge'
      },
    },
  ]
});
```

**Тип**
- [string]

---

### clientCertificates {#test-options-client-certificates}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: 1.46</font><x-search>testOptions.clientCertificates</x-search>

TLS-аутентификация клиента позволяет серверу запрашивать клиентский сертификат и проверять его.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    clientCertificates: [{
      origin: 'https://example.com',
      certPath: './cert.pem',
      keyPath: './key.pem',
      passphrase: 'mysecretpassword',
    }],
  },
});
```

**Тип**
- [Array]&lt;[Object]&gt;
  - `origin` [string]
    
    Точный источник, для которого сертификат действителен. Источник включает протокол `https`, имя хоста и, возможно, порт.
  - `certPath` [string] *(опционально)*
    
    Путь к файлу с сертификатом в формате PEM.
  - `cert` [Buffer] *(опционально)*
    
    Прямое значение сертификата в формате PEM.
  - `keyPath` [string] *(опционально)*
    
    Путь к файлу с закрытым ключом в формате PEM.
  - `key` [Buffer] *(опционально)*
    
    Прямое значение закрытого ключа в формате PEM.
  - `pfxPath` [string] *(опционально)*
    
    Путь к PFX или PKCS12 закодированному закрытому ключу и цепочке сертификатов.
  - `pfx` [Buffer] *(опционально)*
    
    Прямое значение PFX или PKCS12 закодированного закрытого ключа и цепочки сертификатов.
  - `passphrase` [string] *(опционально)*
    
    Пароль для закрытого ключа (PEM или PFX).

**Подробности**

Массив клиентских сертификатов, которые будут использоваться. Каждый объект сертификата должен иметь либо оба `certPath` и `keyPath`, либо один `pfxPath`, либо их соответствующие прямые значения (`cert` и `key`, или `pfx`). Опционально, свойство `passphrase` должно быть предоставлено, если сертификат зашифрован. Свойство `origin` должно быть предоставлено с точным соответствием к исходному запросу, для которого сертификат действителен.

:::note

При использовании WebKit на macOS доступ к `localhost` не будет использовать клиентские сертификаты. Вы можете сделать это работоспособным, заменив `localhost` на `local.playwright`.
:::

---

### colorScheme {#test-options-color-scheme}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.colorScheme</x-search>

Эмулирует медиа-функцию [prefers-colors-scheme](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme), поддерживаемые значения: `'light'` и `'dark'`. См. [page.emulateMedia()](/api/class-page.mdx#page-emulate-media) для получения дополнительных сведений. Передача `null` сбрасывает эмуляцию на системные настройки по умолчанию. По умолчанию `'light'`.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    colorScheme: 'dark',
  },
});
```

**Тип**
- [null] | "light" | "dark" | "no-preference"

---

### connectOptions {#test-options-connect-options}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.connectOptions</x-search>

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    connectOptions: {
      wsEndpoint: 'ws://localhost:5678',
    },
  },
});
```

Когда указаны параметры подключения, стандартные [fixtures.browser](/api/class-fixtures.mdx#fixtures-browser), [fixtures.context](/api/class-fixtures.mdx#fixtures-context) и [fixtures.page](/api/class-fixtures.mdx#fixtures-page) используют удаленный браузер вместо запуска браузера локально, и любые параметры запуска, такие как [testOptions.headless](/api/class-testoptions.mdx#test-options-headless) или [testOptions.channel](/api/class-testoptions.mdx#test-options-channel) игнорируются.

**Тип**
- [void] | [Object]
  - `wsEndpoint` [string]
    
    Веб-сокет конечная точка браузера для подключения.
  - `headers` [void] | [Object]&lt;[string], [string]&gt; *(опционально)*
    
    Дополнительные HTTP заголовки, которые будут отправлены с запросом на подключение веб-сокета. Опционально.
  - `timeout` [number] *(опционально)*
    
    Таймаут в миллисекундах для установления соединения. Опционально, по умолчанию без таймаута.
  - `exposeNetwork` [string] *(опционально)*
    
    Опция для раскрытия сети, доступной на подключающемся клиенте, браузеру, к которому подключаются. См. [browserType.connect()](/api/class-browsertype.mdx#browser-type-connect) для получения дополнительных сведений.

---

### contextOptions {#test-options-context-options}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.contextOptions</x-search>

Опции, используемые для создания контекста, передаваемые в [browser.newContext()](/api/class-browser.mdx#browser-new-context). Конкретные опции, такие как [testOptions.viewport](/api/class-testoptions.mdx#test-options-viewport), имеют приоритет над этим.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    contextOptions: {
      reducedMotion: 'reduce',
    },
  },
});
```

**Тип**
- [Object]

---

### deviceScaleFactor {#test-options-device-scale-factor}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.deviceScaleFactor</x-search>

Укажите коэффициент масштабирования устройства (можно рассматривать как dpr). По умолчанию `1`. Узнайте больше о [эмуляции устройств с коэффициентом масштабирования устройства](../emulation.mdx#devices).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    viewport: { width: 2560, height: 1440 },
    deviceScaleFactor: 2,
  },
});
```

**Тип**
- [number]

---

### extraHTTPHeaders {#test-options-extra-http-headers}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.extraHTTPHeaders</x-search>

Объект, содержащий дополнительные HTTP заголовки, которые будут отправлены с каждым запросом. По умолчанию отсутствуют.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    extraHTTPHeaders: {
      'X-My-Header': 'value',
    },
  },
});
```

**Тип**
- [Object]&lt;[string], [string]&gt;

---

### geolocation {#test-options-geolocation}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.geolocation</x-search>

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    geolocation: { longitude: 12.492507, latitude: 41.889938 },
  },
});
```

Узнайте больше о [геолокации](../emulation.mdx#color-scheme-and-media).

**Тип**
- [Object]
  - `latitude` [number]
    
    Широта от -90 до 90.
  - `longitude` [number]
    
    Долгота от -180 до 180.
  - `accuracy` [number] *(опционально)*
    
    Ненегативное значение точности. По умолчанию `0`.

---

### hasTouch {#test-options-has-touch}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.hasTouch</x-search>

Указывает, поддерживает ли представление события касания. По умолчанию false. Узнайте больше о [мобильной эмуляции](../emulation.mdx#devices).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    hasTouch: true
  },
});
```

**Тип**
- [boolean]

---

### headless {#test-options-headless}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.headless</x-search>

Определяет, следует ли запускать браузер в безголовом режиме. Более подробная информация для [Chromium](https://developers.google.com/web/updates/2017/04/headless-chrome) и [Firefox](https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Headless_mode). По умолчанию `true`, если опция [devtools](/api/class-browsertype.mdx#browser-type-launch-option-devtools) не равна `true`.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    headless: false
  },
});
```

**Тип**
- [boolean]

---

### httpCredentials {#test-options-http-credentials}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.httpCredentials</x-search>

Учетные данные для [HTTP-аутентификации](https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication). Если не указан источник, имя пользователя и пароль отправляются на любые серверы при несанкционированных ответах.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    httpCredentials: {
      username: 'user',
      password: 'pass',
    },
  },
});
```

**Тип**
- [Object]
  - `username` [string]
    
    
  - `password` [string]
    
    
  - `origin` [string] *(опционально)*
    
    Ограничивает отправку http-учетных данных на конкретный источник (scheme://host:port).
  - `send` "unauthorized" | "always" *(опционально)*
    
    Эта опция применяется только к запросам, отправленным из соответствующего [APIRequestContext], и не влияет на запросы, отправленные из браузера. `'always'` - заголовок `Authorization` с учетными данными базовой аутентификации будет отправлен с каждым API-запросом. `'unauthorized` - учетные данные отправляются только при получении ответа 401 (Unauthorized) с заголовком `WWW-Authenticate`. По умолчанию `'unauthorized'`.

---

### ignoreHTTPSErrors {#test-options-ignore-https-errors}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.ignoreHTTPSErrors</x-search>

Определяет, следует ли игнорировать ошибки HTTPS при отправке сетевых запросов. По умолчанию `false`.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    ignoreHTTPSErrors: true,
  },
});
```

**Тип**
- [boolean]

---

### isMobile {#test-options-is-mobile}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.isMobile</x-search>

Определяет, учитывается ли тег `meta viewport` и включены ли события касания. isMobile является частью устройства, поэтому вам не нужно устанавливать его вручную. По умолчанию `false` и не поддерживается в Firefox. Узнайте больше о [мобильной эмуляции](../emulation.mdx#ismobile).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    isMobile: false,
  },
});
```

**Тип**
- [boolean]

---

### javaScriptEnabled {#test-options-java-script-enabled}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.javaScriptEnabled</x-search>

Определяет, следует ли включать JavaScript в контексте. По умолчанию `true`. Узнайте больше о [отключении JavaScript](../emulation.mdx#javascript-enabled).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    javaScriptEnabled: false,
  },
});
```

**Тип**
- [boolean]

---

### launchOptions {#test-options-launch-options}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.launchOptions</x-search>

Опции, используемые для запуска браузера, передаваемые в [browserType.launch()](/api/class-browsertype.mdx#browser-type-launch). Конкретные опции [testOptions.headless](/api/class-testoptions.mdx#test-options-headless) и [testOptions.channel](/api/class-testoptions.mdx#test-options-channel) имеют приоритет над этим.

:::warning

Используйте пользовательские аргументы браузера на свой страх и риск, так как некоторые из них могут нарушить функциональность Playwright.
:::

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  projects: [
    {
      name: 'chromium',
      use: {
        ...devices['Desktop Chrome'],
        launchOptions: {
          args: ['--start-maximized']
        }
      }
    }
  ]
});
```

**Тип**
- [Object]

---

### locale {#test-options-locale}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.locale</x-search>

Укажите локаль пользователя, например `en-GB`, `de-DE` и т.д. Локаль повлияет на значение `navigator.language`, значение заголовка запроса `Accept-Language`, а также на правила форматирования чисел и дат. По умолчанию `en-US`. Узнайте больше о эмуляции в нашем [руководстве по эмуляции](../emulation.mdx#locale--timezone).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    locale: 'it-IT',
  },
});
```

**Тип**
- [string]

---

### navigationTimeout {#test-options-navigation-timeout}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.navigationTimeout</x-search>

Таймаут для каждого действия навигации в миллисекундах. По умолчанию 0 (без таймаута).

Это таймаут навигации по умолчанию, аналогичный тому, который настраивается через [page.setDefaultNavigationTimeout()](/api/class-page.mdx#page-set-default-navigation-timeout).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    navigationTimeout: 3000,
  },
});
```

Узнайте больше о [различных таймаутах](../test-timeouts.mdx).

**Тип**
- [number]

---

### offline {#test-options-offline}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.offline</x-search>

Определяет, следует ли эмулировать отключение сети. По умолчанию `false`. Узнайте больше о [эмуляции сети](../emulation.mdx#offline).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    offline: true
  },
});
```

**Тип**
- [boolean]

---

### permissions {#test-options-permissions}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.permissions</x-search>

Список разрешений, которые следует предоставить всем страницам в этом контексте. См. [browserContext.grantPermissions()](/api/class-browsercontext.mdx#browser-context-grant-permissions) для получения дополнительных сведений. По умолчанию отсутствуют.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    permissions: ['notifications'],
  },
});
```

**Тип**
- [Array]&lt;[string]&gt;

---

### proxy {#test-options-proxy}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.proxy</x-search>

Настройки сетевого прокси.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    proxy: {
      server: 'http://myproxy.com:3128',
      bypass: 'localhost',
    },
  },
});
```

**Тип**
- [Object]
  - `server` [string]
    
    Прокси, который будет использоваться для всех запросов. Поддерживаются HTTP и SOCKS прокси, например `http://myproxy.com:3128` или `socks5://myproxy.com:3128`. Короткая форма `myproxy.com:3128` считается HTTP прокси.
  - `bypass` [string] *(опционально)*
    
    Необязательные домены, разделенные запятыми, для обхода прокси, например `".com, chromium.org, .domain.com"`.
  - `username` [string] *(опционально)*
    
    Необязательное имя пользователя, если HTTP прокси требует аутентификации.
  - `password` [string] *(опционально)*
    
    Необязательный пароль, если HTTP прокси требует аутентификации.

---

### screenshot {#test-options-screenshot}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.screenshot</x-search>

Определяет, следует ли автоматически захватывать скриншот после каждого теста. По умолчанию `'off'`.
* `'off'`: Не захватывать скриншоты.
* `'on'`: Захватывать скриншот после каждого теста.
* `'only-on-failure'`: Захватывать скриншот после каждого сбоя теста.
* `'on-first-failure'`: Захватывать скриншот только после первого сбоя каждого теста.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    screenshot: 'only-on-failure',
  },
});
```

Узнайте больше о [автоматических скриншотах](../test-use-options.mdx#recording-options).

**Тип**
- [Object] | "off" | "on" | "only-on-failure" | "on-first-failure"
  - `mode` "off" | "on" | "only-on-failure" | "on-first-failure"
    
    Режим автоматического скриншота.
  - `fullPage` [boolean] *(опционально)*
    
    Если true, делает скриншот всей прокручиваемой страницы, а не только текущего видимого представления. По умолчанию `false`.
  - `omitBackground` [boolean] *(опционально)*
    
    Скрывает стандартный белый фон и позволяет захватывать скриншоты с прозрачностью. Не применимо к изображениям `jpeg`. По умолчанию `false`.

---

### serviceWorkers {#test-options-service-workers}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.serviceWorkers</x-search>

Определяет, разрешено ли сайтам регистрировать сервисные рабочие процессы. По умолчанию `'allow'`.
* `'allow'`: [Сервисные рабочие процессы](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API) могут быть зарегистрированы.
* `'block'`: Playwright будет блокировать все регистрации сервисных рабочих процессов.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    serviceWorkers: 'allow'
  },
});
```

**Тип**
- "allow" | "block"

---

### storageState {#test-options-storage-state}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.storageState</x-search>

Узнайте больше о [состоянии хранилища и аутентификации](../auth.mdx).

Заполняет контекст заданным состоянием хранилища. Эта опция может быть использована для инициализации контекста с информацией о входе, полученной через [browserContext.storageState()](/api/class-browsercontext.mdx#browser-context-storage-state).

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    storageState: 'storage-state.json',
  },
});
```

**Тип**
- [string] | [Object]
  - `cookies` [Array]&lt;[Object]&gt;
    - `name` [string]
      
      
    - `value` [string]
      
      
    - `domain` [string]
      
      Домен и путь обязательны. Чтобы cookie применялись ко всем поддоменам, префиксируйте домен точкой, например: ".example.com"
    - `path` [string]
      
      Домен и путь обязательны.
    - `expires` [number]
      
      Время Unix в секундах.
    - `httpOnly` [boolean]
      
      
    - `secure` [boolean]
      
      
    - `sameSite` "Strict" | "Lax" | "None"
      
      флаг sameSite
    
    Cookies для установки в контексте
  - `origins` [Array]&lt;[Object]&gt;
    - `origin` [string]
      
      
    - `localStorage` [Array]&lt;[Object]&gt;
      - `name` [string]
        
        
      - `value` [string]
        
        
      localStorage для установки в контексте
    
    
**Подробности**

Когда состояние хранилища установлено в конфигурации, можно сбросить состояние хранилища для файла:

```js title="not-signed-in.spec.ts"
import { test } from '@playwright/test';

// Сброс состояния хранилища для этого файла, чтобы избежать аутентификации
test.use({ storageState: { cookies: [], origins: [] } });

test('тест без входа', async ({ page }) => {
  // ...
});
```

---

### testIdAttribute {#test-options-test-id-attribute}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.27</font><x-search>testOptions.testIdAttribute</x-search>

Пользовательский атрибут, который будет использоваться в [page.getByTestId()](/api/class-page.mdx#page-get-by-test-id). По умолчанию используется `data-testid`.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    testIdAttribute: 'pw-test-id',
  },
});
```

---

### timezoneId {#test-options-timezone-id}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.timezoneId</x-search>

Изменяет часовой пояс контекста. См. [ICU's metaZones.txt](https://cs.chromium.org/chromium/src/third_party/icu/source/data/misc/metaZones.txt?rcl=faee8bc70570192d82d2978a71e2a615788597d1) для списка поддерживаемых идентификаторов часовых поясов. По умолчанию используется системный часовой пояс.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    timezoneId: 'Europe/Rome',
  },
});
```

**Тип**
- [string]

---

### trace {#test-options-trace}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.trace</x-search>

Определяет, следует ли записывать трассировку для каждого теста. По умолчанию `'off'`.
* `'off'`: Не записывать трассировку.
* `'on'`: Записывать трассировку для каждого теста.
* `'on-first-retry'`: Записывать трассировку только при повторной попытке теста в первый раз.
* `'on-all-retries'`: Записывать трассировку только при повторной попытке теста.
* `'retain-on-failure'`: Записывать трассировку для каждого теста. Когда выполнение теста проходит, удалить записанную трассировку.
* `'retain-on-first-failure'`: Записывать трассировку для первого выполнения каждого теста, но не для повторных попыток. Когда выполнение теста проходит, удалить записанную трассировку.

Для большего контроля передайте объект, который указывает `mode` и функции трассировки, которые нужно включить.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    trace: 'on-first-retry'
  },
});
```

Узнайте больше о [записи трассировки](../test-use-options.mdx#recording-options).

**Тип**
- [Object] | "off" | "on" | "retain-on-failure" | "on-first-retry" | "retain-on-first-failure"
  - `mode` "off" | "on" | "retain-on-failure" | "on-first-retry" | "on-all-retries" | "retain-on-first-failure"
    
    Режим записи трассировки.
  - `attachments` [boolean] *(опционально)*
    
    Определяет, следует ли включать вложения теста. По умолчанию true. Опционально.
  - `screenshots` [boolean] *(опционально)*
    
    Определяет, следует ли захватывать скриншоты во время трассировки. Скриншоты используются для построения предварительного просмотра временной шкалы. По умолчанию true. Опционально.
  - `snapshots` [boolean] *(опционально)*
    
    Определяет, следует ли захватывать снимок DOM при каждом действии. По умолчанию true. Опционально.
  - `sources` [boolean] *(опционально)*
    
    Определяет, следует ли включать исходные файлы для действий трассировки. По умолчанию true. Опционально.

---

### userAgent {#test-options-user-agent}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.userAgent</x-search>

Специфический пользовательский агент для использования в этом контексте.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    userAgent: 'some custom ua',
  },
});
```

**Тип**
- [string]

---

### video {#test-options-video}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.video</x-search>

Определяет, следует ли записывать видео для каждого теста. По умолчанию `'off'`.
* `'off'`: Не записывать видео.
* `'on'`: Записывать видео для каждого теста.
* `'retain-on-failure'`: Записывать видео для каждого теста, но удалить все видео из успешных запусков тестов.
* `'on-first-retry'`: Записывать видео только при повторной попытке теста в первый раз.

Чтобы контролировать размер видео, передайте объект с `mode` и `size`. Если размер видео не указан, он будет равен [testOptions.viewport](/api/class-testoptions.mdx#test-options-viewport), уменьшенному для соответствия 800x800. Если `viewport` не настроен явно, размер видео по умолчанию составляет 800x450. Фактическое изображение каждой страницы будет уменьшено, если это необходимо, чтобы соответствовать указанному размеру.

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    video: 'on-first-retry',
  },
});
```

Узнайте больше о [записи видео](../test-use-options.mdx#recording-options).

**Тип**
- [Object] | "off" | "on" | "retain-on-failure" | "on-first-retry"
  - `mode` "off" | "on" | "retain-on-failure" | "on-first-retry"
    
    Режим записи видео.
  - `size` [Object] *(опционально)*
    - `width` [number]
      
      
    - `height` [number]
      
      
    Размер записанного видео. Опционально.

---

### viewport {#test-options-viewport}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.10</font><x-search>testOptions.viewport</x-search>

Эмулирует постоянное представление для каждой страницы. По умолчанию представление 1280x720. Используйте `null`, чтобы отключить эмуляцию постоянного представления. Узнайте больше о [эмуляции представления](../emulation#viewport).

:::note

Значение `null` исключает стандартные предустановки, делает представление зависимым от размера окна хоста, определенного операционной системой. Это делает выполнение тестов недетерминированным.
:::

**Использование**

```js title="playwright.config.ts"
import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    viewport: { width: 100, height: 100 },
  },
});
```

**Тип**
- [null] | [Object]
  - `width` [number]
    
    ширина страницы в пикселях.
  - `height` [number]
    
    высота страницы в пикселях.

[Accessibility]: /api/class-accessibility.mdx "Accessibility"
[Android]: /api/class-android.mdx "Android"
[AndroidDevice]: /api/class-androiddevice.mdx "AndroidDevice"
[AndroidInput]: /api/class-androidinput.mdx "AndroidInput"
[AndroidSocket]: /api/class-androidsocket.mdx "AndroidSocket"
[AndroidWebView]: /api/class-androidwebview.mdx "AndroidWebView"
[APIRequest]: /api/class-apirequest.mdx "APIRequest"
[APIRequestContext]: /api/class-apirequestcontext.mdx "APIRequestContext"
[APIResponse]: /api/class-apiresponse.mdx "APIResponse"
[APIResponseAssertions]: /api/class-apiresponseassertions.mdx "APIResponseAssertions"
[Browser]: /api/class-browser.mdx "Browser"
[BrowserContext]: /api/class-browsercontext.mdx "BrowserContext"
[BrowserServer]: /api/class-browserserver.mdx "BrowserServer"
[BrowserType]: /api/class-browsertype.mdx "BrowserType"
[CDPSession]: /api/class-cdpsession.mdx "CDPSession"
[Clock]: /api/class-clock.mdx "Clock"
[ConsoleMessage]: /api/class-consolemessage.mdx "ConsoleMessage"
[Coverage]: /api/class-coverage.mdx "Coverage"
[Dialog]: /api/class-dialog.mdx "Dialog"
[Download]: /api/class-download.mdx "Download"
[Electron]: /api/class-electron.mdx "Electron"
[ElectronApplication]: /api/class-electronapplication.mdx "ElectronApplication"
[ElementHandle]: /api/class-elementhandle.mdx "ElementHandle"
[FileChooser]: /api/class-filechooser.mdx "FileChooser"
[Frame]: /api/class-frame.mdx "Frame"
[FrameLocator]: /api/class-framelocator.mdx "FrameLocator"
[GenericAssertions]: /api/class-genericassertions.mdx "GenericAssertions"
[JSHandle]: /api/class-jshandle.mdx "JSHandle"
[Keyboard]: /api/class-keyboard.mdx "Keyboard"
[Locator]: /api/class-locator.mdx "Locator"
[LocatorAssertions]: /api/class-locatorassertions.mdx "LocatorAssertions"
[Logger]: /api/class-logger.mdx "Logger"
[Mouse]: /api/class-mouse.mdx "Mouse"
[Page]: /api/class-page.mdx "Page"
[PageAssertions]: /api/class-pageassertions.mdx "PageAssertions"
[Playwright]: /api/class-playwright.mdx "Playwright"
[PlaywrightAssertions]: /api/class-playwrightassertions.mdx "PlaywrightAssertions"
[Request]: /api/class-request.mdx "Request"
[Response]: /api/class-response.mdx "Response"
[Route]: /api/class-route.mdx "Route"
[Selectors]: /api/class-selectors.mdx "Selectors"
[SnapshotAssertions]: /api/class-snapshotassertions.mdx "SnapshotAssertions"
[TimeoutError]: /api/class-timeouterror.mdx "TimeoutError"
[Touchscreen]: /api/class-touchscreen.mdx "Touchscreen"
[Tracing]: /api/class-tracing.mdx "Tracing"
[Video]: /api/class-video.mdx "Video"
[WebError]: /api/class-weberror.mdx "WebError"
[WebSocket]: /api/class-websocket.mdx "WebSocket"
[WebSocketRoute]: /api/class-websocketroute.mdx "WebSocketRoute"
[Worker]: /api/class-worker.mdx "Worker"
[Fixtures]: /api/class-fixtures.mdx "Fixtures"
[FullConfig]: /api/class-fullconfig.mdx "FullConfig"
[FullProject]: /api/class-fullproject.mdx "FullProject"
[Location]: /api/class-location.mdx "Location"
[Test]: /api/class-test.mdx "Test"
[TestConfig]: /api/class-testconfig.mdx "TestConfig"
[TestInfo]: /api/class-testinfo.mdx "TestInfo"
[TestInfoError]: /api/class-testinfoerror.mdx "TestInfoError"
[TestOptions]: /api/class-testoptions.mdx "TestOptions"
[TestProject]: /api/class-testproject.mdx "TestProject"
[TestStepInfo]: /api/class-teststepinfo.mdx "TestStepInfo"
[WorkerInfo]: /api/class-workerinfo.mdx "WorkerInfo"
[Reporter]: /api/class-reporter.mdx "Reporter"
[Suite]: /api/class-suite.mdx "Suite"
[TestCase]: /api/class-testcase.mdx "TestCase"
[TestError]: /api/class-testerror.mdx "TestError"
[TestResult]: /api/class-testresult.mdx "TestResult"
[TestStep]: /api/class-teststep.mdx "TestStep"
[Element]: https://developer.mozilla.org/en-US/docs/Web/API/element "Element"
[EvaluationArgument]: /evaluating.mdx#evaluation-argument "EvaluationArgument"
[Promise]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"
[iterator]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols "Iterator"
[origin]: https://developer.mozilla.org/en-US/docs/Glossary/Origin "Origin"
[selector]: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors "selector"
[Serializable]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable"
[UIEvent.detail]: https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detail "UIEvent.detail"
[UnixTime]: https://en.wikipedia.org/wiki/Unix_time "Unix Time"
[xpath]: https://developer.mozilla.org/en-US/docs/Web/XPath "xpath"

[Array]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array"
[boolean]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean"
[Buffer]: https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer"
[ChildProcess]: https://nodejs.org/api/child_process.html "ChildProcess"
[Date]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date "Date"
[Error]: https://nodejs.org/api/errors.html#errors_class_error "Error"
[EventEmitter]: https://nodejs.org/api/events.html#events_class_eventemitter "EventEmitter"
[function]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function"
[FormData]: https://developer.mozilla.org/en-US/docs/Web/API/FormData "FormData"
[Map]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map "Map"
[Metadata]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object&lt;string, any&gt;"
[null]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null"
[number]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number"
[Object]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object"
[Promise]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"
[Readable]: https://nodejs.org/api/stream.html#stream_class_stream_readable "Readable"
[ReadStream]: https://nodejs.org/api/fs.html#class-fsreadstream "ReadStream"
[RegExp]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp"
[string]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"
[void]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void"
[URL]: https://nodejs.org/api/url.html "URL"
[URLSearchParams]: https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams "URLSearchParams"