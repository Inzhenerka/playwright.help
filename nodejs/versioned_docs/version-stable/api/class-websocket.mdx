---
id: class-websocket
title: "WebSocket"
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import HTMLCard from '@site/src/components/HTMLCard';

Класс [WebSocket] представляет соединения WebSocket внутри страницы. Он предоставляет возможность инспектировать и манипулировать данными, которые передаются и принимаются.

Если вы хотите перехватить или изменить кадры WebSocket, рассмотрите возможность использования [WebSocketRoute].

---

## Методы

### isClosed {#web-socket-is-closed}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено до v1.9</font><x-search>webSocket.isClosed</x-search>

Указывает на то, что веб-сокет был закрыт.

**Использование**

```js
webSocket.isClosed();
```

**Возвращает**
- [boolean]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="web-socket-is-closed-return"/><a href="#web-socket-is-closed-return" class="list-anchor">#</a>

---

### url {#web-socket-url}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено до v1.9</font><x-search>webSocket.url</x-search>

Содержит URL веб-сокета.

**Использование**

```js
webSocket.url();
```

**Возвращает**
- [string]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="web-socket-url-return"/><a href="#web-socket-url-return" class="list-anchor">#</a>

---

### waitForEvent {#web-socket-wait-for-event}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено до v1.9</font><x-search>webSocket.waitForEvent</x-search>

Ожидает, пока событие не произойдет, и передает его значение в предикатную функцию. Возвращает результат, когда предикат возвращает истинное значение. Выдаст ошибку, если веб-сокет закрыт до того, как событие произойдет. Возвращает значение данных события.

**Использование**

```js
await webSocket.waitForEvent(event);
await webSocket.waitForEvent(event, optionsOrPredicate, options);
```

**Аргументы**
- `event` [string]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="web-socket-wait-for-event-option-event"/><a href="#web-socket-wait-for-event-option-event" class="list-anchor">#</a>
  
  Имя события, то же самое, что передается в `webSocket.on(event)`.
- `optionsOrPredicate` [function] | [Object] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="web-socket-wait-for-event-option-options-or-predicate"/><a href="#web-socket-wait-for-event-option-options-or-predicate" class="list-anchor">#</a>
  - `predicate` [function]
    
    Принимает данные события и разрешается в истинное значение, когда ожидание должно завершиться.
  - `timeout` [number] *(опционально)*
    
    Максимальное время ожидания в миллисекундах. По умолчанию `0` - без таймаута. Значение по умолчанию можно изменить через опцию `actionTimeout` в конфигурации или с помощью методов [browserContext.setDefaultTimeout()](/api/class-browsercontext.mdx#browser-context-set-default-timeout) или [page.setDefaultTimeout()](/api/class-page.mdx#page-set-default-timeout).
  
  Либо предикат, который принимает событие, либо объект опций. Опционально.
- `options` [Object] *(опционально)*
  - `predicate` [function] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="web-socket-wait-for-event-option-predicate"/><a href="#web-socket-wait-for-event-option-predicate" class="list-anchor">#</a>
    
    Принимает данные события и разрешается в истинное значение, когда ожидание должно завершиться.

**Возвращает**
- [Promise]&lt;[Object]&gt;<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="web-socket-wait-for-event-return"/><a href="#web-socket-wait-for-event-return" class="list-anchor">#</a>

---

## События

### on('close') {#web-socket-event-close}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено до v1.9</font><x-search>webSocket.on('close')</x-search>

Срабатывает, когда веб-сокет закрывается.

**Использование**

```js
webSocket.on('close', data => {});
```

**Данные события**
- [WebSocket]

---

### on('framereceived') {#web-socket-event-frame-received}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.9</font><x-search>webSocket.on('framereceived')</x-search>

Срабатывает, когда веб-сокет получает кадр.

**Использование**

```js
webSocket.on('framereceived', data => {});
```

**Данные события**
- [Object]
  - `payload` [string] | [Buffer]
    
    полезная нагрузка кадра

---

### on('framesent') {#web-socket-event-frame-sent}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.9</font><x-search>webSocket.on('framesent')</x-search>

Срабатывает, когда веб-сокет отправляет кадр.

**Использование**

```js
webSocket.on('framesent', data => {});
```

**Данные события**
- [Object]
  - `payload` [string] | [Buffer]
    
    полезная нагрузка кадра

---

### on('socketerror') {#web-socket-event-socket-error}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.9</font><x-search>webSocket.on('socketerror')</x-search>

Срабатывает, когда у веб-сокета возникает ошибка.

**Использование**

```js
webSocket.on('socketerror', data => {});
```

**Данные события**
- [string]