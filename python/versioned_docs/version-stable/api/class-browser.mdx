---
id: class-browser
title: "Browser"
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import HTMLCard from '@site/src/components/HTMLCard';

Браузер создается с помощью [browser_type.launch()](/api/class-browsertype.mdx#browser-type-launch). Пример использования [Browser] для создания [Page]:

<Tabs
  groupId="python-flavor"
  defaultValue="sync"
  values={[
    {label: 'Sync', value: 'sync'},
    {label: 'Async', value: 'async'}
  ]
}>
<TabItem value="sync">

```py
from playwright.sync_api import sync_playwright, Playwright

def run(playwright: Playwright):
    firefox = playwright.firefox
    browser = firefox.launch()
    page = browser.new_page()
    page.goto("https://example.com")
    browser.close()

with sync_playwright() as playwright:
    run(playwright)
```

</TabItem>
<TabItem value="async">

```py
import asyncio
from playwright.async_api import async_playwright, Playwright

async def run(playwright: Playwright):
    firefox = playwright.firefox
    browser = await firefox.launch()
    page = await browser.new_page()
    await page.goto("https://example.com")
    await browser.close()

async def main():
    async with async_playwright() as playwright:
        await run(playwright)
asyncio.run(main())
```

</TabItem>
</Tabs>

---

## Методы

### close {#browser-close}

<font size="2" style={{position: "relative", top: "-20px"}}>Added before v1.9</font><x-search>browser.close</x-search>

Если этот браузер был получен с помощью [browser_type.launch()](/api/class-browsertype.mdx#browser-type-launch), закрывает браузер и все его страницы (если они были открыты).

Если этот браузер подключен, очищает все созданные контексты, принадлежащие этому браузеру, и отключается от сервера браузера.

:::note

Это похоже на принудительное завершение работы браузера. Чтобы закрыть страницы корректно и убедиться, что вы получаете события закрытия страниц, вызовите [browser_context.close()](/api/class-browsercontext.mdx#browser-context-close) для всех экземпляров [BrowserContext], которые вы явно создали ранее с помощью [browser.new_context()](/api/class-browser.mdx#browser-new-context) **перед** вызовом [browser.close()](/api/class-browser.mdx#browser-close).
:::

Сам объект [Browser] считается утилизированным и больше не может быть использован.

**Использование**

```python
browser.close()
browser.close(**kwargs)
```

**Аргументы**
- `reason` [str] *(optional)* <font size="2">Added in: v1.40</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-close-option-reason"/><a href="#browser-close-option-reason" class="list-anchor">#</a>
  
  Причина, которая будет сообщена операциям, прерванным закрытием браузера.

**Возвращает**
- [NoneType]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-close-return"/><a href="#browser-close-return" class="list-anchor">#</a>

---

### new_browser_cdp_session {#browser-new-browser-cdp-session}

<font size="2" style={{position: "relative", top: "-20px"}}>Added in: v1.11</font><x-search>browser.new_browser_cdp_session</x-search>

:::note

Сессии CDP поддерживаются только в браузерах на основе Chromium.
:::

Возвращает вновь созданную сессию браузера.

**Использование**

```python
browser.new_browser_cdp_session()
```

**Возвращает**
- [CDPSession]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-browser-cdp-session-return"/><a href="#browser-new-browser-cdp-session-return" class="list-anchor">#</a>

---

### new_context {#browser-new-context}

<font size="2" style={{position: "relative", top: "-20px"}}>Added before v1.9</font><x-search>browser.new_context</x-search>

Создает новый контекст браузера. Он не будет делиться cookies/кэшем с другими контекстами браузера.

:::note

Если вы напрямую используете этот метод для создания [BrowserContext], рекомендуется явно закрыть возвращенный контекст через [browser_context.close()](/api/class-browsercontext.mdx#browser-context-close), когда ваш код завершит работу с [BrowserContext], и перед вызовом [browser.close()](/api/class-browser.mdx#browser-close). Это обеспечит корректное закрытие `context` и полное сохранение всех артефактов, таких как HAR и видео.
:::

**Использование**

<Tabs
  groupId="python-flavor"
  defaultValue="sync"
  values={[
    {label: 'Sync', value: 'sync'},
    {label: 'Async', value: 'async'}
  ]
}>
<TabItem value="sync">

```py
browser = playwright.firefox.launch() # или "chromium" или "webkit".
# создайте новый инкогнито контекст браузера.
context = browser.new_context()
# создайте новую страницу в чистом контексте.
page = context.new_page()
page.goto("https://example.com")

# корректно закройте все
context.close()
browser.close()
```

</TabItem>
<TabItem value="async">

```py
browser = await playwright.firefox.launch() # или "chromium" или "webkit".
# создайте новый инкогнито контекст браузера.
context = await browser.new_context()
# создайте новую страницу в чистом контексте.
page = await context.new_page()
await page.goto("https://example.com")

# корректно закройте все
await context.close()
await browser.close()
```

</TabItem>
</Tabs>

**Аргументы**
- `accept_downloads` [bool] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-accept-downloads"/><a href="#browser-new-context-option-accept-downloads" class="list-anchor">#</a>
  
  Автоматически загружать все вложения. По умолчанию `true`, где все загрузки принимаются.
- `base_url` [str] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-base-url"/><a href="#browser-new-context-option-base-url" class="list-anchor">#</a>
  
  При использовании [page.goto()](/api/class-page.mdx#page-goto), [page.route()](/api/class-page.mdx#page-route), [page.wait_for_url()](/api/class-page.mdx#page-wait-for-url), [page.expect_request()](/api/class-page.mdx#page-wait-for-request) или [page.expect_response()](/api/class-page.mdx#page-wait-for-response) учитывается базовый URL, используя конструктор [`URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) для построения соответствующего URL. По умолчанию не установлен. Примеры:
  * baseURL: `http://localhost:3000` и переход на `/bar.html` приводит к `http://localhost:3000/bar.html`
  * baseURL: `http://localhost:3000/foo/` и переход на `./bar.html` приводит к `http://localhost:3000/foo/bar.html`
  * baseURL: `http://localhost:3000/foo` (без завершающего слэша) и переход на `./bar.html` приводит к `http://localhost:3000/bar.html`
- `bypass_csp` [bool] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-bypass-csp"/><a href="#browser-new-context-option-bypass-csp" class="list-anchor">#</a>
  
  Переключает обход политики безопасности контента страницы. По умолчанию `false`.
- `client_certificates` [List]\[[Dict]\] *(optional)* <font size="2">Added in: 1.46</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-client-certificates"/><a href="#browser-new-context-option-client-certificates" class="list-anchor">#</a>
  - `origin` [str]
    
    Точный источник, для которого сертификат действителен. Источник включает протокол `https`, имя хоста и, возможно, порт.
  - `certPath` [Union]\[[str], [pathlib.Path]\] *(optional)*
    
    Путь к файлу с сертификатом в формате PEM.
  - `cert` [bytes] *(optional)*
    
    Прямое значение сертификата в формате PEM.
  - `keyPath` [Union]\[[str], [pathlib.Path]\] *(optional)*
    
    Путь к файлу с закрытым ключом в формате PEM.
  - `key` [bytes] *(optional)*
    
    Прямое значение закрытого ключа в формате PEM.
  - `pfxPath` [Union]\[[str], [pathlib.Path]\] *(optional)*
    
    Путь к PFX или PKCS12 закодированному закрытому ключу и цепочке сертификатов.
  - `pfx` [bytes] *(optional)*
    
    Прямое значение PFX или PKCS12 закодированного закрытого ключа и цепочки сертификатов.
  - `passphrase` [str] *(optional)*
    
    Пароль для закрытого ключа (PEM или PFX).
  
  Аутентификация клиента TLS позволяет серверу запросить клиентский сертификат и проверить его.
  
  **Детали**
  
  Массив клиентских сертификатов для использования. Каждый объект сертификата должен иметь либо оба `certPath` и `keyPath`, либо один `pfxPath`, или их соответствующие прямые значения (`cert` и `key`, или `pfx`). При необходимости, свойство `passphrase` должно быть предоставлено, если сертификат зашифрован. Свойство `origin` должно быть предоставлено с точным совпадением с источником запроса, для которого сертификат действителен.
  
  Client certificate authentication is only active when at least one client certificate is provided. If you want to reject all client certificates sent by the server, you need to provide a client certificate with an `origin` that does not match any of the domains you plan to visit.
  
  :::note
  
  При использовании WebKit на macOS доступ к `localhost` не будет использовать клиентские сертификаты. Вы можете сделать это, заменив `localhost` на `local.playwright`.
  :::
  
- `color_scheme` "light" | "dark" | "no-preference" | "null" *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-color-scheme"/><a href="#browser-new-context-option-color-scheme" class="list-anchor">#</a>
  
  Эмулирует медиа-функцию [prefers-colors-scheme](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme), поддерживаемые значения: `'light'` и `'dark'`. См. [page.emulate_media()](/api/class-page.mdx#page-emulate-media) для получения более подробной информации. Передача `'null'` сбрасывает эмуляцию на системные настройки по умолчанию. По умолчанию `'light'`.
- `contrast` "no-preference" | "more" | "null" *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-contrast"/><a href="#browser-new-context-option-contrast" class="list-anchor">#</a>
  
  Эмулирует медиа-функцию `'prefers-contrast'`, поддерживаемые значения: `'no-preference'`, `'more'`. См. [page.emulate_media()](/api/class-page.mdx#page-emulate-media) для получения более подробной информации. Передача `'null'` сбрасывает эмуляцию на системные настройки по умолчанию. По умолчанию `'no-preference'`.
- `device_scale_factor` [float] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-device-scale-factor"/><a href="#browser-new-context-option-device-scale-factor" class="list-anchor">#</a>
  
  Указывает коэффициент масштабирования устройства (можно рассматривать как dpr). По умолчанию `1`. Узнайте больше о [эмуляции устройств с коэффициентом масштабирования устройства](../emulation.mdx#devices).
- `extra_http_headers` [Dict]\[[str], [str]\] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-extra-http-headers"/><a href="#browser-new-context-option-extra-http-headers" class="list-anchor">#</a>
  
  Объект, содержащий дополнительные HTTP-заголовки, которые будут отправляться с каждым запросом. По умолчанию нет.
- `forced_colors` "active" | "none" | "null" *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-forced-colors"/><a href="#browser-new-context-option-forced-colors" class="list-anchor">#</a>
  
  Эмулирует медиа-функцию `'forced-colors'`, поддерживаемые значения: `'active'`, `'none'`. См. [page.emulate_media()](/api/class-page.mdx#page-emulate-media) для получения более подробной информации. Передача `'null'` сбрасывает эмуляцию на системные настройки по умолчанию. По умолчанию `'none'`.
- `geolocation` [Dict] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-geolocation"/><a href="#browser-new-context-option-geolocation" class="list-anchor">#</a>
  - `latitude` [float]
    
    Широта между -90 и 90.
  - `longitude` [float]
    
    Долгота между -180 и 180.
  - `accuracy` [float] *(optional)*
    
    Неотрицательное значение точности. По умолчанию `0`.
- `has_touch` [bool] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-has-touch"/><a href="#browser-new-context-option-has-touch" class="list-anchor">#</a>
  
  Указывает, поддерживает ли видовая область сенсорные события. По умолчанию false. Узнайте больше о [мобильной эмуляции](../emulation.mdx#devices).
- `http_credentials` [Dict] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-http-credentials"/><a href="#browser-new-context-option-http-credentials" class="list-anchor">#</a>
  - `username` [str]
    
    
  - `password` [str]
    
    
  - `origin` [str] *(optional)*
    
    Ограничивает отправку http-учетных данных на конкретный источник (scheme://host:port).
  - `send` "unauthorized" | "always" *(optional)*
    
    Этот параметр применяется только к запросам, отправленным из соответствующего [APIRequestContext], и не влияет на запросы, отправленные из браузера. `'always'` - заголовок `Authorization` с учетными данными базовой аутентификации будет отправляться с каждым API-запросом. `'unauthorized` - учетные данные отправляются только при получении ответа 401 (Unauthorized) с заголовком `WWW-Authenticate`. По умолчанию `'unauthorized'`.
  
  Учетные данные для [HTTP-аутентификации](https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication). Если источник не указан, имя пользователя и пароль отправляются на любые серверы при получении неавторизованных ответов.
- `ignore_https_errors` [bool] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-ignore-https-errors"/><a href="#browser-new-context-option-ignore-https-errors" class="list-anchor">#</a>
  
  Игнорировать ли ошибки HTTPS при отправке сетевых запросов. По умолчанию `false`.
- `is_mobile` [bool] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-is-mobile"/><a href="#browser-new-context-option-is-mobile" class="list-anchor">#</a>
  
  Учитывается ли тег `meta viewport` и включены ли сенсорные события. isMobile является частью устройства, поэтому вам не нужно устанавливать его вручную. По умолчанию `false` и не поддерживается в Firefox. Узнайте больше о [мобильной эмуляции](../emulation.mdx#ismobile).
- `java_script_enabled` [bool] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-java-script-enabled"/><a href="#browser-new-context-option-java-script-enabled" class="list-anchor">#</a>
  
  Включать ли JavaScript в контексте. По умолчанию `true`. Узнайте больше о [отключении JavaScript](../emulation.mdx#javascript-enabled).
- `locale` [str] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-locale"/><a href="#browser-new-context-option-locale" class="list-anchor">#</a>
  
  Укажите локаль пользователя, например `en-GB`, `de-DE` и т. д. Локаль повлияет на значение `navigator.language`, значение заголовка запроса `Accept-Language`, а также на правила форматирования чисел и дат. По умолчанию используется системная локаль. Узнайте больше о эмуляции в нашем [руководстве по эмуляции](../emulation.mdx#locale--timezone).
- `no_viewport` [bool] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-no-viewport"/><a href="#browser-new-context-option-no-viewport" class="list-anchor">#</a>
  
  Не применять фиксированную видовую область, позволяет изменять размер окна в режиме с заголовком.
- `offline` [bool] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-offline"/><a href="#browser-new-context-option-offline" class="list-anchor">#</a>
  
  Эмулировать ли отключение сети. По умолчанию `false`. Узнайте больше о [эмуляции сети](../emulation.mdx#offline).
- `permissions` [List]\[[str]\] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-permissions"/><a href="#browser-new-context-option-permissions" class="list-anchor">#</a>
  
  Список разрешений, которые нужно предоставить всем страницам в этом контексте. См. [browser_context.grant_permissions()](/api/class-browsercontext.mdx#browser-context-grant-permissions) для получения более подробной информации. По умолчанию нет.
- `proxy` [Dict] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-proxy"/><a href="#browser-new-context-option-proxy" class="list-anchor">#</a>
  - `server` [str]
    
    Прокси для использования для всех запросов. Поддерживаются HTTP и SOCKS прокси, например `http://myproxy.com:3128` или `socks5://myproxy.com:3128`. Краткая форма `myproxy.com:3128` считается HTTP прокси.
  - `bypass` [str] *(optional)*
    
    Необязательные домены, разделенные запятыми, для обхода прокси, например `".com, chromium.org, .domain.com"`.
  - `username` [str] *(optional)*
    
    Необязательное имя пользователя для использования, если HTTP прокси требует аутентификации.
  - `password` [str] *(optional)*
    
    Необязательный пароль для использования, если HTTP прокси требует аутентификации.
  
  Настройки сетевого прокси для использования с этим контекстом. По умолчанию нет.
- `record_har_content` "omit" | "embed" | "attach" *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-record-har-content"/><a href="#browser-new-context-option-record-har-content" class="list-anchor">#</a>
  
  Необязательная настройка для управления содержимым ресурсов. Если указано `omit`, содержимое не сохраняется. Если указано `attach`, ресурсы сохраняются как отдельные файлы, и все эти файлы архивируются вместе с файлом HAR. По умолчанию `embed`, который сохраняет содержимое встраиваемым в файл HAR в соответствии со спецификацией HAR.
- `record_har_mode` "full" | "minimal" *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-record-har-mode"/><a href="#browser-new-context-option-record-har-mode" class="list-anchor">#</a>
  
  При установке в `minimal` записывается только информация, необходимая для маршрутизации из HAR. Это исключает размеры, время, страницу, cookies, безопасность и другие типы информации HAR, которые не используются при воспроизведении из HAR. По умолчанию `full`.
- `record_har_omit_content` [bool] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-record-har-omit-content"/><a href="#browser-new-context-option-record-har-omit-content" class="list-anchor">#</a>
  
  Необязательная настройка для управления тем, следует ли исключать содержимое запроса из HAR. По умолчанию `false`.
- `record_har_path` [Union]\[[str], [pathlib.Path]\] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-record-har-path"/><a href="#browser-new-context-option-record-har-path" class="list-anchor">#</a>
  
  Включает запись [HAR](http://www.softwareishard.com/blog/har-12-spec) для всех страниц в указанный файл HAR в файловой системе. Если не указано, HAR не записывается. Убедитесь, что вызвали [browser_context.close()](/api/class-browsercontext.mdx#browser-context-close), чтобы HAR был сохранен.
- `record_har_url_filter` [str] | [Pattern] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-record-har-url-filter"/><a href="#browser-new-context-option-record-har-url-filter" class="list-anchor">#</a>
- `record_video_dir` [Union]\[[str], [pathlib.Path]\] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-record-video-dir"/><a href="#browser-new-context-option-record-video-dir" class="list-anchor">#</a>
  
  Включает запись видео для всех страниц в указанную директорию. Если не указано, видео не записываются. Убедитесь, что вызвали [browser_context.close()](/api/class-browsercontext.mdx#browser-context-close), чтобы видео были сохранены.
- `record_video_size` [Dict] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-record-video-size"/><a href="#browser-new-context-option-record-video-size" class="list-anchor">#</a>
  - `width` [int]
    
    Ширина кадра видео.
  - `height` [int]
    
    Высота кадра видео.
  
  Размеры записанных видео. Если не указано, размер будет равен `viewport`, уменьшенному для соответствия 800x800. Если `viewport` не настроен явно, размер видео по умолчанию составляет 800x450. Фактическое изображение каждой страницы будет уменьшено, если необходимо, чтобы соответствовать указанному размеру.
- `reduced_motion` "reduce" | "no-preference" | "null" *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-reduced-motion"/><a href="#browser-new-context-option-reduced-motion" class="list-anchor">#</a>
  
  Эмулирует медиа-функцию `'prefers-reduced-motion'`, поддерживаемые значения: `'reduce'`, `'no-preference'`. См. [page.emulate_media()](/api/class-page.mdx#page-emulate-media) для получения более подробной информации. Передача `'null'` сбрасывает эмуляцию на системные настройки по умолчанию. По умолчанию `'no-preference'`.
- `screen` [Dict] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-screen"/><a href="#browser-new-context-option-screen" class="list-anchor">#</a>
  - `width` [int]
    
    Ширина страницы в пикселях.
  - `height` [int]
    
    Высота страницы в пикселях.
  
  Эмулирует постоянный размер окна экрана, доступный внутри веб-страницы через `window.screen`. Используется только при установке [viewport](/api/class-browser.mdx#browser-new-context-option-viewport).
- `service_workers` "allow" | "block" *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-service-workers"/><a href="#browser-new-context-option-service-workers" class="list-anchor">#</a>
  
  Разрешать ли сайтам регистрировать сервис-воркеры. По умолчанию `'allow'`.
  * `'allow'`: [Сервис-воркеры](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API) могут быть зарегистрированы.
  * `'block'`: Playwright будет блокировать всю регистрацию сервис-воркеров.
- `storage_state` [Union]\[[str], [pathlib.Path]\] | [Dict] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-storage-state"/><a href="#browser-new-context-option-storage-state" class="list-anchor">#</a>
  - `cookies` [List]\[[Dict]\]
    - `name` [str]
      
      
    - `value` [str]
      
      
    - `domain` [str]
      
      Домен и путь обязательны. Чтобы cookie применялись ко всем поддоменам, добавьте точку перед доменом, например: ".example.com"
    - `path` [str]
      
      Домен и путь обязательны
    - `expires` [float]
      
      Время Unix в секундах.
    - `httpOnly` [bool]
      
      
    - `secure` [bool]
      
      
    - `sameSite` "Strict" | "Lax" | "None"
      
      флаг sameSite
    
    Cookies для установки в контексте
  - `origins` [List]\[[Dict]\]
    - `origin` [str]
      
      
    - `localStorage` [List]\[[Dict]\]
      - `name` [str]
        
        
      - `value` [str]
        
        
      localStorage для установки в контексте
    
    
  Узнайте больше о [состоянии хранилища и аутентификации](../auth.mdx).
  
  Заполняет контекст заданным состоянием хранилища. Этот параметр можно использовать для инициализации контекста с информацией о входе, полученной через [browser_context.storage_state()](/api/class-browsercontext.mdx#browser-context-storage-state).
- `strict_selectors` [bool] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-strict-selectors"/><a href="#browser-new-context-option-strict-selectors" class="list-anchor">#</a>
  
  Если установлено значение true, включает режим строгих селекторов для этого контекста. В режиме строгих селекторов все операции с селекторами, которые подразумевают один целевой элемент DOM, будут вызывать ошибку, если селектор соответствует более чем одному элементу. Этот параметр не влияет на любые API локаторов (локаторы всегда строгие). По умолчанию `false`. См. [Locator], чтобы узнать больше о строгом режиме.
- `timezone_id` [str] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-timezone-id"/><a href="#browser-new-context-option-timezone-id" class="list-anchor">#</a>
  
  Изменяет часовой пояс контекста. См. [metaZones.txt ICU](https://cs.chromium.org/chromium/src/third_party/icu/source/data/misc/metaZones.txt?rcl=faee8bc70570192d82d2978a71e2a615788597d1) для списка поддерживаемых идентификаторов часовых поясов. По умолчанию используется системный часовой пояс.
- `user_agent` [str] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-user-agent"/><a href="#browser-new-context-option-user-agent" class="list-anchor">#</a>
  
  Специфический user agent для использования в этом контексте.
- `viewport` [NoneType] | [Dict] *(optional)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-option-viewport"/><a href="#browser-new-context-option-viewport" class="list-anchor">#</a>
  - `width` [int]
    
    Ширина страницы в пикселях.
  - `height` [int]
    
    Высота страницы в пикселях.
  
  Устанавливает постоянную видовую область для каждой страницы. По умолчанию используется видовая область 1280x720. `no_viewport` отключает фиксированную видовую область. Узнайте больше о [эмуляции видовой области](../emulation.mdx#viewport).

**Возвращает**
- [BrowserContext]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-context-return"/><a href="#browser-new-context-return" class="list-anchor">#</a>

---

### new_page {#browser-new-page}

<font size="2" style={{position: "relative", top: "-20px"}}>Added before v1.9</font><x-search>browser.new_page</x-search>

Создает новую страницу в новом контексте браузера. Закрытие этой страницы также закроет контекст.

Это удобный API, который следует использовать только для сценариев с одной страницей и коротких фрагментов. Производственный код и тестовые фреймворки должны явно создавать [browser.new_context()](/api/class-browser.mdx#browser-new-context), а затем [browser_context.new_page()](/api/class-browsercontext.mdx#browser-context-new-page), чтобы контролировать их точное время жизни.

**Использование**

```python
browser.new_page()
browser.new_page(**kwargs)
```

**Аргументы**
- `accept_downloads` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-accept-downloads"/><a href="#browser-new-page-option-accept-downloads" class="list-anchor">#</a>
  
  Автоматически загружать все вложения. По умолчанию `true`, где все загрузки принимаются.
- `base_url` [str] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-base-url"/><a href="#browser-new-page-option-base-url" class="list-anchor">#</a>
  
  При использовании [page.goto()](/api/class-page.mdx#page-goto), [page.route()](/api/class-page.mdx#page-route), [page.wait_for_url()](/api/class-page.mdx#page-wait-for-url), [page.expect_request()](/api/class-page.mdx#page-wait-for-request) или [page.expect_response()](/api/class-page.mdx#page-wait-for-response) учитывается базовый URL, используя конструктор [`URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) для построения соответствующего URL. По умолчанию не установлен. Примеры:
  * baseURL: `http://localhost:3000` и переход на `/bar.html` приводит к `http://localhost:3000/bar.html`
  * baseURL: `http://localhost:3000/foo/` и переход на `./bar.html` приводит к `http://localhost:3000/foo/bar.html`
  * baseURL: `http://localhost:3000/foo` (без завершающего слэша) и переход на `./bar.html` приводит к `http://localhost:3000/bar.html`
- `bypass_csp` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-bypass-csp"/><a href="#browser-new-page-option-bypass-csp" class="list-anchor">#</a>
  
  Переключает обход политики безопасности контента страницы. По умолчанию `false`.
- `client_certificates` [List]\[[Dict]\] *(опционально)* <font size="2">Добавлено в: 1.46</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-client-certificates"/><a href="#browser-new-page-option-client-certificates" class="list-anchor">#</a>
  - `origin` [str]
    
    Точный источник, для которого сертификат действителен. Источник включает протокол `https`, имя хоста и, возможно, порт.
  - `certPath` [Union]\[[str], [pathlib.Path]\] *(опционально)*
    
    Путь к файлу с сертификатом в формате PEM.
  - `cert` [bytes] *(опционально)*
    
    Прямое значение сертификата в формате PEM.
  - `keyPath` [Union]\[[str], [pathlib.Path]\] *(опционально)*
    
    Путь к файлу с закрытым ключом в формате PEM.
  - `key` [bytes] *(опционально)*
    
    Прямое значение закрытого ключа в формате PEM.
  - `pfxPath` [Union]\[[str], [pathlib.Path]\] *(опционально)*
    
    Путь к PFX или PKCS12 закодированному закрытому ключу и цепочке сертификатов.
  - `pfx` [bytes] *(опционально)*
    
    Прямое значение PFX или PKCS12 закодированного закрытого ключа и цепочки сертификатов.
  - `passphrase` [str] *(опционально)*
    
    Пароль для закрытого ключа (PEM или PFX).
  
  Аутентификация клиента TLS позволяет серверу запросить клиентский сертификат и проверить его.
  
  **Детали**
  
  Массив клиентских сертификатов для использования. Каждый объект сертификата должен иметь либо оба `certPath` и `keyPath`, один `pfxPath`, либо их соответствующие прямые значения (`cert` и `key`, или `pfx`). Опционально, свойство `passphrase` должно быть предоставлено, если сертификат зашифрован. Свойство `origin` должно быть предоставлено с точным совпадением с источником запроса, для которого сертификат действителен.
  
  Client certificate authentication is only active when at least one client certificate is provided. If you want to reject all client certificates sent by the server, you need to provide a client certificate with an `origin` that does not match any of the domains you plan to visit.
  
  :::note
  
  При использовании WebKit на macOS, доступ к `localhost` не будет использовать клиентские сертификаты. Вы можете сделать это, заменив `localhost` на `local.playwright`.
  :::
  
- `color_scheme` "light" | "dark" | "no-preference" | "null" *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-color-scheme"/><a href="#browser-new-page-option-color-scheme" class="list-anchor">#</a>
  
  Эмулирует медиа-функцию [prefers-colors-scheme](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme), поддерживаемые значения: `'light'` и `'dark'`. Подробнее см. [page.emulate_media()](/api/class-page.mdx#page-emulate-media). Передача `'null'` сбрасывает эмуляцию на системные настройки по умолчанию. По умолчанию `'light'`.
- `contrast` "no-preference" | "more" | "null" *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-contrast"/><a href="#browser-new-page-option-contrast" class="list-anchor">#</a>
  
  Эмулирует медиа-функцию `'prefers-contrast'`, поддерживаемые значения: `'no-preference'`, `'more'`. Подробнее см. [page.emulate_media()](/api/class-page.mdx#page-emulate-media). Передача `'null'` сбрасывает эмуляцию на системные настройки по умолчанию. По умолчанию `'no-preference'`.
- `device_scale_factor` [float] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-device-scale-factor"/><a href="#browser-new-page-option-device-scale-factor" class="list-anchor">#</a>
  
  Указывает коэффициент масштабирования устройства (можно рассматривать как dpr). По умолчанию `1`. Узнайте больше о [эмуляции устройств с коэффициентом масштабирования устройства](../emulation.mdx#devices).
- `extra_http_headers` [Dict]\[[str], [str]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-extra-http-headers"/><a href="#browser-new-page-option-extra-http-headers" class="list-anchor">#</a>
  
  Объект, содержащий дополнительные HTTP-заголовки, которые будут отправляться с каждым запросом. По умолчанию отсутствуют.
- `forced_colors` "active" | "none" | "null" *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-forced-colors"/><a href="#browser-new-page-option-forced-colors" class="list-anchor">#</a>
  
  Эмулирует медиа-функцию `'forced-colors'`, поддерживаемые значения: `'active'`, `'none'`. Подробнее см. [page.emulate_media()](/api/class-page.mdx#page-emulate-media). Передача `'null'` сбрасывает эмуляцию на системные настройки по умолчанию. По умолчанию `'none'`.
- `geolocation` [Dict] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-geolocation"/><a href="#browser-new-page-option-geolocation" class="list-anchor">#</a>
  - `latitude` [float]
    
    Широта от -90 до 90.
  - `longitude` [float]
    
    Долгота от -180 до 180.
  - `accuracy` [float] *(опционально)*
    
    Неотрицательное значение точности. По умолчанию `0`.
- `has_touch` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-has-touch"/><a href="#browser-new-page-option-has-touch" class="list-anchor">#</a>
  
  Указывает, поддерживает ли видовая область сенсорные события. По умолчанию false. Узнайте больше о [мобильной эмуляции](../emulation.mdx#devices).
- `http_credentials` [Dict] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-http-credentials"/><a href="#browser-new-page-option-http-credentials" class="list-anchor">#</a>
  - `username` [str]
    
    
  - `password` [str]
    
    
  - `origin` [str] *(опционально)*
    
    Ограничивает отправку HTTP-учетных данных на определенный источник (scheme://host:port).
  - `send` "unauthorized" | "always" *(опционально)*
    
    Эта опция применяется только к запросам, отправленным из соответствующего [APIRequestContext] и не влияет на запросы, отправленные из браузера. `'always'` - заголовок `Authorization` с учетными данными базовой аутентификации будет отправляться с каждым API-запросом. `'unauthorized` - учетные данные отправляются только при получении ответа 401 (Unauthorized) с заголовком `WWW-Authenticate`. По умолчанию `'unauthorized'`.
  
  Учетные данные для [HTTP-аутентификации](https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication). Если источник не указан, имя пользователя и пароль отправляются на любые серверы при получении неавторизованных ответов.
- `ignore_https_errors` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-ignore-https-errors"/><a href="#browser-new-page-option-ignore-https-errors" class="list-anchor">#</a>
  
  Игнорировать ли ошибки HTTPS при отправке сетевых запросов. По умолчанию `false`.
- `is_mobile` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-is-mobile"/><a href="#browser-new-page-option-is-mobile" class="list-anchor">#</a>
  
  Учитывается ли тег `meta viewport` и включены ли сенсорные события. isMobile является частью устройства, поэтому вам не нужно устанавливать его вручную. По умолчанию `false` и не поддерживается в Firefox. Узнайте больше о [мобильной эмуляции](../emulation.mdx#ismobile).
- `java_script_enabled` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-java-script-enabled"/><a href="#browser-new-page-option-java-script-enabled" class="list-anchor">#</a>
  
  Включать ли JavaScript в контексте. По умолчанию `true`. Узнайте больше о [отключении JavaScript](../emulation.mdx#javascript-enabled).
- `locale` [str] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-locale"/><a href="#browser-new-page-option-locale" class="list-anchor">#</a>
  
  Укажите локаль пользователя, например `en-GB`, `de-DE` и т.д. Локаль повлияет на значение `navigator.language`, значение заголовка запроса `Accept-Language`, а также на правила форматирования чисел и дат. По умолчанию используется системная локаль. Узнайте больше о эмуляции в нашем [руководстве по эмуляции](../emulation.mdx#locale--timezone).
- `no_viewport` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-no-viewport"/><a href="#browser-new-page-option-no-viewport" class="list-anchor">#</a>
  
  Не применять фиксированную видовую область, позволяет изменять размер окна в режиме с заголовком.
- `offline` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-offline"/><a href="#browser-new-page-option-offline" class="list-anchor">#</a>
  
  Эмулировать ли отключение сети. По умолчанию `false`. Узнайте больше о [эмуляции сети](../emulation.mdx#offline).
- `permissions` [List]\[[str]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-permissions"/><a href="#browser-new-page-option-permissions" class="list-anchor">#</a>
  
  Список разрешений, которые будут предоставлены всем страницам в этом контексте. Подробнее см. [browser_context.grant_permissions()](/api/class-browsercontext.mdx#browser-context-grant-permissions). По умолчанию отсутствуют.
- `proxy` [Dict] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-proxy"/><a href="#browser-new-page-option-proxy" class="list-anchor">#</a>
  - `server` [str]
    
    Прокси, который будет использоваться для всех запросов. Поддерживаются HTTP и SOCKS прокси, например `http://myproxy.com:3128` или `socks5://myproxy.com:3128`. Краткая форма `myproxy.com:3128` считается HTTP прокси.
  - `bypass` [str] *(опционально)*
    
    Опциональные домены, разделенные запятыми, для обхода прокси, например `".com, chromium.org, .domain.com"`.
  - `username` [str] *(опционально)*
    
    Опциональное имя пользователя для использования, если HTTP прокси требует аутентификации.
  - `password` [str] *(опционально)*
    
    Опциональный пароль для использования, если HTTP прокси требует аутентификации.
  
  Настройки сетевого прокси для использования с этим контекстом. По умолчанию отсутствуют.
- `record_har_content` "omit" | "embed" | "attach" *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-record-har-content"/><a href="#browser-new-page-option-record-har-content" class="list-anchor">#</a>
  
  Опциональная настройка для управления содержимым ресурсов. Если указано `omit`, содержимое не сохраняется. Если указано `attach`, ресурсы сохраняются как отдельные файлы, и все эти файлы архивируются вместе с HAR файлом. По умолчанию `embed`, что сохраняет содержимое в HAR файле в соответствии со спецификацией HAR.
- `record_har_mode` "full" | "minimal" *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-record-har-mode"/><a href="#browser-new-page-option-record-har-mode" class="list-anchor">#</a>
  
  При установке в `minimal`, записывается только информация, необходимая для маршрутизации из HAR. Это исключает размеры, время, страницу, куки, безопасность и другие типы информации HAR, которые не используются при воспроизведении из HAR. По умолчанию `full`.
- `record_har_omit_content` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-record-har-omit-content"/><a href="#browser-new-page-option-record-har-omit-content" class="list-anchor">#</a>
  
  Опциональная настройка для управления тем, следует ли исключать содержимое запроса из HAR. По умолчанию `false`.
- `record_har_path` [Union]\[[str], [pathlib.Path]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-record-har-path"/><a href="#browser-new-page-option-record-har-path" class="list-anchor">#</a>
  
  Включает запись [HAR](http://www.softwareishard.com/blog/har-12-spec) для всех страниц в указанный HAR файл на файловой системе. Если не указано, HAR не записывается. Убедитесь, что вызов [browser_context.close()](/api/class-browsercontext.mdx#browser-context-close) для сохранения HAR.
- `record_har_url_filter` [str] | [Pattern] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-record-har-url-filter"/><a href="#browser-new-page-option-record-har-url-filter" class="list-anchor">#</a>
- `record_video_dir` [Union]\[[str], [pathlib.Path]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-record-video-dir"/><a href="#browser-new-page-option-record-video-dir" class="list-anchor">#</a>
  
  Включает запись видео для всех страниц в указанную директорию. Если не указано, видео не записываются. Убедитесь, что вызов [browser_context.close()](/api/class-browsercontext.mdx#browser-context-close) для сохранения видео.
- `record_video_size` [Dict] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-record-video-size"/><a href="#browser-new-page-option-record-video-size" class="list-anchor">#</a>
  - `width` [int]
    
    Ширина кадра видео.
  - `height` [int]
    
    Высота кадра видео.
  
  Размеры записанных видео. Если не указано, размер будет равен `viewport`, уменьшенному до 800x800. Если `viewport` не настроен явно, размер видео по умолчанию 800x450. Фактическое изображение каждой страницы будет уменьшено, если необходимо, чтобы соответствовать указанному размеру.
- `reduced_motion` "reduce" | "no-preference" | "null" *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-reduced-motion"/><a href="#browser-new-page-option-reduced-motion" class="list-anchor">#</a>
  
  Эмулирует медиа-функцию `'prefers-reduced-motion'`, поддерживаемые значения: `'reduce'`, `'no-preference'`. Подробнее см. [page.emulate_media()](/api/class-page.mdx#page-emulate-media). Передача `'null'` сбрасывает эмуляцию на системные настройки по умолчанию. По умолчанию `'no-preference'`.
- `screen` [Dict] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-screen"/><a href="#browser-new-page-option-screen" class="list-anchor">#</a>
  - `width` [int]
    
    Ширина страницы в пикселях.
  - `height` [int]
    
    Высота страницы в пикселях.
  
  Эмулирует постоянный размер экрана окна, доступный внутри веб-страницы через `window.screen`. Используется только при установке [viewport](/api/class-browser.mdx#browser-new-page-option-viewport).
- `service_workers` "allow" | "block" *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-service-workers"/><a href="#browser-new-page-option-service-workers" class="list-anchor">#</a>
  
  Разрешать ли сайтам регистрировать сервис-воркеры. По умолчанию `'allow'`.
  * `'allow'`: [Сервис-воркеры](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API) могут быть зарегистрированы.
  * `'block'`: Playwright будет блокировать всю регистрацию сервис-воркеров.
- `storage_state` [Union]\[[str], [pathlib.Path]\] | [Dict] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-storage-state"/><a href="#browser-new-page-option-storage-state" class="list-anchor">#</a>
  - `cookies` [List]\[[Dict]\]
    - `name` [str]
      
      
    - `value` [str]
      
      
    - `domain` [str]
      
      Домен и путь обязательны. Чтобы куки применялись ко всем поддоменам, добавьте точку перед доменом, например: ".example.com"
    - `path` [str]
      
      Домен и путь обязательны
    - `expires` [float]
      
      Время в секундах по Unix.
    - `httpOnly` [bool]
      
      
    - `secure` [bool]
      
      
    - `sameSite` "Strict" | "Lax" | "None"
      
      флаг sameSite
    
    Куки для установки в контексте
  - `origins` [List]\[[Dict]\]
    - `origin` [str]
      
      
    - `localStorage` [List]\[[Dict]\]
      - `name` [str]
        
        
      - `value` [str]
        
        
      localStorage для установки в контексте
    
    
  Узнайте больше о [состоянии хранилища и аутентификации](../auth.mdx).
  
  Заполняет контекст заданным состоянием хранилища. Эта опция может быть использована для инициализации контекста с информацией о входе, полученной через [browser_context.storage_state()](/api/class-browsercontext.mdx#browser-context-storage-state).
- `strict_selectors` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-strict-selectors"/><a href="#browser-new-page-option-strict-selectors" class="list-anchor">#</a>
  
  Если установлено в true, включает режим строгих селекторов для этого контекста. В режиме строгих селекторов все операции с селекторами, которые подразумевают один целевой элемент DOM, будут вызывать ошибку, если более одного элемента соответствует селектору. Эта опция не влияет на любые API локаторов (локаторы всегда строгие). По умолчанию `false`. См. [Locator], чтобы узнать больше о строгом режиме.
- `timezone_id` [str] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-timezone-id"/><a href="#browser-new-page-option-timezone-id" class="list-anchor">#</a>
  
  Изменяет часовой пояс контекста. См. [ICU's metaZones.txt](https://cs.chromium.org/chromium/src/third_party/icu/source/data/misc/metaZones.txt?rcl=faee8bc70570192d82d2978a71e2a615788597d1) для списка поддерживаемых идентификаторов часовых поясов. По умолчанию используется системный часовой пояс.
- `user_agent` [str] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-user-agent"/><a href="#browser-new-page-option-user-agent" class="list-anchor">#</a>
  
  Специфический пользовательский агент для использования в этом контексте.
- `viewport` [NoneType] | [Dict] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-option-viewport"/><a href="#browser-new-page-option-viewport" class="list-anchor">#</a>
  - `width` [int]
    
    Ширина страницы в пикселях.
  - `height` [int]
    
    Высота страницы в пикселях.
  
  Устанавливает постоянную видовую область для каждой страницы. По умолчанию используется видовая область 1280x720. `no_viewport` отключает фиксированную видовую область. Узнайте больше о [эмуляции видовой области](../emulation.mdx#viewport).

**Возвращает**
- [Page]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-new-page-return"/><a href="#browser-new-page-return" class="list-anchor">#</a>

---

### start_tracing {#browser-start-tracing}

<font size="2" style={{position: "relative", top: "-20px"}}>Added in: v1.11</font><x-search>browser.start_tracing</x-search>

:::note

Этот API управляет [Chromium Tracing](https://www.chromium.org/developers/how-tos/trace-event-profiling-tool), который является низкоуровневым инструментом отладки, специфичным для Chromium. API для управления [Playwright Tracing](../trace-viewer) можно найти [здесь](./class-tracing).
:::

Вы можете использовать [browser.start_tracing()](/api/class-browser.mdx#browser-start-tracing) и [browser.stop_tracing()](/api/class-browser.mdx#browser-stop-tracing), чтобы создать файл трассировки, который можно открыть в панели производительности Chrome DevTools.

**Использование**

<Tabs
  groupId="python-flavor"
  defaultValue="sync"
  values={[
    {label: 'Sync', value: 'sync'},
    {label: 'Async', value: 'async'}
  ]
}>
<TabItem value="sync">

```py
browser.start_tracing(page, path="trace.json")
page.goto("https://www.google.com")
browser.stop_tracing()
```

</TabItem>
<TabItem value="async">

```py
await browser.start_tracing(page, path="trace.json")
await page.goto("https://www.google.com")
await browser.stop_tracing()
```

</TabItem>
</Tabs>

**Аргументы**
- `page` [Page] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-start-tracing-option-page"/><a href="#browser-start-tracing-option-page" class="list-anchor">#</a>
  
  Опционально, если указано, трассировка включает скриншоты данной страницы.
- `categories` [List]\[[str]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-start-tracing-option-categories"/><a href="#browser-start-tracing-option-categories" class="list-anchor">#</a>
  
  укажите пользовательские категории для использования вместо стандартных.
- `path` [Union]\[[str], [pathlib.Path]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-start-tracing-option-path"/><a href="#browser-start-tracing-option-path" class="list-anchor">#</a>
  
  Путь для записи файла трассировки.
- `screenshots` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-start-tracing-option-screenshots"/><a href="#browser-start-tracing-option-screenshots" class="list-anchor">#</a>
  
  захватывает скриншоты в трассировке.

**Возвращает**
- [NoneType]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-start-tracing-return"/><a href="#browser-start-tracing-return" class="list-anchor">#</a>

---

### stop_tracing {#browser-stop-tracing}

<font size="2" style={{position: "relative", top: "-20px"}}>Added in: v1.11</font><x-search>browser.stop_tracing</x-search>

:::note

Этот API управляет [Chromium Tracing](https://www.chromium.org/developers/how-tos/trace-event-profiling-tool), который является низкоуровневым инструментом отладки, специфичным для Chromium. API для управления [Playwright Tracing](../trace-viewer) можно найти [здесь](./class-tracing).
:::

Возвращает буфер с данными трассировки.

**Использование**

```python
browser.stop_tracing()
```

**Возвращает**
- [bytes]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-stop-tracing-return"/><a href="#browser-stop-tracing-return" class="list-anchor">#</a>

---

## Свойства

### browser_type {#browser-browser-type}

<font size="2" style={{position: "relative", top: "-20px"}}>Added in: v1.23</font><x-search>browser.browser_type</x-search>

Получить тип браузера (chromium, firefox или webkit), к которому принадлежит браузер.

**Использование**

```python
browser.browser_type
```

**Возвращает**
- [BrowserType]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-browser-type-return"/><a href="#browser-browser-type-return" class="list-anchor">#</a>

---

### contexts {#browser-contexts}

<font size="2" style={{position: "relative", top: "-20px"}}>Added before v1.9</font><x-search>browser.contexts</x-search>

Возвращает массив всех открытых контекстов браузера. В недавно созданном браузере это вернет ноль контекстов браузера.

**Использование**

<Tabs
  groupId="python-flavor"
  defaultValue="sync"
  values={[
    {label: 'Sync', value: 'sync'},
    {label: 'Async', value: 'async'}
  ]
}>
<TabItem value="sync">

```py
browser = pw.webkit.launch()
print(len(browser.contexts)) # выводит `0`
context = browser.new_context()
print(len(browser.contexts)) # выводит `1`
```

</TabItem>
<TabItem value="async">

```py
browser = await pw.webkit.launch()
print(len(browser.contexts)) # выводит `0`
context = await browser.new_context()
print(len(browser.contexts)) # выводит `1`
```

</TabItem>
</Tabs>

**Возвращает**
- [List]\[[BrowserContext]\]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-contexts-return"/><a href="#browser-contexts-return" class="list-anchor">#</a>

---

### is_connected {#browser-is-connected}

<font size="2" style={{position: "relative", top: "-20px"}}>Added before v1.9</font><x-search>browser.is_connected</x-search>

Указывает, что браузер подключен.

**Использование**

```python
browser.is_connected()
```

**Возвращает**
- [bool]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-is-connected-return"/><a href="#browser-is-connected-return" class="list-anchor">#</a>

---

### version {#browser-version}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено до версии v1.9</font><x-search>browser.version</x-search>

Возвращает версию браузера.

**Использование**

```python
browser.version
```

**Возвращает**
- [str]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="browser-version-return"/><a href="#browser-version-return" class="list-anchor">#</a>

---

## События

### on("disconnected") {#browser-event-disconnected}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено до версии v1.9</font><x-search>browser.on("disconnected")</x-search>

Вызывается, когда браузер отключается от приложения браузера. Это может произойти по одной из следующих причин:
* Приложение браузера закрыто или аварийно завершило работу.
* Был вызван метод [browser.close()](/api/class-browser.mdx#browser-close).

**Использование**

```python
browser.on("disconnected", handler)
```

**Данные события**
- [Browser]


[APIRequest]: /api/class-apirequest.mdx "APIRequest"
[APIRequestContext]: /api/class-apirequestcontext.mdx "APIRequestContext"
[APIResponse]: /api/class-apiresponse.mdx "APIResponse"
[APIResponseAssertions]: /api/class-apiresponseassertions.mdx "APIResponseAssertions"
[Browser]: /api/class-browser.mdx "Browser"
[BrowserContext]: /api/class-browsercontext.mdx "BrowserContext"
[BrowserType]: /api/class-browsertype.mdx "BrowserType"
[CDPSession]: /api/class-cdpsession.mdx "CDPSession"
[Clock]: /api/class-clock.mdx "Clock"
[ConsoleMessage]: /api/class-consolemessage.mdx "ConsoleMessage"
[Dialog]: /api/class-dialog.mdx "Dialog"
[Download]: /api/class-download.mdx "Download"
[ElementHandle]: /api/class-elementhandle.mdx "ElementHandle"
[Error]: /api/class-error.mdx "Error"
[FileChooser]: /api/class-filechooser.mdx "FileChooser"
[Frame]: /api/class-frame.mdx "Frame"
[FrameLocator]: /api/class-framelocator.mdx "FrameLocator"
[JSHandle]: /api/class-jshandle.mdx "JSHandle"
[Keyboard]: /api/class-keyboard.mdx "Keyboard"
[Locator]: /api/class-locator.mdx "Locator"
[LocatorAssertions]: /api/class-locatorassertions.mdx "LocatorAssertions"
[Mouse]: /api/class-mouse.mdx "Mouse"
[Page]: /api/class-page.mdx "Page"
[PageAssertions]: /api/class-pageassertions.mdx "PageAssertions"
[Playwright]: /api/class-playwright.mdx "Playwright"
[Request]: /api/class-request.mdx "Request"
[Response]: /api/class-response.mdx "Response"
[Route]: /api/class-route.mdx "Route"
[Selectors]: /api/class-selectors.mdx "Selectors"
[TimeoutError]: /api/class-timeouterror.mdx "TimeoutError"
[Touchscreen]: /api/class-touchscreen.mdx "Touchscreen"
[Tracing]: /api/class-tracing.mdx "Tracing"
[Video]: /api/class-video.mdx "Video"
[WebError]: /api/class-weberror.mdx "WebError"
[WebSocket]: /api/class-websocket.mdx "WebSocket"
[WebSocketRoute]: /api/class-websocketroute.mdx "WebSocketRoute"
[Worker]: /api/class-worker.mdx "Worker"
[Element]: https://developer.mozilla.org/en-US/docs/Web/API/element "Element"
[EvaluationArgument]: /evaluating.mdx#evaluation-argument "EvaluationArgument"
[Promise]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"
[iterator]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols "Iterator"
[origin]: https://developer.mozilla.org/en-US/docs/Glossary/Origin "Origin"
[selector]: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors "selector"
[Serializable]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable"
[UIEvent.detail]: https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detail "UIEvent.detail"
[UnixTime]: https://en.wikipedia.org/wiki/Unix_time "Unix Time"
[xpath]: https://developer.mozilla.org/en-US/docs/Web/XPath "xpath"

[Any]: https://docs.python.org/3/library/typing.html#typing.Any "Any"
[bool]: https://docs.python.org/3/library/stdtypes.html "bool"
[bytes]: https://docs.python.org/3/library/stdtypes.html#bytes "bytes"
[Callable]: https://docs.python.org/3/library/typing.html#typing.Callable "Callable"
[EventContextManager]: https://docs.python.org/3/reference/datamodel.html#context-managers "Event context manager"
[EventEmitter]: https://pyee.readthedocs.io/en/latest/#pyee.BaseEventEmitter "EventEmitter"
[Exception]: https://docs.python.org/3/library/exceptions.html#Exception "Exception"
[Dict]: https://docs.python.org/3/library/typing.html#typing.Dict "Dict"
[float]: https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float"
[int]: https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int"
[List]: https://docs.python.org/3/library/typing.html#typing.List "List"
[NoneType]: https://docs.python.org/3/library/constants.html#None "None"
[Pattern]: https://docs.python.org/3/library/re.html "Pattern"
[URL]: https://en.wikipedia.org/wiki/URL "URL"
[pathlib.Path]: https://realpython.com/python-pathlib/ "pathlib.Path"
[str]: https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"
[Union]: https://docs.python.org/3/library/typing.html#typing.Union "Union"
[datetime]: https://docs.python.org/3/library/datetime.html#datetime.datetime "datetime"

[all available image tags]: https://mcr.microsoft.com/en-us/product/playwright/python/about "all available image tags"
[Microsoft Artifact Registry]: https://mcr.microsoft.com/en-us/product/playwright/python/about "Microsoft Artifact Registry"
[Dockerfile.noble]: https://github.com/microsoft/playwright-python/blob/main/utils/docker/Dockerfile.noble "Dockerfile.noble"
