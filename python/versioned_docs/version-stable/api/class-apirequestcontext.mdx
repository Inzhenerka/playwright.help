---
id: class-apirequestcontext
title: "APIRequestContext"
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import HTMLCard from '@site/src/components/HTMLCard';

Этот API используется для тестирования веб-API. Вы можете использовать его для вызова конечных точек API, настройки микросервисов, подготовки окружения или сервиса для вашего e2e теста.

Каждый контекст браузера Playwright имеет связанный с ним экземпляр [APIRequestContext], который разделяет хранилище cookie с контекстом браузера и может быть доступен через [browser_context.request](/api/class-browsercontext.mdx#browser-context-request) или [page.request](/api/class-page.mdx#page-request). Также возможно создать новый экземпляр APIRequestContext вручную, вызвав [api_request.new_context()](/api/class-apirequest.mdx#api-request-new-context).

**Управление cookie**

[APIRequestContext], возвращаемый [browser_context.request](/api/class-browsercontext.mdx#browser-context-request) и [page.request](/api/class-page.mdx#page-request), разделяет хранилище cookie с соответствующим [BrowserContext]. Каждый API-запрос будет иметь заголовок `Cookie`, заполненный значениями из контекста браузера. Если ответ API содержит заголовок `Set-Cookie`, он автоматически обновит cookies [BrowserContext], и запросы, сделанные со страницы, их подхватят. Это означает, что если вы войдете в систему с помощью этого API, ваш e2e тест будет выполнен с авторизацией и наоборот.

Если вы хотите, чтобы API-запросы не вмешивались в cookies браузера, вы должны создать новый [APIRequestContext], вызвав [api_request.new_context()](/api/class-apirequest.mdx#api-request-new-context). Такой объект `APIRequestContext` будет иметь собственное изолированное хранилище cookie.

<Tabs
  groupId="python-flavor"
  defaultValue="sync"
  values={[
    {label: 'Sync', value: 'sync'},
    {label: 'Async', value: 'async'}
  ]
}>
<TabItem value="sync">

```py
import os
from playwright.sync_api import sync_playwright

REPO = "test-repo-1"
USER = "github-username"
API_TOKEN = os.getenv("GITHUB_API_TOKEN")

with sync_playwright() as p:
    # Это запустит новый браузер, создаст контекст и страницу. При выполнении HTTP
    # запросов с использованием внутреннего APIRequestContext (например, `context.request` или `page.request`)
    # cookies будут автоматически установлены на странице браузера и наоборот.
    browser = p.chromium.launch()
    context = browser.new_context(base_url="https://api.github.com")
    api_request_context = context.request
    page = context.new_page()

    # В качестве альтернативы вы можете создать APIRequestContext вручную без привязки к контексту браузера:
    # api_request_context = p.request.new_context(base_url="https://api.github.com")

    # Создать репозиторий.
    response = api_request_context.post(
        "/user/repos",
        headers={
            "Accept": "application/vnd.github.v3+json",
            # Добавить персональный токен доступа GitHub.
            "Authorization": f"token {API_TOKEN}",
        },
        data={"name": REPO},
    )
    assert response.ok
    assert response.json()["name"] == REPO

    # Удалить репозиторий.
    response = api_request_context.delete(
        f"/repos/{USER}/{REPO}",
        headers={
            "Accept": "application/vnd.github.v3+json",
            # Добавить персональный токен доступа GitHub.
            "Authorization": f"token {API_TOKEN}",
        },
    )
    assert response.ok
    assert await response.body() == '{"status": "ok"}'
```

</TabItem>
<TabItem value="async">

```py
import os
import asyncio
from playwright.async_api import async_playwright, Playwright

REPO = "test-repo-1"
USER = "github-username"
API_TOKEN = os.getenv("GITHUB_API_TOKEN")

async def run(playwright: Playwright):
    # Это запустит новый браузер, создаст контекст и страницу. При выполнении HTTP
    # запросов с использованием внутреннего APIRequestContext (например, `context.request` или `page.request`)
    # cookies будут автоматически установлены на странице браузера и наоборот.
    browser = await playwright.chromium.launch()
    context = await browser.new_context(base_url="https://api.github.com")
    api_request_context = context.request
    page = await context.new_page()

    # В качестве альтернативы вы можете создать APIRequestContext вручную без привязки к контексту браузера:
    # api_request_context = await playwright.request.new_context(base_url="https://api.github.com")

    # Создать репозиторий.
    response = await api_request_context.post(
        "/user/repos",
        headers={
            "Accept": "application/vnd.github.v3+json",
            # Добавить персональный токен доступа GitHub.
            "Authorization": f"token {API_TOKEN}",
        },
        data={"name": REPO},
    )
    assert response.ok
    assert response.json()["name"] == REPO

    # Удалить репозиторий.
    response = await api_request_context.delete(
        f"/repos/{USER}/{REPO}",
        headers={
            "Accept": "application/vnd.github.v3+json",
            # Добавить персональный токен доступа GitHub.
            "Authorization": f"token {API_TOKEN}",
        },
    )
    assert response.ok
    assert await response.body() == '{"status": "ok"}'

async def main():
    async with async_playwright() as playwright:
        await run(playwright)

asyncio.run(main())
```

</TabItem>
</Tabs>

---

## Методы

### delete {#api-request-context-delete}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.16</font><x-search>apiRequestContext.delete</x-search>

Отправляет HTTP(S) запрос [DELETE](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/DELETE) и возвращает его ответ. Метод заполнит cookies запроса из контекста и обновит cookies контекста из ответа. Метод автоматически следует за перенаправлениями.

**Использование**

```python
api_request_context.delete(url)
api_request_context.delete(url, **kwargs)
```

**Аргументы**
- `url` [str]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-url"/><a href="#api-request-context-delete-option-url" class="list-anchor">#</a>
  
  Целевой URL.
- `data` [str] | [bytes] | [Dict] *(опционально)* <font size="2">Добавлено в: v1.17</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-data"/><a href="#api-request-context-delete-option-data" class="list-anchor">#</a>
  
  Позволяет установить данные запроса. Если параметр data является объектом, он будет сериализован в строку json, и заголовок `content-type` будет установлен в `application/json`, если не указан явно. В противном случае заголовок `content-type` будет установлен в `application/octet-stream`, если не указан явно.
- `fail_on_status_code` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-fail-on-status-code"/><a href="#api-request-context-delete-option-fail-on-status-code" class="list-anchor">#</a>
  
  Следует ли выбрасывать исключение для кодов ответа, отличных от 2xx и 3xx. По умолчанию объект ответа возвращается для всех кодов состояния.
- `form` [Dict]\[[str], [str] | [float] | [bool]\] *(опционально)* <font size="2">Добавлено в: v1.17</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-form"/><a href="#api-request-context-delete-option-form" class="list-anchor">#</a>
  
  Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `application/x-www-form-urlencoded` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `application/x-www-form-urlencoded`, если не указан явно.
- `headers` [Dict]\[[str], [str]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-headers"/><a href="#api-request-context-delete-option-headers" class="list-anchor">#</a>
  
  Позволяет установить HTTP-заголовки. Эти заголовки будут применяться к запрашиваемому запросу, а также к любым перенаправлениям, инициированным им.
- `ignore_https_errors` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-ignore-https-errors"/><a href="#api-request-context-delete-option-ignore-https-errors" class="list-anchor">#</a>
  
  Следует ли игнорировать ошибки HTTPS при отправке сетевых запросов. По умолчанию `false`.
- `max_redirects` [int] *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-max-redirects"/><a href="#api-request-context-delete-option-max-redirects" class="list-anchor">#</a>
  
  Максимальное количество перенаправлений запроса, которые будут автоматически выполнены. Ошибка будет выброшена, если количество превышено. По умолчанию `20`. Передайте `0`, чтобы не следовать за перенаправлениями.
- `max_retries` [int] *(опционально)* <font size="2">Добавлено в: v1.46</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-max-retries"/><a href="#api-request-context-delete-option-max-retries" class="list-anchor">#</a>
  
  Максимальное количество повторных попыток при сетевых ошибках. В настоящее время повторно пытается только ошибку `ECONNRESET`. Не повторяет попытки на основе кодов ответа HTTP. Ошибка будет выброшена, если лимит превышен. По умолчанию `0` - без повторных попыток.
- `multipart` [Dict]\[[str], [str] | [float] | [bool] | [ReadStream] | [Dict]\] *(опционально)* <font size="2">Добавлено в: v1.17</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-multipart"/><a href="#api-request-context-delete-option-multipart" class="list-anchor">#</a>
  - `name` [str]
    
    Имя файла
  - `mimeType` [str]
    
    Тип файла
  - `buffer` [bytes]
    
    Содержимое файла
  
  Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `multipart/form-data` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `multipart/form-data`, если не указан явно. Значения файлов могут быть переданы как объект, содержащий имя файла, mime-тип и его содержимое.
- `params` [Dict]\[[str], [str] | [float] | [bool]\] | [str] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-params"/><a href="#api-request-context-delete-option-params" class="list-anchor">#</a>
  
  Параметры запроса, которые будут отправлены с URL.
- `timeout` [float] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-option-timeout"/><a href="#api-request-context-delete-option-timeout" class="list-anchor">#</a>
  
  Тайм-аут запроса в миллисекундах. По умолчанию `30000` (30 секунд). Передайте `0`, чтобы отключить тайм-аут.

**Возвращает**
- [APIResponse]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-delete-return"/><a href="#api-request-context-delete-return" class="list-anchor">#</a>

---

### dispose {#api-request-context-dispose}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.16</font><x-search>apiRequestContext.dispose</x-search>

Все ответы, возвращаемые [api_request_context.get()](/api/class-apirequestcontext.mdx#api-request-context-get) и аналогичными методами, хранятся в памяти, чтобы вы могли позже вызвать [api_response.body()](/api/class-apiresponse.mdx#api-response-body). Этот метод освобождает все свои ресурсы, вызов любого метода на освобожденном [APIRequestContext] вызовет исключение.

**Использование**

```python
api_request_context.dispose()
api_request_context.dispose(**kwargs)
```

**Аргументы**
- `reason` [str] *(опционально)* <font size="2">Добавлено в: v1.45</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-dispose-option-reason"/><a href="#api-request-context-dispose-option-reason" class="list-anchor">#</a>
  
  Причина, которая будет сообщена операциям, прерванным освобождением контекста.

**Возвращает**
- [NoneType]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-dispose-return"/><a href="#api-request-context-dispose-return" class="list-anchor">#</a>

---

### fetch {#api-request-context-fetch}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.16</font><x-search>apiRequestContext.fetch</x-search>

Отправляет HTTP(S) запрос и возвращает его ответ. Метод заполнит cookies запроса из контекста и обновит cookies контекста из ответа. Метод автоматически следует за перенаправлениями.

**Использование**

Объекты JSON могут быть переданы напрямую в запрос:

```python
data = {
    "title": "Book Title",
    "body": "John Doe",
}
api_request_context.fetch("https://example.com/api/createBook", method="post", data=data)
```

Обычный способ отправки файла(ов) в теле запроса - загрузить их как поля формы с кодировкой `multipart/form-data`, указав параметр `multipart`:

```python
api_request_context.fetch(
  "https://example.com/api/uploadScript",  method="post",
  multipart={
    "fileField": {
      "name": "f.js",
      "mimeType": "text/javascript",
      "buffer": b"console.log(2022);",
    },
  })
```

**Аргументы**
- `url_or_request` [str] | [Request]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-url-or-request"/><a href="#api-request-context-fetch-option-url-or-request" class="list-anchor">#</a>
  
  Целевой URL или запрос для получения всех параметров.
- `data` [str] | [bytes] | [Dict] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-data"/><a href="#api-request-context-fetch-option-data" class="list-anchor">#</a>
  
  Позволяет установить данные запроса. Если параметр data является объектом, он будет сериализован в строку json, и заголовок `content-type` будет установлен в `application/json`, если не указан явно. В противном случае заголовок `content-type` будет установлен в `application/octet-stream`, если не указан явно.
- `fail_on_status_code` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-fail-on-status-code"/><a href="#api-request-context-fetch-option-fail-on-status-code" class="list-anchor">#</a>
  
  Следует ли выбрасывать исключение для кодов ответа, отличных от 2xx и 3xx. По умолчанию объект ответа возвращается для всех кодов состояния.
- `form` [Dict]\[[str], [str] | [float] | [bool]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-form"/><a href="#api-request-context-fetch-option-form" class="list-anchor">#</a>
  
  Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `application/x-www-form-urlencoded` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `application/x-www-form-urlencoded`, если не указан явно.
- `headers` [Dict]\[[str], [str]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-headers"/><a href="#api-request-context-fetch-option-headers" class="list-anchor">#</a>
  
  Позволяет установить HTTP-заголовки. Эти заголовки будут применяться к запрашиваемому запросу, а также к любым перенаправлениям, инициированным им.
- `ignore_https_errors` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-ignore-https-errors"/><a href="#api-request-context-fetch-option-ignore-https-errors" class="list-anchor">#</a>
  
  Следует ли игнорировать ошибки HTTPS при отправке сетевых запросов. По умолчанию `false`.
- `max_redirects` [int] *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-max-redirects"/><a href="#api-request-context-fetch-option-max-redirects" class="list-anchor">#</a>
  
  Максимальное количество перенаправлений запроса, которые будут автоматически выполнены. Ошибка будет выброшена, если количество превышено. По умолчанию `20`. Передайте `0`, чтобы не следовать за перенаправлениями.
- `max_retries` [int] *(опционально)* <font size="2">Добавлено в: v1.46</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-max-retries"/><a href="#api-request-context-fetch-option-max-retries" class="list-anchor">#</a>
  
  Максимальное количество повторных попыток при сетевых ошибках. В настоящее время повторно пытается только ошибку `ECONNRESET`. Не повторяет попытки на основе кодов ответа HTTP. Ошибка будет выброшена, если лимит превышен. По умолчанию `0` - без повторных попыток.
- `method` [str] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-method"/><a href="#api-request-context-fetch-option-method" class="list-anchor">#</a>
  
  Если установлено, изменяет метод запроса (например, [PUT](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/PUT) или [POST](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST)). Если не указано, используется метод GET.
- `multipart` [Dict]\[[str], [str] | [float] | [bool] | [ReadStream] | [Dict]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-multipart"/><a href="#api-request-context-fetch-option-multipart" class="list-anchor">#</a>
  - `name` [str]
    
    Имя файла
  - `mimeType` [str]
    
    Тип файла
  - `buffer` [bytes]
    
    Содержимое файла
  
  Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `multipart/form-data` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `multipart/form-data`, если не указан явно. Значения файлов могут быть переданы как объект, содержащий имя файла, mime-тип и его содержимое.
- `params` [Dict]\[[str], [str] | [float] | [bool]\] | [str] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-params"/><a href="#api-request-context-fetch-option-params" class="list-anchor">#</a>
  
  Параметры запроса, которые будут отправлены с URL.
- `timeout` [float] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-option-timeout"/><a href="#api-request-context-fetch-option-timeout" class="list-anchor">#</a>
  
  Тайм-аут запроса в миллисекундах. По умолчанию `30000` (30 секунд). Передайте `0`, чтобы отключить тайм-аут.

**Возвращает**
- [APIResponse]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-fetch-return"/><a href="#api-request-context-fetch-return" class="list-anchor">#</a>

---

### get {#api-request-context-get}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.16</font><x-search>apiRequestContext.get</x-search>

Отправляет HTTP(S) запрос [GET](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/GET) и возвращает его ответ. Метод заполнит cookies запроса из контекста и обновит cookies контекста из ответа. Метод автоматически следует за перенаправлениями.

**Использование**

Параметры запроса могут быть настроены с помощью опции `params`, они будут сериализованы в параметры поиска URL:

```python
query_params = {
  "isbn": "1234",
  "page": "23"
}
api_request_context.get("https://example.com/api/getText", params=query_params)
```

**Аргументы**
- `url` [str]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-url"/><a href="#api-request-context-get-option-url" class="list-anchor">#</a>
  
  Целевой URL.
- `data` [str] | [bytes] | [Dict] *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-data"/><a href="#api-request-context-get-option-data" class="list-anchor">#</a>
  
  Позволяет установить данные запроса. Если параметр data является объектом, он будет сериализован в строку json, и заголовок `content-type` будет установлен в `application/json`, если не указан явно. В противном случае заголовок `content-type` будет установлен в `application/octet-stream`, если не указан явно.
- `fail_on_status_code` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-fail-on-status-code"/><a href="#api-request-context-get-option-fail-on-status-code" class="list-anchor">#</a>
  
  Следует ли выбрасывать исключение для кодов ответа, отличных от 2xx и 3xx. По умолчанию объект ответа возвращается для всех кодов состояния.
- `form` [Dict]\[[str], [str] | [float] | [bool]\] *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-form"/><a href="#api-request-context-get-option-form" class="list-anchor">#</a>
  
  Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `application/x-www-form-urlencoded` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `application/x-www-form-urlencoded`, если не указан явно.
- `headers` [Dict]\[[str], [str]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-headers"/><a href="#api-request-context-get-option-headers" class="list-anchor">#</a>
  
  Позволяет установить HTTP-заголовки. Эти заголовки будут применяться к запрашиваемому запросу, а также к любым перенаправлениям, инициированным им.
- `ignore_https_errors` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-ignore-https-errors"/><a href="#api-request-context-get-option-ignore-https-errors" class="list-anchor">#</a>
  
  Следует ли игнорировать ошибки HTTPS при отправке сетевых запросов. По умолчанию `false`.
- `max_redirects` [int] *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-max-redirects"/><a href="#api-request-context-get-option-max-redirects" class="list-anchor">#</a>
  
  Максимальное количество перенаправлений запроса, которые будут автоматически выполнены. Ошибка будет выброшена, если количество превышено. По умолчанию `20`. Передайте `0`, чтобы не следовать за перенаправлениями.
- `max_retries` [int] *(опционально)* <font size="2">Добавлено в: v1.46</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-max-retries"/><a href="#api-request-context-get-option-max-retries" class="list-anchor">#</a>
  
  Максимальное количество повторных попыток при сетевых ошибках. В настоящее время повторно пытается только ошибку `ECONNRESET`. Не повторяет попытки на основе кодов ответа HTTP. Ошибка будет выброшена, если лимит превышен. По умолчанию `0` - без повторных попыток.
- `multipart` [Dict]\[[str], [str] | [float] | [bool] | [ReadStream] | [Dict]\] *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-multipart"/><a href="#api-request-context-get-option-multipart" class="list-anchor">#</a>
  - `name` [str]
    
    Имя файла
  - `mimeType` [str]
    
    Тип файла
  - `buffer` [bytes]
    
    Содержимое файла
  
  Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `multipart/form-data` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `multipart/form-data`, если не указан явно. Значения файлов могут быть переданы как объект, содержащий имя файла, mime-тип и его содержимое.
- `params` [Dict]\[[str], [str] | [float] | [bool]\] | [str] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-params"/><a href="#api-request-context-get-option-params" class="list-anchor">#</a>
  
  Параметры запроса, которые будут отправлены с URL.
- `timeout` [float] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-option-timeout"/><a href="#api-request-context-get-option-timeout" class="list-anchor">#</a>
  
  Тайм-аут запроса в миллисекундах. По умолчанию `30000` (30 секунд). Передайте `0`, чтобы отключить тайм-аут.

**Возвращает**
- [APIResponse]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-get-return"/><a href="#api-request-context-get-return" class="list-anchor">#</a>

---

### head {#api-request-context-head}

<font size="2" style={{position: "relative", top: "-20px"}}>Добавлено в: v1.16</font><x-search>apiRequestContext.head</x-search>

Отправляет HTTP(S) запрос [HEAD](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/HEAD) и возвращает его ответ. Метод заполнит cookies запроса из контекста и обновит cookies контекста из ответа. Метод автоматически следует за перенаправлениями.

**Использование**

```python
api_request_context.head(url)
api_request_context.head(url, **kwargs)
```

**Аргументы**
- `url` [str]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-url"/><a href="#api-request-context-head-option-url" class="list-anchor">#</a>
  
  Целевой URL.
- `data` [str] | [bytes] | [Dict] *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-data"/><a href="#api-request-context-head-option-data" class="list-anchor">#</a>
  
  Позволяет установить данные запроса. Если параметр data является объектом, он будет сериализован в строку json, и заголовок `content-type` будет установлен в `application/json`, если не указан явно. В противном случае заголовок `content-type` будет установлен в `application/octet-stream`, если не указан явно.
- `fail_on_status_code` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-fail-on-status-code"/><a href="#api-request-context-head-option-fail-on-status-code" class="list-anchor">#</a>
  
  Следует ли выбрасывать исключение для кодов ответа, отличных от 2xx и 3xx. По умолчанию объект ответа возвращается для всех кодов состояния.
- `form` [Dict]\[[str], [str] | [float] | [bool]\] *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-form"/><a href="#api-request-context-head-option-form" class="list-anchor">#</a>
  
  Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `application/x-www-form-urlencoded` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `application/x-www-form-urlencoded`, если не указан явно.
- `headers` [Dict]\[[str], [str]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-headers"/><a href="#api-request-context-head-option-headers" class="list-anchor">#</a>
  
  Позволяет установить HTTP-заголовки. Эти заголовки будут применяться к запрашиваемому запросу, а также к любым перенаправлениям, инициированным им.
- `ignore_https_errors` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-ignore-https-errors"/><a href="#api-request-context-head-option-ignore-https-errors" class="list-anchor">#</a>
  
  Следует ли игнорировать ошибки HTTPS при отправке сетевых запросов. По умолчанию `false`.
- `max_redirects` [int] *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-max-redirects"/><a href="#api-request-context-head-option-max-redirects" class="list-anchor">#</a>
  
  Максимальное количество перенаправлений запроса, которые будут автоматически выполнены. Ошибка будет выброшена, если количество превышено. По умолчанию `20`. Передайте `0`, чтобы не следовать за перенаправлениями.
- `max_retries` [int] *(опционально)* <font size="2">Добавлено в: v1.46</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-max-retries"/><a href="#api-request-context-head-option-max-retries" class="list-anchor">#</a>
  
  Максимальное количество повторных попыток при сетевых ошибках. В настоящее время повторно пытается только ошибку `ECONNRESET`. Не повторяет попытки на основе кодов ответа HTTP. Ошибка будет выброшена, если лимит превышен. По умолчанию `0` - без повторных попыток.
- `multipart` [Dict]\[[str], [str] | [float] | [bool] | [ReadStream] | [Dict]\] *(опционально)* <font size="2">Добавлено в: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-multipart"/><a href="#api-request-context-head-option-multipart" class="list-anchor">#</a>
  - `name` [str]
    
    Имя файла
  - `mimeType` [str]
    
    Тип файла
  - `buffer` [bytes]
    
    Содержимое файла
  
  Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `multipart/form-data` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `multipart/form-data`, если не указан явно. Значения файлов могут быть переданы как объект, содержащий имя файла, mime-тип и его содержимое.
- `params` [Dict]\[[str], [str] | [float] | [bool]\] | [str] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-params"/><a href="#api-request-context-head-option-params" class="list-anchor">#</a>
  
  Параметры запроса, которые будут отправлены с URL.
- `timeout` [float] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-option-timeout"/><a href="#api-request-context-head-option-timeout" class="list-anchor">#</a>
  
  Тайм-аут запроса в миллисекундах. По умолчанию `30000` (30 секунд). Передайте `0`, чтобы отключить тайм-аут.

**Возвращает**
- [APIResponse]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-head-return"/><a href="#api-request-context-head-return" class="list-anchor">#</a>

---

### patch {#api-request-context-patch}

<font size="2" style={{position: "relative", top: "-20px"}}>Added in: v1.16</font><x-search>apiRequestContext.patch</x-search>

Отправляет HTTP(S) запрос [PATCH](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/PATCH) и возвращает его ответ. Метод будет заполнять cookies запроса из контекста и обновлять cookies контекста из ответа. Метод автоматически следует за перенаправлениями.

**Использование**

```python
api_request_context.patch(url)
api_request_context.patch(url, **kwargs)
```

**Аргументы**
- `url` [str]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-url"/><a href="#api-request-context-patch-option-url" class="list-anchor">#</a>
  
  Целевой URL.
- `data` [str] | [bytes] | [Dict] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-data"/><a href="#api-request-context-patch-option-data" class="list-anchor">#</a>
  
  Позволяет установить данные запроса. Если параметр data является объектом, он будет сериализован в строку json, и заголовок `content-type` будет установлен в `application/json`, если не установлен явно. В противном случае заголовок `content-type` будет установлен в `application/octet-stream`, если не установлен явно.
- `fail_on_status_code` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-fail-on-status-code"/><a href="#api-request-context-patch-option-fail-on-status-code" class="list-anchor">#</a>
  
  Следует ли выбрасывать исключение для кодов ответа, отличных от 2xx и 3xx. По умолчанию объект ответа возвращается для всех кодов состояния.
- `form` [Dict]\[[str], [str] | [float] | [bool]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-form"/><a href="#api-request-context-patch-option-form" class="list-anchor">#</a>
  
  Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `application/x-www-form-urlencoded` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `application/x-www-form-urlencoded`, если не указан явно.
- `headers` [Dict]\[[str], [str]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-headers"/><a href="#api-request-context-patch-option-headers" class="list-anchor">#</a>
  
  Позволяет установить HTTP-заголовки. Эти заголовки будут применяться к запрашиваемому запросу, а также к любым перенаправлениям, инициированным им.
- `ignore_https_errors` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-ignore-https-errors"/><a href="#api-request-context-patch-option-ignore-https-errors" class="list-anchor">#</a>
  
  Следует ли игнорировать ошибки HTTPS при отправке сетевых запросов. По умолчанию `false`.
- `max_redirects` [int] *(опционально)* <font size="2">Added in: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-max-redirects"/><a href="#api-request-context-patch-option-max-redirects" class="list-anchor">#</a>
  
  Максимальное количество перенаправлений запроса, которые будут автоматически следоваться. Ошибка будет выброшена, если количество превышено. По умолчанию `20`. Передайте `0`, чтобы не следовать за перенаправлениями.
- `max_retries` [int] *(опционально)* <font size="2">Added in: v1.46</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-max-retries"/><a href="#api-request-context-patch-option-max-retries" class="list-anchor">#</a>
  
  Максимальное количество повторных попыток при сетевых ошибках. В настоящее время повторно пытается только ошибку `ECONNRESET`. Не повторяет попытки на основе кодов ответа HTTP. Ошибка будет выброшена, если лимит превышен. По умолчанию `0` - без повторных попыток.
- `multipart` [Dict]\[[str], [str] | [float] | [bool] | [ReadStream] | [Dict]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-multipart"/><a href="#api-request-context-patch-option-multipart" class="list-anchor">#</a>
  - `name` [str]
    
    Имя файла
  - `mimeType` [str]
    
    Тип файла
  - `buffer` [bytes]
    
    Содержимое файла
  
  Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `multipart/form-data` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `multipart/form-data`, если не указан явно. Значения файлов могут быть переданы как объект, подобный файлу, содержащий имя файла, mime-тип и его содержимое.
- `params` [Dict]\[[str], [str] | [float] | [bool]\] | [str] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-params"/><a href="#api-request-context-patch-option-params" class="list-anchor">#</a>
  
  Параметры запроса, которые будут отправлены с URL.
- `timeout` [float] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-option-timeout"/><a href="#api-request-context-patch-option-timeout" class="list-anchor">#</a>
  
  Тайм-аут запроса в миллисекундах. По умолчанию `30000` (30 секунд). Передайте `0`, чтобы отключить тайм-аут.

**Возвращает**
- [APIResponse]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-patch-return"/><a href="#api-request-context-patch-return" class="list-anchor">#</a>

---

### post {#api-request-context-post}

<font size="2" style={{position: "relative", top: "-20px"}}>Added in: v1.16</font><x-search>apiRequestContext.post</x-search>

Отправляет HTTP(S) запрос [POST](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST) и возвращает его ответ. Метод будет заполнять cookies запроса из контекста и обновлять cookies контекста из ответа. Метод автоматически следует за перенаправлениями.

**Использование**

JSON объекты могут быть переданы напрямую в запрос:

```python
data = {
    "title": "Book Title",
    "body": "John Doe",
}
api_request_context.post("https://example.com/api/createBook", data=data)
```

Чтобы отправить данные формы на сервер, используйте опцию `form`. Ее значение будет закодировано в теле запроса с использованием кодировки `application/x-www-form-urlencoded` (см. ниже, как использовать кодировку формы `multipart/form-data` для отправки файлов):

```python
formData = {
    "title": "Book Title",
    "body": "John Doe",
}
api_request_context.post("https://example.com/api/findBook", form=formData)
```

Обычный способ отправки файла(ов) в теле запроса - загрузить их как поля формы с кодировкой `multipart/form-data`. Используйте [FormData] для создания тела запроса и передайте его в запрос как параметр `multipart`:

```python
api_request_context.post(
  "https://example.com/api/uploadScript'",
  multipart={
    "fileField": {
      "name": "f.js",
      "mimeType": "text/javascript",
      "buffer": b"console.log(2022);",
    },
  })
```

**Аргументы**
- `url` [str]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-url"/><a href="#api-request-context-post-option-url" class="list-anchor">#</a>
  
  Целевой URL.
- `data` [str] | [bytes] | [Dict] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-data"/><a href="#api-request-context-post-option-data" class="list-anchor">#</a>
  
  Позволяет установить данные запроса. Если параметр data является объектом, он будет сериализован в строку json, и заголовок `content-type` будет установлен в `application/json`, если не установлен явно. В противном случае заголовок `content-type` будет установлен в `application/octet-stream`, если не установлен явно.
- `fail_on_status_code` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-fail-on-status-code"/><a href="#api-request-context-post-option-fail-on-status-code" class="list-anchor">#</a>
  
  Следует ли выбрасывать исключение для кодов ответа, отличных от 2xx и 3xx. По умолчанию объект ответа возвращается для всех кодов состояния.
- `form` [Dict]\[[str], [str] | [float] | [bool]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-form"/><a href="#api-request-context-post-option-form" class="list-anchor">#</a>
  
  Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `application/x-www-form-urlencoded` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `application/x-www-form-urlencoded`, если не указан явно.
- `headers` [Dict]\[[str], [str]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-headers"/><a href="#api-request-context-post-option-headers" class="list-anchor">#</a>
  
  Позволяет установить HTTP-заголовки. Эти заголовки будут применяться к запрашиваемому запросу, а также к любым перенаправлениям, инициированным им.
- `ignore_https_errors` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-ignore-https-errors"/><a href="#api-request-context-post-option-ignore-https-errors" class="list-anchor">#</a>
  
  Следует ли игнорировать ошибки HTTPS при отправке сетевых запросов. По умолчанию `false`.
- `max_redirects` [int] *(опционально)* <font size="2">Added in: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-max-redirects"/><a href="#api-request-context-post-option-max-redirects" class="list-anchor">#</a>
  
  Максимальное количество перенаправлений запроса, которые будут автоматически следоваться. Ошибка будет выброшена, если количество превышено. По умолчанию `20`. Передайте `0`, чтобы не следовать за перенаправлениями.
- `max_retries` [int] *(опционально)* <font size="2">Added in: v1.46</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-max-retries"/><a href="#api-request-context-post-option-max-retries" class="list-anchor">#</a>
  
  Максимальное количество повторных попыток при сетевых ошибках. В настоящее время повторно пытается только ошибку `ECONNRESET`. Не повторяет попытки на основе кодов ответа HTTP. Ошибка будет выброшена, если лимит превышен. По умолчанию `0` - без повторных попыток.
- `multipart` [Dict]\[[str], [str] | [float] | [bool] | [ReadStream] | [Dict]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-multipart"/><a href="#api-request-context-post-option-multipart" class="list-anchor">#</a>
  - `name` [str]
    
    Имя файла
  - `mimeType` [str]
    
    Тип файла
  - `buffer` [bytes]
    
    Содержимое файла
  
  Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `multipart/form-data` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `multipart/form-data`, если не указан явно. Значения файлов могут быть переданы как объект, подобный файлу, содержащий имя файла, mime-тип и его содержимое.
- `params` [Dict]\[[str], [str] | [float] | [bool]\] | [str] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-params"/><a href="#api-request-context-post-option-params" class="list-anchor">#</a>
  
  Параметры запроса, которые будут отправлены с URL.
- `timeout` [float] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-option-timeout"/><a href="#api-request-context-post-option-timeout" class="list-anchor">#</a>
  
  Тайм-аут запроса в миллисекундах. По умолчанию `30000` (30 секунд). Передайте `0`, чтобы отключить тайм-аут.

**Возвращает**
- [APIResponse]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-post-return"/><a href="#api-request-context-post-return" class="list-anchor">#</a>

---

### put {#api-request-context-put}

<font size="2" style={{position: "relative", top: "-20px"}}>Added in: v1.16</font><x-search>apiRequestContext.put</x-search>

Отправляет HTTP(S) запрос [PUT](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/PUT) и возвращает его ответ. Метод будет заполнять cookies запроса из контекста и обновлять cookies контекста из ответа. Метод автоматически следует за перенаправлениями.

**Использование**

```python
api_request_context.put(url)
api_request_context.put(url, **kwargs)
```

**Аргументы**
- `url` [str]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-url"/><a href="#api-request-context-put-option-url" class="list-anchor">#</a>
  
  Целевой URL.
- `data` [str] | [bytes] | [Dict] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-data"/><a href="#api-request-context-put-option-data" class="list-anchor">#</a>
  
  Позволяет установить данные запроса. Если параметр data является объектом, он будет сериализован в строку json, и заголовок `content-type` будет установлен в `application/json`, если не установлен явно. В противном случае заголовок `content-type` будет установлен в `application/octet-stream`, если не установлен явно.
- `fail_on_status_code` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-fail-on-status-code"/><a href="#api-request-context-put-option-fail-on-status-code" class="list-anchor">#</a>
  
  Следует ли выбрасывать исключение для кодов ответа, отличных от 2xx и 3xx. По умолчанию объект ответа возвращается для всех кодов состояния.
- `form` [Dict]\[[str], [str] | [float] | [bool]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-form"/><a href="#api-request-context-put-option-form" class="list-anchor">#</a>
  
  Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `application/x-www-form-urlencoded` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `application/x-www-form-urlencoded`, если не указан явно.
- `headers` [Dict]\[[str], [str]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-headers"/><a href="#api-request-context-put-option-headers" class="list-anchor">#</a>
  
  Позволяет установить HTTP-заголовки. Эти заголовки будут применяться к запрашиваемому запросу, а также к любым перенаправлениям, инициированным им.
- `ignore_https_errors` [bool] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-ignore-https-errors"/><a href="#api-request-context-put-option-ignore-https-errors" class="list-anchor">#</a>
  
  Следует ли игнорировать ошибки HTTPS при отправке сетевых запросов. По умолчанию `false`.
- `max_redirects` [int] *(опционально)* <font size="2">Added in: v1.26</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-max-redirects"/><a href="#api-request-context-put-option-max-redirects" class="list-anchor">#</a>
  
  Максимальное количество перенаправлений запроса, которые будут автоматически следоваться. Ошибка будет выброшена, если количество превышено. По умолчанию `20`. Передайте `0`, чтобы не следовать за перенаправлениями.
- `max_retries` [int] *(опционально)* <font size="2">Added in: v1.46</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-max-retries"/><a href="#api-request-context-put-option-max-retries" class="list-anchor">#</a>
  
  Максимальное количество повторных попыток при сетевых ошибках. В настоящее время повторно пытается только ошибку `ECONNRESET`. Не повторяет попытки на основе кодов ответа HTTP. Ошибка будет выброшена, если лимит превышен. По умолчанию `0` - без повторных попыток.
- `multipart` [Dict]\[[str], [str] | [float] | [bool] | [ReadStream] | [Dict]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-multipart"/><a href="#api-request-context-put-option-multipart" class="list-anchor">#</a>
  - `name` [str]
    
    Имя файла
  - `mimeType` [str]
    
    Тип файла
  - `buffer` [bytes]
    
    Содержимое файла
  
  Предоставляет объект, который будет сериализован как html-форма с использованием кодировки `multipart/form-data` и отправлен как тело этого запроса. Если этот параметр указан, заголовок `content-type` будет установлен в `multipart/form-data`, если не указан явно. Значения файлов могут быть переданы как объект, подобный файлу, содержащий имя файла, mime-тип и его содержимое.
- `params` [Dict]\[[str], [str] | [float] | [bool]\] | [str] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-params"/><a href="#api-request-context-put-option-params" class="list-anchor">#</a>
  
  Параметры запроса, которые будут отправлены с URL.
- `timeout` [float] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-option-timeout"/><a href="#api-request-context-put-option-timeout" class="list-anchor">#</a>
  
  Тайм-аут запроса в миллисекундах. По умолчанию `30000` (30 секунд). Передайте `0`, чтобы отключить тайм-аут.

**Возвращает**
- [APIResponse]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-put-return"/><a href="#api-request-context-put-return" class="list-anchor">#</a>

---

### storage_state {#api-request-context-storage-state}

<font size="2" style={{position: "relative", top: "-20px"}}>Added in: v1.16</font><x-search>apiRequestContext.storage_state</x-search>

Возвращает состояние хранилища для этого контекста запроса, содержит текущие cookies и снимок локального хранилища, если он был передан в конструктор.

**Использование**

```python
api_request_context.storage_state()
api_request_context.storage_state(**kwargs)
```

**Аргументы**
- `indexed_db` [bool] *(опционально)* <font size="2">Added in: v1.51</font><a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-storage-state-option-indexed-db"/><a href="#api-request-context-storage-state-option-indexed-db" class="list-anchor">#</a>
  
  Установите в `true`, чтобы включить IndexedDB в снимок состояния хранилища.
- `path` [Union]\[[str], [pathlib.Path]\] *(опционально)*<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-storage-state-option-path"/><a href="#api-request-context-storage-state-option-path" class="list-anchor">#</a>
  
  Путь к файлу для сохранения состояния хранилища. Если [path](/api/class-apirequestcontext.mdx#api-request-context-storage-state-option-path) является относительным путем, то он разрешается относительно текущего рабочего каталога. Если путь не предоставлен, состояние хранилища все равно возвращается, но не будет сохранено на диск.

**Возвращает**
- [Dict]<a aria-hidden="true" tabIndex="-1" class="list-anchor-link" id="api-request-context-storage-state-return"/><a href="#api-request-context-storage-state-return" class="list-anchor">#</a>
  - `cookies` [List]\[[Dict]\]
    - `name` [str]
      
      
    - `value` [str]
      
      
    - `domain` [str]
      
      
    - `path` [str]
      
      
    - `expires` [float]
      
      Время Unix в секундах.
    - `httpOnly` [bool]
      
      
    - `secure` [bool]
      
      
    - `sameSite` "Strict" | "Lax" | "None"
      
      
    
  - `origins` [List]\[[Dict]\]
    - `origin` [str]
      
      
    - `localStorage` [List]\[[Dict]\]
      - `name` [str]
        
        
      - `value` [str]
        
        
      
    


[Accessibility]: /api/class-accessibility.mdx "Accessibility"
[APIRequest]: /api/class-apirequest.mdx "APIRequest"
[APIRequestContext]: /api/class-apirequestcontext.mdx "APIRequestContext"
[APIResponse]: /api/class-apiresponse.mdx "APIResponse"
[APIResponseAssertions]: /api/class-apiresponseassertions.mdx "APIResponseAssertions"
[Browser]: /api/class-browser.mdx "Browser"
[BrowserContext]: /api/class-browsercontext.mdx "BrowserContext"
[BrowserType]: /api/class-browsertype.mdx "BrowserType"
[CDPSession]: /api/class-cdpsession.mdx "CDPSession"
[Clock]: /api/class-clock.mdx "Clock"
[ConsoleMessage]: /api/class-consolemessage.mdx "ConsoleMessage"
[Dialog]: /api/class-dialog.mdx "Dialog"
[Download]: /api/class-download.mdx "Download"
[ElementHandle]: /api/class-elementhandle.mdx "ElementHandle"
[Error]: /api/class-error.mdx "Error"
[FileChooser]: /api/class-filechooser.mdx "FileChooser"
[Frame]: /api/class-frame.mdx "Frame"
[FrameLocator]: /api/class-framelocator.mdx "FrameLocator"
[JSHandle]: /api/class-jshandle.mdx "JSHandle"
[Keyboard]: /api/class-keyboard.mdx "Keyboard"
[Locator]: /api/class-locator.mdx "Locator"
[LocatorAssertions]: /api/class-locatorassertions.mdx "LocatorAssertions"
[Mouse]: /api/class-mouse.mdx "Mouse"
[Page]: /api/class-page.mdx "Page"
[PageAssertions]: /api/class-pageassertions.mdx "PageAssertions"
[Playwright]: /api/class-playwright.mdx "Playwright"
[Request]: /api/class-request.mdx "Request"
[Response]: /api/class-response.mdx "Response"
[Route]: /api/class-route.mdx "Route"
[Selectors]: /api/class-selectors.mdx "Selectors"
[TimeoutError]: /api/class-timeouterror.mdx "TimeoutError"
[Touchscreen]: /api/class-touchscreen.mdx "Touchscreen"
[Tracing]: /api/class-tracing.mdx "Tracing"
[Video]: /api/class-video.mdx "Video"
[WebError]: /api/class-weberror.mdx "WebError"
[WebSocket]: /api/class-websocket.mdx "WebSocket"
[WebSocketRoute]: /api/class-websocketroute.mdx "WebSocketRoute"
[Worker]: /api/class-worker.mdx "Worker"
[Element]: https://developer.mozilla.org/en-US/docs/Web/API/element "Element"
[EvaluationArgument]: /evaluating.mdx#evaluation-argument "EvaluationArgument"
[Promise]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"
[iterator]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols "Iterator"
[origin]: https://developer.mozilla.org/en-US/docs/Glossary/Origin "Origin"
[selector]: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors "selector"
[Serializable]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable"
[UIEvent.detail]: https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detail "UIEvent.detail"
[UnixTime]: https://en.wikipedia.org/wiki/Unix_time "Unix Time"
[xpath]: https://developer.mozilla.org/en-US/docs/Web/XPath "xpath"

[Any]: https://docs.python.org/3/library/typing.html#typing.Any "Any"
[bool]: https://docs.python.org/3/library/stdtypes.html "bool"
[bytes]: https://docs.python.org/3/library/stdtypes.html#bytes "bytes"
[Callable]: https://docs.python.org/3/library/typing.html#typing.Callable "Callable"
[EventContextManager]: https://docs.python.org/3/reference/datamodel.html#context-managers "Event context manager"
[EventEmitter]: https://pyee.readthedocs.io/en/latest/#pyee.BaseEventEmitter "EventEmitter"
[Exception]: https://docs.python.org/3/library/exceptions.html#Exception "Exception"
[Dict]: https://docs.python.org/3/library/typing.html#typing.Dict "Dict"
[float]: https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float"
[int]: https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int"
[List]: https://docs.python.org/3/library/typing.html#typing.List "List"
[NoneType]: https://docs.python.org/3/library/constants.html#None "None"
[Pattern]: https://docs.python.org/3/library/re.html "Pattern"
[URL]: https://en.wikipedia.org/wiki/URL "URL"
[pathlib.Path]: https://realpython.com/python-pathlib/ "pathlib.Path"
[str]: https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"
[Union]: https://docs.python.org/3/library/typing.html#typing.Union "Union"
[datetime]: https://docs.python.org/3/library/datetime.html#datetime.datetime "datetime"

[all available image tags]: https://mcr.microsoft.com/en-us/product/playwright/python/about "all available image tags"
[Microsoft Artifact Registry]: https://mcr.microsoft.com/en-us/product/playwright/python/about "Microsoft Artifact Registry"
[Dockerfile.noble]: https://github.com/microsoft/playwright-python/blob/main/utils/docker/Dockerfile.noble "Dockerfile.noble"
